angular.module("synsormed.services.adminInsight",[]).service("synsormed.services.adminInsight.InsightService",["$http","$q","env",function(e,t,r){return{getGlobalInsights:function(){var n=t.defer();return e.get(r.apiBaseUrl+"rest/insights/admin/global",{timeout:1e4}).then(function(e){n.resolve(e.data)})["catch"](n.reject),n.promise},getAdminUsers:function(){var n=t.defer();return e.get(r.apiBaseUrl+"rest/insights/admin/adminuser",{timeout:1e4}).then(function(e){n.resolve(e.data)})["catch"](n.reject),n.promise},getOrgCreatorUsers:function(){var n=t.defer();return e.get(r.apiBaseUrl+"rest/insights/admin/OrgCreatoruser",{timeout:1e4}).then(function(e){n.resolve(e.data)})["catch"](n.reject),n.promise},getAllOrganizations:function(){var n=t.defer();return e.get(r.apiBaseUrl+"rest/insights/practice",{timeout:1e4}).then(function(e){n.resolve(e.data)})["catch"](n.reject),n.promise},getOrganizationStatistics:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"rest/insights/practice/"+n+"/statistics",{timeout:1e4}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},getProviderStatistics:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"rest/insights/provider/"+n+"/statistics",{timeout:1e4}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},saveLicense:function(n,s){var a=t.defer();return e.put(r.apiBaseUrl+"rest/insights/admin/"+n,{licenseCount:s},{timeout:1e4}).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise},getOrganization:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"rest/insights/admin/"+n,{timeout:1e4}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},checkLicenseExpiration:function(){var n=t.defer();return e.get(r.apiBaseUrl+"rest/insights/admin/",{timeout:1e4}).then(function(e){n.resolve(e.data)})["catch"](n.reject),n.promise}}}]).factory("synsormed.services.Socket",["$q","$injector",function(e,t){console.log("**********************in portal socket");var r=io(window.Caireview.apiUrl);return{on:function(e,t){r.on(e,t)}}}]),angular.module("synsormed.services.diseases",[]).service("synsormed.services.diseases.DiseasesService",["$http","$q","env",function(e,t,r){return{getDiseases:function(){var n=t.defer();return e.get(r.apiBaseUrl+"rest/diseases",{timeout:1e4}).then(function(e){n.resolve(e.data)})["catch"](n.reject),n.promise}}}]),angular.module("synsormed.services.email",[]).service("synsormed.services.EmailService",["$http","$q","env",function(e,t,r){return{sendCodeEmail:function(n,s,a){var o=t.defer(),i={email:n,id:s},c="encounter"==a?"/mailer/encounter":"/mailer/monitor";return e.post(r.apiBaseUrl+c,i).then(function(e){o.resolve(e.data)})["catch"](o.reject),o.promise}}}]),angular.module("synsormed.services.encounter",["LocalStorageModule"]).service("synsormed.services.EncounterService",["$http","$q","env",function(e,t,r){return{createEncounter:function(n){var s=t.defer();return e.post(r.apiBaseUrl+"/rest/encounter",n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},updateEncounter:function(n){var s=t.defer();return e.put(r.apiBaseUrl+"/rest/encounter/"+n.id,n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},getEncounter:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"/rest/encounter/"+n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},deleteEncounter:function(n){var s=t.defer();return e["delete"](r.apiBaseUrl+"/rest/encounter/"+n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},pingServer:function(t){return e.post(r.apiBaseUrl+"log/web/encounter",{code:t},{timeout:5e3})},getProviderStatus:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"rest/status/provider/"+n,{},{timeout:5e3}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},logEncounterCallDuration:function(n,s){var a=t.defer();return e.put(r.apiBaseUrl+"rest/encounter/"+n+"/call/duration",{duration:s}).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise}}}]),angular.module("synsormed.services.insight",[]).service("synsormed.services.InsightService",["$http","$q","env",function(e,t,r){return{countEncounters:function(n,s){var a=t.defer();return e.post(r.apiBaseUrl+"rest/encounter/count",{providerId:n,days:s}).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise},getProviderInsights:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"rest/insights/provider/"+n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},getPracticeInsights:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"rest/insights/practice/"+n,{cache:!1}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},getPracticeInsightSeries:function(n,s){s=s||7;var a=t.defer();return e.get(r.apiBaseUrl+"rest/insights/series/practice/"+n+"/"+s,{cache:!1}).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise},getPracticeCCMInsights:function(n,s){s=s||7;var a=t.defer();return e.get(r.apiBaseUrl+"rest/insights/practice/"+n+"/ccm/"+s,{cache:!1}).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise},getSurveyResponseInsights:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"rest/insights/series/practice/"+n+"/survey",{cache:!1}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},getLeaderboardInsights:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"rest/insights/practice/"+n+"/leaderboard/",{cache:!1}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise}}}]),angular.module("synsormed.services.measurement",[]).service("synsormed.services.MeasurementService",["$http","$q","env",function(e,t,r){var n=null;return{getMeasurements:function(){var s=t.defer();return e.get(r.apiBaseUrl+"rest/measurement",{cache:!1}).then(function(e){n=e.data,s.resolve(e.data)})["catch"](s.reject),s.promise},getCachedMeasurements:function(){var e=t.defer();return null!==n?e.resolve(n):this.getMeasurements().then(function(t){e.resolve(t)})["catch"](function(t){e.reject(t)}),e.promise}}}]),angular.module("synsormed.services.monitor",["LocalStorageModule"]).service("synsormed.services.MonitorService",["$http","$q","env",function(e,t,r){return{createMonitor:function(n){var s=t.defer();return e.post(r.apiBaseUrl+"/rest/monitor",n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},updateMonitor:function(n){var s=t.defer();return e.put(r.apiBaseUrl+"/rest/monitor/"+n.id,n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},getMonitor:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"/rest/monitor/"+n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},deleteMonitor:function(n,s,a){var o=t.defer();return e["delete"](r.apiBaseUrl+"/rest/monitor/"+n,{params:{permanentDelete:a,user:s}}).then(function(e){o.resolve(e.data)})["catch"](o.reject),o.promise},resetMonitor:function(n){var s=t.defer();return e.put(r.apiBaseUrl+"/rest/monitor/"+n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},createAppointment:function(n,s){var a=t.defer();return e.post(r.apiBaseUrl+"/rest/monitor/"+n+"/appointment/offer",s).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise},getAppointment:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"/rest/monitor/"+n+"/appointment").then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},deleteAppointment:function(n){var s=t.defer();return e["delete"](r.apiBaseUrl+"/rest/monitor/"+n+"/appointment").then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},getMonitorInsights:function(n,s,a,o,i){var a=a?a:"",o=o?o:"",i=i?i:"",c=t.defer();return e.get(r.apiBaseUrl+"/rest/monitor/"+n+"/measurements/"+s+"/insights",{params:{days:a,firstDate:o,secondDate:i}}).then(function(e){c.resolve(e.data)})["catch"](c.reject),c.promise},unlinkOauthMonitorMeasurement:function(n,s){var a=s?s:"",o=t.defer();return e["delete"](r.apiBaseUrl+"/rest/monitor/"+n+"/unlink/"+a).then(function(e){o.resolve(e.data)})["catch"](o.reject),o.promise},unlinkOauthToken:function(n,s){var a=t.defer();return e["delete"](r.apiBaseUrl+"/rest/monitor/"+n+"/token/"+s).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise}}}]).service("synsormed.services.MonitorListService",["$http","$q","env",function(e,t,r){var n=0;return{fetchMonitorList:function(t,n,s,a,o,i,c){return e.get(r.apiBaseUrl+"rest/provider/"+t+"/monitor",{params:{currentPage:a,pageSize:o,paranoid:n,profileType:s,filterColor:i,searchFor:c}}).then(function(e){return e.data})},fetchMonitorCount:function(t,n,s,a,o,i){return e.get(r.apiBaseUrl+"rest/provider/"+t+"/monitor",{params:{getCount:a,paranoid:n,profileType:s,filterColor:o,searchFor:i}}).then(function(e){return e.data})},getLastViewedUser:function(){return n>0&&n},setLastViewedUser:function(e){n=parseInt(e)}}}]).service("synsormed.services.MonitorServicesService",["$http","$q","env",function(e,t,r){return{getServicesForMonitor:function(n,s){var a=t.defer();return e.get(r.apiBaseUrl+"/rest/monitor/"+n+"/services?measurementId="+s,{timeout:5e3}).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise},getConnectedService:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"/rest/monitor/"+n+"/services/connected",{timeout:1e4}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise}}}]).service("synsormed.services.MonitorMeasurementService",["$http","$q","env",function(e,t,r){return{setOauthDataForMeasurement:function(n,s,a,o){o=o||!0;var i=t.defer();return e.put(r.apiBaseUrl+"/rest/monitor/"+n+"/measurements/"+s+"?oauthUpdateOnly="+o,a,{timeout:15e3}).then(function(e){i.resolve(e.data)})["catch"](i.reject),i.promise},updateMonitorMeasurements:function(n,s){var a=t.defer();return e.put(r.apiBaseUrl+"/rest/monitor/"+n+"/measurements/",s,{timeout:1e4}).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise},getMonitorMeasurements:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"/rest/monitor/"+n+"/measurements/",{timeout:1e4}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},deleteMonitorMeasurements:function(n,s){var a=t.defer();return e["delete"](r.apiBaseUrl+"/rest/monitor/"+n+"/measurements/"+s,{timeout:1e4}).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise}}}]),angular.module("synsormed.services.network_providers",[]).service("synsormed.services.NetworkProviderService",["$http","$q","env",function(e,t,r){return{getProviders:function(n,s,a){var o=t.defer();return e.get(r.apiBaseUrl+"rest/networks").then(function(e){o.resolve(e.data)})["catch"](o.reject),o.promise}}}]),angular.module("synsormed.services.notify",[]).service("synsormed.services.NotifyService",["$q","env","$http",function(e,t,r){return{sendPushNotificationToMonitor:function(e,n){var s={monitorId:e,message:n};return r.post(t.apiBaseUrl+"rest/notification/monitor",s,{timeout:3e4}).then(function(e){return e.data})},sendPushNotificationToEncounter:function(e,n){var s={encounterId:e,message:n};return r.post(t.apiBaseUrl+"rest/notification/encounter",s,{timeout:3e4}).then(function(e){return e.data})}}}]),angular.module("synsormed.services.pageState",["LocalStorageModule"]).service("synsormed.services.WorkListStateService",["localStorageService",function(e){return{setWorkListState:function(t){return e.set("worklistData",t)},getWorkListState:function(){return e.get("worklistData")},removeWorkListState:function(){return e.remove("worklistData")},clearState:function(){return this.removeWorkListState()}}}]).service("synsormed.services.MonitorStateService",["localStorageService",function(e){return{setMonitorState:function(t){return e.set("monitorlistData",t)},getMonitorState:function(){return e.get("monitorlistData")},removeMonitorState:function(){return e.remove("monitorlistData")},clearState:function(){this.removeMonitorState()}}}]).service("synsormed.services.PatientStateService",["localStorageService",function(e){return{setPatientState:function(t){return e.set("patientListData",t)},getPatientState:function(){return e.get("patientListData")},removePatientState:function(){return e.remove("patientListData")},clearState:function(){this.removePatientState()}}}]),angular.module("synsormed.services.patient",[]).service("synsormed.services.PatientListService",["$http","$q","env",function(e,t,r){return{getPatients:function(n,s,a,o,i,c){var s=s?s:0,u=t.defer();return e.get(r.apiBaseUrl+"/rest/provider/"+n+"/patient",{params:{paranoid:s,getCount:a,currentPage:o,pageSize:i,searchBox:c?c:null}}).then(function(e){u.resolve(e.data)})["catch"](u.reject),u.promise},resetPatient:function(n){var s=t.defer();return e.put(r.apiBaseUrl+"/rest/provider/"+n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise}}}]).service("synsormed.services.PatientService",["$http","$q","env",function(e,t,r){return{createPatient:function(n){var s=t.defer();return e.post(r.apiBaseUrl+"/rest/patient",n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},getPatient:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"/rest/patient/"+n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},updatePatient:function(n){var s=t.defer();return e.put(r.apiBaseUrl+"/rest/patient/"+n.id,n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},deletePatient:function(n,s){var a=t.defer();return e["delete"](r.apiBaseUrl+"/rest/patient/"+n,{params:{permanentDelete:s}}).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise},uploadFileToUrl:function(n){var s=t.defer(),a=new FormData;return a.append("file",n),e.post(r.apiBaseUrl+"/rest/upload/",a,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},getRPMReport:function(n,s,a){var o=t.defer();return e.get(r.apiBaseUrl+"/rest/monitor/rpm-report",{params:{startDate:moment(n).format(),endDate:moment(s).format(),offset:(new Date).getTimezoneOffset()}}).then(function(e){console.log("resp",e.data),o.resolve(e.data)})["catch"](o.reject),o.promise},getBillingReport:function(n,s,a){var o=t.defer();return e.get(r.apiBaseUrl+"/rest/monitor/billing/report",{params:{startDate:moment(n).format(),endDate:moment(s).format(),offset:(new Date).getTimezoneOffset()}}).then(function(e){console.log("resp",e.data),o.resolve(e.data)})["catch"](o.reject),o.promise},getURL:function(){var e=r.apiBaseUrl+"../rpm_report.csv";return e},getBillingReportURL:function(){var e=r.apiBaseUrl+"../billing_report.csv";return e}}}]),angular.module("synsormed.services.practice",["LocalStorageModule"]).service("synsormed.services.PracticeService",["$http","$q","env",function(e,t,r){return{changeOrgStatus:function(n,s){var a=t.defer();return e.put(r.apiBaseUrl+"rest/practice/"+n+"/active",{active:s},{timeout:1e4}).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise},getPractice:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"/rest/practice/"+n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},savePractice:function(n){var s=t.defer();return e.put(r.apiBaseUrl+"/rest/practice/"+n.id,n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},registerPractice:function(n){var s=t.defer();return e.post(r.apiBaseUrl+"/register",n).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise}}}]),angular.module("synsormed.services.quickBlox",[]).service("synsormed.services.QuickBlox",["$q","env",function(e,t){return{initialize:function(e){QB.webrtc||QB.init(e,41633)},startCall:function(e){var t={};e.call(t,function(e){console.log(e)})},createSession:function(e){var t=QB.webrtc.CallType.VIDEO;return QB.webrtc.createNewSession(e,t)},getUserMedia:function(t){var r=e.defer(),n={audio:!0,video:!0,options:{muted:!0,mirror:!0}};return t.getUserMedia(n,function(e,t){if(e)return r.reject(e);var n=t.getAudioTracks(),s=t.getVideoTracks();return n.length?s.length?r.resolve(t):r.reject({code:404,device:"video",message:"Camera not detected. Please connect camera and try again."}):r.reject({code:404,device:"audio",message:"Microphone not detected. Please connect microphone and try again."})}),r.promise},connectUser:function(t,r){var n=e.defer();return QB.chat.connect({userId:t,password:r},function(e,t){e?n.reject(e):n.resolve(t)}),n.promise}}}]),angular.module("synsormed.services.report",[]).service("synsormed.services.ReportService",["$http","$q","env","$window",function(e,t,r,n){return{getComplianceReport:function(){var n=t.defer();return e.get(r.apiBaseUrl+"rest/report/compliance/",{cache:!1}).then(function(e){n.resolve(e.data)})["catch"](n.reject),n.promise},searchUser:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"rest/report/summary/search?keyword="+n,{cache:!1}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},getSummaryReport:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"rest/report/summary?monitorId="+n,{cache:!1}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},getPdfToken:function(n){var s=t.defer();return e.get(r.apiBaseUrl+"file/pdf/token?monitorId="+n,{cache:!1}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},downLoadPdf:function(e,t){n.open(r.apiBaseUrl+"file/pdf/"+e+"/"+t)}}}]),angular.module("synsormed.services.timer",[]).service("synsormed.services.TimerService",["$interval",function(e){var t=null,r=null,n=null,s=function(s,a){t=a||moment(),r=e(function(){var e=moment();n=moment.duration(e.diff(t)),s&&s(n)},1e3)},a=function(t){if(r&&e.cancel(r),n){var s=3600*n.hours(),a=60*n.minutes(),o=s+a+n.seconds();t&&t(o)}};return{startTimer:s,cancelTimer:a}}]),angular.module("synsormed.services.user",["LocalStorageModule"]).service("synsormed.services.UserService.SuperAdminState",["localStorageService",function(e){return{setState:function(e){sessionStorage.setItem("from-super-admin",e)},getState:function(){return sessionStorage.getItem("from-super-admin")},clearState:function(){sessionStorage.removeItem("from-super-admin")}}}]).service("synsormed.services.UserService",["$rootScope","$http","$q","env","localStorageService","synsormed.services.UserService.SuperAdminState","synsormed.services.UserModel",function(e,t,r,n,s,a,o){var i="";return{login:function(e,o){var i=r.defer();return a.clearState(),t.post(n.apiBaseUrl+"/authenticate",{username:e,password:o}).then(function(e){e.data.profileType&&"synsormedWhite"==e.data.profileType?s.set("profileType",!0):s.set("profileType",""),e.data.csrfToken&&(sessionStorage.setItem("x-csrf",e.data.csrfToken),t.defaults.headers.common["x-csrf"]='"'+e.data.csrfToken+'"'),sessionStorage.setItem("X-Session-Token",e.headers("X-Session-Token")),t.defaults.headers.common["X-Session-Token"]=e.headers("X-Session-Token"),i.resolve(e.data.user)})["catch"](i.reject),i.promise},patientLogin:function(e){var s=r.defer();return t.post(n.apiBaseUrl+"/authenticate/encounter",{code:e},{timeout:1e4}).then(function(e){e.data.csrfToken&&(sessionStorage.setItem("x-csrf",e.data.csrfToken),t.defaults.headers.common["x-csrf"]='"'+e.data.csrfToken+'"'),sessionStorage.setItem("X-Session-Token",e.headers("X-Session-Token")),t.defaults.headers.common["X-Session-Token"]=e.headers("X-Session-Token"),s.resolve(new o(e.data))})["catch"](s.reject),s.promise},savePatient:function(e){var n=r.defer();return t.put(urlBase+"/v1/rest/encounter/"+e.id,e).then(function(e){n.resolve(e.data)})["catch"](function(e){n.reject(new HttpError({code:e.status,message:e.data}))}),n.promise},fetchCachedUser:function(){return s.get("currentUser")||null},setCachedUser:function(e){s.set("currentUser",e)},clearCachedUser:function(){s.remove("currentUser")},fetchAllUsers:function(e){var e=e?e:0,s=r.defer();return t.get(n.apiBaseUrl+"/rest/user",{params:{paranoid:e}}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},fetchAllUsersPaginate:function(e,s){var e=e?e:0,a=r.defer();return t.get(n.apiBaseUrl+"/rest/user/paginate",{params:{paranoid:e,currentPage:s||1}}).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise},createUser:function(e){var s=r.defer();return t.post(n.apiBaseUrl+"/rest/user/",e).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},updateUser:function(e){var s=r.defer();return t.put(n.apiBaseUrl+"/rest/user/"+e.id,e).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},deleteUser:function(e,s){var a=r.defer();return t["delete"](n.apiBaseUrl+"/rest/user/"+e,{params:{permanentDelete:s}}).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise},resetUser:function(e,s){var a=r.defer();return t.put(n.apiBaseUrl+"/rest/user/"+e,{reset:s}).then(function(e){a.resolve(e.data)})["catch"](a.reject),a.promise},resetPasswordLink:function(e){var s=r.defer();return t.post(n.apiBaseUrl+"/forgot/send/"+e,{},{timeout:1e4}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},resetPasswordViaCode:function(e){var s=r.defer();return t.post(n.apiBaseUrl+"/forgot/reset/",{data:e},{timeout:1e4}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},emergencyAccess:function(e){var s=r.defer();return t.post(n.apiBaseUrl+"/authenticate/otp",{otp:e},{timeout:1e4}).then(function(e){e.data.csrfToken&&(sessionStorage.setItem("x-csrf",e.data.csrfToken),t.defaults.headers.common["x-csrf"]='"'+e.data.csrfToken+'"'),sessionStorage.setItem("X-Session-Token",e.headers("X-Session-Token")),t.defaults.headers.common["X-Session-Token"]=e.headers("X-Session-Token"),s.resolve(e.data.user)})["catch"](s.reject),s.promise},getOtpCode:function(e){var s=r.defer();return t.get(n.apiBaseUrl+"/rest/user/otp/"+e,{timeout:1e4}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},getStatusSurvey:function(e){var s=r.defer();return t.get(n.apiBaseUrl+"/rest/user/statusSurvey/"+e,{timeout:1e4}).then(function(e){s.resolve(e.data)})["catch"](s.reject),s.promise},superUserLogin:function(e,s){var o=r.defer();return t.post(n.apiBaseUrl+"/authenticate/superadmin/login",{adminId:e,orgId:s},{timeout:1e4}).then(function(e){e.data.csrfToken&&(sessionStorage.setItem("x-csrf",e.data.csrfToken),t.defaults.headers.common["x-csrf"]='"'+e.data.csrfToken+'"'),sessionStorage.setItem("X-Session-Token",e.headers("X-Session-Token")),a.setState(e.data.superAdmin),t.defaults.headers.common["X-Session-Token"]=e.headers("X-Session-Token"),o.resolve(e.data.user)})["catch"](o.reject),o.promise},goToSuperUserAccount:function(){var e=r.defer();return a.clearState(),t.post(n.apiBaseUrl+"/authenticate/superadmin/goBack",{timeout:1e4}).then(function(r){r.data.csrfToken&&(sessionStorage.setItem("x-csrf",r.data.csrfToken),t.defaults.headers.common["x-csrf"]='"'+r.data.csrfToken+'"'),sessionStorage.setItem("X-Session-Token",r.headers("X-Session-Token")),t.defaults.headers.common["X-Session-Token"]=r.headers("X-Session-Token"),e.resolve(r.data.user)})["catch"](e.reject),e.promise},directRequestUrl:function(e){i=e},redirectPath:function(){return i}}}]).factory("synsormed.services.UserModel",["$q","$injector",function(e,t){var r=["name","code","fee","email","type","callerId","paymentStatus","paid","termsAccepted","id","providerId","weemoToken","isMonitor","isEncounter","createdAt","nextReading","appointmentMeta","providerName","practiceName","autoFetch","oauthAvailable"],n=function(e){return{get:function(){return this.data[e]},set:function(t){this.data[e]=t}}},s=function(e){this.data={},this.fromJSON(e);for(var t=0,s=r.length;t<s;t++)Object.defineProperty(this,r[t],n(r[t]))};return _.extend(s.prototype,{toJSON:function(){return _.clone(this.data)},fromJSON:function(e){_.extend(this.data,_.pick(e,r))},save:function(r){var n=e.defer();return r?n.promise:this.isMonitor?n.reject({message:"Code is monitor"}):n.resolve(t.get("synsormed.services.UserService").savePatient(this))}}),s}]),angular.module("synsormed.services.worklist",[]).service("synsormed.services.WorklistService",["$http","env",function(e,t){return{fetchWorklist:function(r,n){return isNaN(n)&&(n=new Date),n.setHours(0,0,0,0),e.get(t.apiBaseUrl+"rest/provider/"+r+"/worklist?date="+n.toISOString()).then(function(e){return e.data})},fetchOnlinePatients:function(r,n){return isNaN(n)&&(n=new Date),n.setHours(0,0,0,0),e.get(t.apiBaseUrl+"rest/provider/"+r+"/worklist?date="+n.toISOString()+"&waiting="+!0).then(function(e){return e.data})},pingServer:function(){return e.post(t.apiBaseUrl+"log/web")},getQuickBloxDetails:function(r){return e.get(t.apiBaseUrl+"rest/provider/"+r+"/quickBloxDetails").then(function(e){return e.data})},getEncounterQuickBoxDetails:function(r){return e.get(t.apiBaseUrl+"rest/encounter/"+r+"/quickBloxDetails").then(function(e){return e.data})}}}]);
angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/directives/dropdown/dropdown.html",'<div class="btn-group" dropdown>\n  <button type="button" class="btn btn-secondary dropdown-toggle" aria-expanded="false">\n    {{getSelected()}} <span class="caret"></span>\n  </button>\n  <ul ng-if="items" class="dropdown-menu" role="menu">\n    <li ng-repeat="value in items">\n      <a ng-click="select(value)">\n        {{getOption(value)}}\n      </a>\n      </li>\n  </ul>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/directives/education-module/education.html",'<div ng-if="diseases.length">\n    <div class="form-group" validate>\n        <h5>\n            <input ng-model=\'tempDiseases.displayDiseases\' type=\'checkbox\' is-education-checked=\'isEducationChecked\'/>\n            Education\n        </h5>\n    </div>\n    <div class="form-group" ng-if="tempDiseases.displayDiseases">\n        <h5>Condition</h5>\n        <select class="form-control btn-secondary" ng-model="temp.id" ng-options="disease.id as disease.name for disease in diseases"></select>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/directives/health-indicator-selection/healthindicator.html",'<div id=\'healthindicator\'>\n    <div class="form-group">\n        <div class="panel panel-default">\n            <div class="panel-body">\n                <div class="text-center">\n                    <div class="pull-left"><b>Status</b></div>\n                    <div class="pull-right">\n                        <span ng-if="!(isMissed || isOutofBound)" class="fa fa-lg fa-check-circle text-success status-btn" title="Reading is up to date and in range"></span>\n                        <span ng-if="isMissed" class="fa fa-lg fa-calendar-times-o text-warning status-btn" title="Patient missed scheduled reading"></span>\n                        <span ng-if="isOutofBound" class="fa fa-lg fa fa-heartbeat text-danger status-btn" title="Latest reading is out of range"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div ng-if="oauthAvailable" class="panel panel-default">\n            <div class="panel-body">\n                <div class="text-center">\n                    <div class=\'pull-left\'><b>Service</b></div>\n                    <div class=\'pull-right\'>\n                        <span class=\'pull-left\'>{{serviceName}}</span>\n                        <span class="text-success fa-lg fa fa-check-circle pull-right mar-top-2"></span>\n                        <div class=\'clear\'></div></div>\n                    <div class=\'clear\'></div>\n                </div>\n            </div>\n        </div>\n        <h5>Health Indicator</h5>\n        <div class="row">\n          <div class="col-xs-6" validate>\n            <select name="measurementId" required class="form-control btn-secondary" ng-selected=\'measurementId\' ng-model="measurementId" ng-options="measurement.id as (measurement.display_name || measurement.name) for measurement in measurements" option-class-expr="grey">\n            </select>\n          </div>\n          <div class="col-xs-6" validate>\n            <select name="repeatInterval" required class="form-control btn-secondary" ng-model="repeatIntervalInHours" ng-options="interval.id as interval.name for interval in monitoringIntervals"></select>\n          </div>\n        </div>\n    </div>\n    <safe-reading status-survey-id="statusSurveyId" status-survey="statusSurvey" measurement=\'getCurrent(measurementId)\' upperbound="upperbound" lowerbound="lowerbound"></safe-reading>\n    <education diseases=\'diseases\' display-diseases="displayDiseases" diseases-id="diseasesId" is-education-checked=\'isEducationChecked\'></education>\n</div>\n\n<style>\n.grey:{\n  color:\t#C0C0C0;\n}\n</style>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/directives/indicator-list/indicator-list.html",'<div id="indicator-list">\n    <div class="col-sm-12 alert alert-warning text-center" ng-if="!monitorMeasurements.length">\n        No Health Indicators Added\n    </div>\n    <accordion close-others="true" >\n        <accordion-group is-open=\'status.open\' ng-repeat=\'monitorMeasurement in monitorMeasurements\' class="col-sm-12 alert alert-info indicator-list" ng-class="{\'bordr\': status.open}"  ng-if="measurements.length">\n            <accordion-heading>\n                <div class="col-sm-6 col-xs-5 text-left list-text" >\n                    <a ng-click="indicator(monitorMeasurement)" ng-class="monitorMeasurement.measurementId == 9 ? \'cyan\' : \'grey\'">{{ monitorMeasurement.measurementId ? getCurrentMeasurementName(monitorMeasurement.measurementId) : null}}<b ng-if=\'!monitorMeasurement.id\'> *</b></a>\n                </div>\n                <div class="col-sm-5 col-xs-6 float-right text-right list-btn">\n                    <button type="button" title=\'Expand Details\' class="btn btn-secondary btn-sm" ng-click="indicator(monitorMeasurement)">\n                        <i class="fa fa-plus"></i>\n                    </button>\n                    <label ng-if="!!monitorMeasurement.id && leaderboard && getCurrentMeasurementName(monitorMeasurement.measurementId)==\'Steps\'"\n                    type="button" title=\'Enable leaderboard\' class="btn btn-secondary btn-sm toggle-box"\n                    ng-click="$event.stopPropagation()">\n                        <input ng-model="monitorMeasurement.isEnrolled" type=\'checkbox\' class="pointer" />\n                    </label>\n                    <button ng-if=\'!!monitorMeasurement.id\' title=\'Connect service\' class="btn btn-secondary btn-sm" ng-click="monitorOauthLink(monitorMeasurement.measurementId, monitorId, monitorMeasurement.id); $event.stopPropagation()" ><i class="fa fa-cloud-upload"></i></button>\n                </div>\n                <div class="clear"></div>\n            </accordion-heading>\n            <health-indicator measurements=\'measurements\' is-missed=\'monitorMeasurement.isMissed\'\n             is-outof-bound=\'monitorMeasurement.isOutOfBound\'\n             select-measurement-id=\'monitorMeasurement.measurementId\'\n             upperbound="monitorMeasurement.upperbound" lowerbound="monitorMeasurement.lowerbound"\n              sensitivity=\'monitorMeasurement.sensitivity\' repeat-interval=\'monitorMeasurement.repeatInterval\'\n               service-name=\'monitorMeasurement.serviceName\' oauth-available=\'monitorMeasurement.oauthAvailable\'\n               diseases=\'diseases\' display-diseases="displayDiseases" diseases-id="monitorMeasurement.diseasesId"\n               status-survey="statusSurvey" status-survey-id="monitorMeasurement.statusSurveyId" is-education-checked=\'monitorMeasurement.isEducationChecked\'>\n               </health-indicator>\n            <button type="button" title=\'Delete indicator\' class="btn pull-right btn-reverse btn-sm" ng-click="removeIndicator($index, monitorMeasurement); $event.stopPropagation()">\n                <i class="fa fa-trash"></i>\n            </button>\n        </accordion-group>\n    </accordion>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/directives/indicator-list/service-list.html",'<div id="monitor-service-list" class="modal-body" style="position: relative;" wait="waiting">\n    <div class="text-center">\n        <h3>Available Services</h3>\n    </div>\n\n    <div class="panel panel-default">\n        <div class="panel-body panel-fix">\n            <div class="center">\n                <ul ng-if="services" class="list-group">\n                    <li ng-click="startOauth(service)" ng-repeat="service in services" class="pointer list-group-item" >\n                        <a> {{service.title}} </a> <span ng-if=\'!!service.connected\' class="text-success pull-right fa-lg fa fa-check-circle"></span>\n                    </li>\n                </ul>\n                <div ng-if="!services || !services.length" class="alert alert-warning" >\n                    No Services Available\n                </div>\n\n            </div>\n        </div>\n    </div>\n</div>\n<div class="modal-footer">\n   <button class="btn btn-primary" ng-click="ok()">OK</button>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/directives/indicator-metrics/indicator-metrics.html",'<div id="indicator-metrics">\n    <div class="panel panel-default" ng-repeat ="indicator in indicators">\n        <table  class="table table-bordered">\n            <tbody class="text-center">\n                <!-- put a div here due to error by using colspan while genrating pdf -->\n                <div class="text-left text-capitalize hdr" style="padding:10px;15px;">\n                    Indicator: {{indicator.name}} |\n                    {{indicator.serviceName | defaultText : \'Not connected\'}}\n                </div>\n                <tr>\n                    <th class="text-center" ng-repeat ="cat in indicator.results.categories track by $index">\n                        {{cat}}\n                    </th>\n                </tr>\n                <tr>\n                    <td ng-repeat ="data in indicator.results.displayData track by $index">\n                        {{data | defaultText : \'N/A\'}}\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/directives/safereading/safereading.html",'<div class="form-group" ng-if=\'measurement.name.toLowerCase()=="status"\'>\n    <h5>Select survey <help help-text="Select a survey for patient."/></h5>\n    <select ng-model="selected.statusSurveyId" ng-options="s.id as s.displayName for s in statusSurvey" name="status-survey" required class="form-control btn-secondary"></select>\n</div>\n<div class="from-group">\n  <h5 ng-if=\'measurement.name.toLowerCase()!="status" && measurement.name.toLowerCase() !="oxygen flow"\'>Safe Range <span class="small" ng-if=\'measurement.unit\'>({{measurement.unit}})</span> <help help-text="You will be notified if submitted readings are outside of this safe range."/></h5>\n  <h5 ng-if=\'measurement.name.toLowerCase() =="oxygen flow"\'>Target Flow Rate <span class="small" ng-if=\'measurement.unit\'>({{measurement.unit}})</span> <help help-text="The ideal flow rate for this patient"/></h5>\n  <div ng-if=\'measurement.name.toLowerCase()!="blood pressure" && measurement.name.toLowerCase()!="status" && measurement.name.toLowerCase() !="oxygen flow"\'>\n     <div range-slider min="slider.floor" max="slider.ceil" step="slider.step" decimal-places="slider.decimal" model-min="slider.min" model-max="slider.max" show-values="false" class="override-range-slider-styles"></div>\n     <div>\n         <input type="text" ng-model="slider.min" ng-model-options="modelOptionsConfig" class="float-left slider-input-box">\n         <input type="text" ng-model="slider.max" ng-model-options="modelOptionsConfig" class="float-right slider-input-box"/>\n         <div class="clear"></div>\n     </div>\n  </div>\n  <div ng-if=\'measurement.name.toLowerCase()=="oxygen flow"\'>\n     <div range-slider min="slider.floor" max="slider.ceil" step="{{slider.step}}" decimal-places="{{slider.decimal}}" model-min="slider.min" model-max="slider.max" show-values="false" class="override-range-slider-styles" pin-handle="min"></div>\n     <div>\n         <input type="text" ng-model="slider.max" ng-model-options="modelOptionsConfig" class="slider-input-box" style="margin-left:{{sliderValue}}%"/>\n         <div class="clear"></div>\n     </div>\n  </div>\n  <div ng-if=\'measurement.name.toLowerCase()=="blood pressure"\'>\n    Systolic Pressure\n    <div range-slider min="bpslider.floor" max="bpslider.ceil" model-min="bpslider.min" model-max="bpslider.max" show-values="false" class="override-range-slider-styles"></div>\n    <div>\n        <input type="text" ng-model="bpslider.min" ng-model-options="modelOptionsConfig" class="float-left slider-input-box">\n        <input type="text" ng-model="bpslider.max" ng-model-options="modelOptionsConfig" class="float-right slider-input-box"/>\n        <div class="clear"></div>\n    </div>\n    Diastolic Pressure\n    <div range-slider min="bpslider.floor" max="bpslider.ceil" model-min="bpslider.min1" model-max="bpslider.max1" show-values="false" class="override-range-slider-styles"></div>\n    <div>\n        <input type="text" ng-model="bpslider.min1" ng-model-options="modelOptionsConfig" class="float-left slider-input-box">\n        <input type="text" ng-model="bpslider.max1" ng-model-options="modelOptionsConfig" class="float-right slider-input-box"/>\n        <div class="clear"></div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/directives/stacked-toggle-progress-bar/stacked-toggle-progress-bar.html",'<div id="stacked-progress-toggle-box">\n  <div id="toggle-switch-wrapper">\n    <div class="switch-box">\n      <div id="overview" class="clearfix info-box">\n        <div class="text-center pull-left" style="width:50%;">\n          <p>\n            <span><b>Total Monitors: </b></span>\n            <span>{{total}}</span>\n          </p>\n        </div>\n        <div class="text-center pull-left" style="width:50%;">\n          <p>\n            <span><b>For: </b></span>\n            <span>{{doc.name}}</span>\n          </p>\n        </div>\n      </div>\n      <div id="details" class="clearfix info-box">\n        <div ng-repeat="obj in data" class="text-center pull-left" style="width:{{100/data.length}}%;">\n          <p>\n            <i class="fa fa-square fa-2" style="color: {{obj.color}}"></i>\n            <span><b>{{obj.title}}: </b></span>\n            <span>{{obj.percent}}%</span>\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div id="stackedProgressBar" class="progress stacked-progress">\n    <div ng-repeat="obj in data" class="progress-bar" role="progressbar" style="width:{{obj.percent}}%; background-color: {{obj.color}}" title="{{obj.title}}"></div>\n  </div>\n</div>')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/directives/toggle-list/toggle-list.html",'<ul class="list-group">\n  <li class="list-group-item header">\n    <span ng-show="!visible" class="pull-right fa fa-chevron-down pointer" ng-click="toggle()"></span>\n    <span ng-show="visible" class="pull-right fa fa-chevron-up pointer" ng-click="toggle()"></span>\n    {{listTitle}}\n  </li>\n  <div ng-show="visible" ng-transclude></div>\n</ul>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/emergency/emergencyAccess.html",'<div id="emergency-access" class="container">\n    <div class="row">\n      <div class="col-md-4 col-md-offset-4">\n        <div class="text-center"><img src="/images/logo_new1.png" style="height:100px;"/></div>\n        <h4 class="text-center">Emergency Access</h4>\n        <alert ng-repeat="alert in alerts" class="text-center" type="{{alert.type}}">{{alert.msg}}</alert>\n        <div class="panel panel-default">\n          <div class="panel-body">\n            <form name="form">\n              <div class="form-group" validate>\n                <label>OTP Code</label>\n                <input class="form-control" type="password" required name="otp" placeholder="Organization OTP Code" ng-model="otpCode">\n              </div>\n              <div>\n                <button type="submit" class="btn btn-primary" ng-click="submit()">Submit</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/insights/details.html",'<div class="modal-header">\n    <h3 class="modal-title">\n        <span>Insights : {{user.name}}</span>\n    </h3>\n</div>\n<div class="modal-body" style="position: relative" wait="waiting">\n    <ul class="list-group">\n      <li class="list-group-item">\n        <span class="badge">{{encounterCount}}</span>\n        Patients (In Last 7 Days)\n      </li>\n      <li class="list-group-item">\n        <span class="badge">{{insights.calls}}</span>\n        Total Patients\n      </li>\n      <li class="list-group-item">\n        <span class="badge">{{insights.duration | secondsToHoursString }}</span>\n        Total Call Session\n      </li>\n      <li class="list-group-item">\n        <span class="badge">{{insights.maxDuration | secondsToHoursString }}</span>\n        Longest Session With a Patient\n      </li>\n    </ul>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">OK</button>\n</div>\n</script>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/insights/insights.html",'<div id="insights">\n\n  <!-- Nav tabs -->\n  <!-- Top nav starts  -->\n  <nav class="navbar synsormed-navs navbar-inverse" role="tabs">\n      <div class="container">\n        <!-- Nav brand start -->\n        <div class="navbar-header col-md-2">\n          <button type="button" class="navbar-toggle" data-toggle="collapse"\n           data-target="#collspse-insight-target">\n             <span class="icon-bar"></span>\n             <span class="icon-bar"></span>\n             <span class="icon-bar"></span>\n          </button>\n           <a class="navbar-brand" ><strong>Insights</strong></a>\n        </div>\n        <!-- Nav brand ends-->\n\n        <!-- Nav menu start-->\n        <ul role="tablist" id="collspse-insight-target" class="nav navbar-nav collapse navbar-collapse col-md-10">\n          <li role="presentation" ng-if="user.role == \'Admin\'" class="active"><a href="#dashboard" aria-controls="dashboard" role="tab" data-toggle="tab">Dashboard</a></li>\n          <li role="presentation" ng-if="user.role == \'Admin\'"><a href="#graphs" ng-click="loadChart()" aria-controls="graphs" role="tab" data-toggle="tab">Deep Insights</a></li>\n          <li role="presentation" ng-if="user.role == \'Admin\'"><a href="#doctors" aria-controls="doctors" role="tab" data-toggle="tab">Doctors</a></li>\n          <li role="presentation" ng-if="user.role == \'Admin\'"><a href="#ccm" ng-click="loadCCM()" aria-controls="ccm" role="tab" data-toggle="tab">CCM</a></li>\n          <li role="presentation" ng-if="user.role == \'Admin\'"><a href="#survey" ng-click="loadSurveyChart()" aria-controls="survey" role="tab" data-toggle="tab">Survey</a></li>\n          <li role="presentation" ng-if="user.role == \'Admin\'"><a href="#leaderboard" ng-click="loadLeaderboard()" aria-controls="leaderboard" role="tab" data-toggle="tab">Leaderboard</a></li>\n        </ul>\n        <!-- Nav menu ends -->\n\n        <div class="alert alert-danger col-md-offset-1 col-md-3" ng-if="licenseMsg" style="padding:8px;margin:10px 0px;float:right;">\n          <strong style="padding-left: 35px;">{{licenseMsg}}</strong>\n        </div>\n\n      </div>\n  </nav>\n\n <!-- Tab panes -->\n <div class="tab-content">\n\n   <div role="tabpanel" class="tab-pane active" ng-if="user.role == \'Admin\'" ng-init="loadPracticeInsights(user.org_id)" id="dashboard" ng-controller="InsightsDashboardController">\n        <div class="header">\n           <div class="container">\n             <div class="col-md-10 col-xs-6 text-left"><h3>Dashboard</h3></div>\n             <div class="col-md-2 col-xs-6 text-right form-group">\n                <button class="btn btn-primary btn-sm" ng-click="loadPracticeInsights(user.org_id)"><strong>REFRESH</strong></button>\n             </div>\n           </div>\n         </div>\n          <alert class="no-list container" ng-if="!insights" type="warning">\n            No Insights Available\n          </alert>\n\n          <div class="container no-list">\n          <ul ng-if="insights" class="list-group">\n            <li class="list-group-item">\n              <span class="badge">{{insights.providers}}</span>\n              All Doctors\n            </li>\n            <li class="list-group-item">\n              <span class="badge">{{insights.patients}}</span>\n              All Patients\n            </li>\n            <li class="list-group-item">\n              <span class="badge">{{insights.patients7days}}</span>\n              All Patients (Last 7 days)\n            </li>\n            <li ng-if="insights.longestSession" class="list-group-item">\n              <span class="badge">{{insights.longestSession}}</span>\n              Most Called Doctor (All Times)\n            </li>\n            <li ng-if="insights.longestSession7days" class="list-group-item">\n              <span class="badge">{{insights.longestSession7days}}</span>\n              Most Called Doctor (Last 7 days)\n            </li>\n            <li ng-if="insights.lowestSession" class="list-group-item">\n              <span class="badge">{{insights.lowestSession}}</span>\n              Least Called Doctor (All Times)\n            </li>\n            <li ng-if="insights.lowestSession7days" class="list-group-item">\n              <span class="badge">{{insights.lowestSession7days}}</span>\n              Least Called Doctor (Last 7 days)\n            </li>\n            <li ng-if="insights.monitorStatus" class="list-group-item">\n              <span class="badge">{{insights.monitorStatus.monitors}}</span>\n              All Monitors\n            </li>\n            <li ng-if="insights.monitorStatus" class="list-group-item">\n              <span class="badge">{{insights.monitorStatus.connectedMonitorRatio*100}} %</span>\n              Connected Monitor Percentage\n            </li>\n            <li ng-if="insights.monitorStatus" class="list-group-item">\n              <span class="badge">{{insights.monitorStatus.activeMonitors}}</span>\n              Active Monitors\n            </li>\n          </ul>\n        </div>\n   </div>\n\n   <div role="tabpanel" id="graphs" class="tab-pane" ng-if="user.role == \'Admin\'" ng-controller="InsightsGraphController">\n     <div class="header">\n        <div class="container">\n          <div class="col-sm-7 col-md-8 col-lg-9 col-xs-12"><h3>Deep Insights (For Last {{days}} Days)</h3></div>\n          <div class="col-sm-5 col-md-4 col-lg-3 col-xs-12">\n            <div class="form-group col-xs-6">\n                <span>Days</span>\n                <aura-dropdown selected="days" items="[7,10,14]" class="pointer"></aura-dropdown>\n            </div>\n            <div class="form-group col-xs-6">\n              <button class="btn btn-primary btn-sm" ng-click="loadPracticeDeepInsights(user.org_id,days)"><strong>REFRESH</strong></button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="container">\n        <highchart class="center-block col-md-12 text-center" config="chartConfig"></highchart>\n      </div>\n  </div>\n\n   <div role="tabpanel" id="doctors" class="tab-pane" ng-if="user.role == \'Admin\'" ng-controller="InsightsUserController">\n\n    <div class="header">\n       <div class="container">\n         <div class="col-md-12 text-left"><h3>Doctors</h3></div>\n       </div>\n     </div>\n\n     <div ng-if="users" class="synsormed-list-table">\n       <div class="list-head-row">\n         <div class="container">\n           <div class="col-xs-8 col-sm-4"><strong>Name</strong></div>\n           <div class="col-xs-4 hidden-xs"><strong>Email</strong></div>\n           <div class="col-xs-4 col-sm-4 text-center"><strong>Actions</strong></div>\n         </div>\n       </div>\n       <div class="list-head-row hover-grid" ng-repeat="practiceUser in users">\n         <div class="container">\n           <div class="col-xs-8 col-sm-4">{{practiceUser.name}}</div>\n           <div class="col-xs-4 hidden-xs">{{practiceUser.email}}</div>\n           <div class="col-xs-4 col-sm-4 text-center">\n                <button class="btn btn-secondary" ng-click="getDetails(practiceUser)"><i class="fa fa-bar-chart"></i></button>\n           </div>\n         </div>\n       </div>\n     </div>\n\n      <alert type="warning" class="container no-list" ng-if="users.length == 0">There are no doctors registered with you.</alert>\n   </div>\n\n   <div role="tabpanel" id="ccm" class="tab-pane" ng-if="user.role == \'Admin\'" ng-controller="InsightsCCMController">\n     <div class="header">\n       <div class="container">\n         <div class="col-sm-7 col-md-8 col-lg-9 col-xs-12"><h3>Chronic Care Management (For Last {{days}} Days)</h3></div>\n         <div class="col-sm-5 col-md-4 col-lg-3 col-xs-12">\n           <div class="form-group col-xs-6">\n               <span>Days</span>\n               <aura-dropdown selected="days" items="[7,15,30]" class="pointer"></aura-dropdown>\n           </div>\n           <div class="form-group col-xs-6">\n             <button class="btn btn-primary btn-sm" ng-click="getLogs(user.org_id,days)"><strong>REFRESH</strong></button>\n           </div>\n         </div>\n       </div>\n      </div>\n\n      <div ng-if="logs" class="synsormed-list-table">\n        <div class="list-head-row">\n          <div class="container">\n            <div class="col-sm-2 col-xs-3"><strong>Code</strong></div>\n            <div class="col-sm-2 col-xs-4 text-center"><strong>Doctor</strong></div>\n            <div class="col-sm-3 col-xs-3 text-center"><strong>Date</strong></div>\n            <div class="col-sm-3 col-xs-3 hidden-xs text-center"><strong>Duration</strong></div>\n            <div class="col-sm-2 col-xs-2 text-center"><strong>CCM Qualify</strong></div>\n          </div>\n        </div>\n        <div threshold safe-level="safeLevel" current-level="log.duration" class="list-head-row hover-grid" ng-repeat="log in logs">\n          <div class="container">\n            <div class="col-sm-2 col-xs-3">{{log.code}}</div>\n            <div class="col-sm-2 col-xs-4 text-center">{{log.name}}</div>\n            <div class="col-sm-3 col-xs-3 text-center">{{log.date | date:\'medium\' }}</div>\n            <div class="col-sm-3 col-xs-3 hidden-xs text-center">{{log.duration | secondsToHoursString}}</div>\n            <div class="col-sm-2 col-xs-2 text-center">\n              <span ng-if="safeLevel <= log.duration" class="fa fa-lg fa-check-circle text-success"></span>\n              <span ng-if="safeLevel > log.duration" class="fa fa-lg fa-times-circle text-danger"></span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <alert type="warning" class="container no-list"  ng-if="!logs || logs.length == 0" type="info">No CCM Logs Available</alert>\n\n   </div>\n\n   <div role="tabpanel" id="survey" class="tab-pane" ng-if="user.role == \'Admin\'" ng-controller="InsightsSurveyGraphController">\n     <div class="header">\n        <div class="container">\n          <div class="col-md-10 text-left col-xs-9"><h3>Survey Responses</h3></div>\n          <div class="col-md-2 text-right col-xs-3">\n            <div class="form-group">\n              <button class="btn btn-primary btn-sm" ng-click="loadPracticeSurveyResponse(user.org_id)"><strong>REFRESH</strong></button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="container">\n        <highchart class="center-block col-md-12 text-center" config="chartConfig"></highchart>\n      </div>\n  </div>\n\n  <div role="tabpanel" id="leaderboard" class="tab-pane" ng-if="user.role == \'Admin\'" ng-controller="InsightsLeaderboardController">\n    <div class="header">\n        <div class="container">\n            <div class="col-md-2 text-left"><h3>Leaderboard</h3></div>\n            <div class="col-md-6 text-left form-group">\n               <div ng-if="dataKeys.length" class="col-md-8 col-sm-7 col-lg-6 col-xs-12 xs-visible-block clearfix xs-mar-top-10 pad-0">\n                   <span class="hidden-xs hidden-sm small-text">Leaderboard for</span>\n                   <aura-dropdown class=\'xs-fl pointer\' selected="selected.name" items="dataKeys" key="name" item="name"></aura-dropdown>\n               </div>\n                <div class="col-md-4 col-sm-5 col-lg-6 col-xs-12 xs-visible-block clearfix xs-mar-top-10 pad-0">\n                    <span class="small-text">Records</span>\n                    <aura-dropdown selected="pagination.pageSize" items="pagination.pageSizes" class="pointer"></aura-dropdown>\n                 </div>\n            </div>\n            <div class="col-md-3 form-group"></div>\n            <div class="col-md-1 col-xs-6 text-right form-group">\n                <button class="btn btn-primary btn-sm" ng-click="getLeaderboardInsights(user.org_id)"><strong>REFRESH</strong></button>\n            </div>\n        </div>\n       <div class="container">\n           <table class="table table-striped " ng-if="currentData.length">\n               <thead>\n                   <tr>\n                       <th class="text-center">Sr. No</th>\n                       <th class="text-center">Code</th>\n                       <th class="text-center">Patient</th>\n                       <th class="text-center">Points</th>\n                   </tr>\n               </thead>\n               <tbody class="text-center">\n                   <tr ng-repeat="data in currentData">\n                       <td>{{$index + 1}}</td>\n                       <th class="text-center" scope="row">{{data.patientCode}}</th>\n                       <td>{{data.patient | defaultText:\'N/A\'}}</td>\n                       <td>{{data.points}}</td>\n                   </tr>\n               </tbody>\n           </table>\n           <alert ng-if="!currentData.length" class="container no-list" type="warning">No Records</alert>\n       </div>\n       <!--Pagination-->\n       <div ng-if="currentData.length != 0" class="container text-center">\n           <ul class="pagination" ng-if="pageCount != 1">\n               <li><span ng-click="pageTurn(-1)"><i class="fa fa-arrow-left"></i> Previous</span></li>\n               <li ng-repeat="aPage in pages" ng-class="{active: pagination.page == aPage}"><span ng-click="pageTo(aPage)">{{aPage}}</span></li>\n               <li><span ng-click="pageTurn(1)">Next <i class="fa fa-arrow-right"></i></span></li>\n           </ul>\n       </div>\n       <div ng-if="currentData.length != 0" class="container"><small>Viewing page {{pagination.page}} of {{pageCount}}</small></div>\n       <!--Pagination-->\n     </div>\n </div>\n\n</div>\n\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/forgot/forgotLink.html",'<div id="forgot-password" class="container">\n  <div class="row">\n    <div class="col-md-4 col-md-offset-4">\n      <div class="text-center"><img src="/images/logo_new1.png" /></div>\n      <h4 class="text-center">Forgot Your Password ?</h4>\n      <alert ng-repeat="alert in alerts" class="text-center" type="{{alert.type}}">{{alert.msg}}</alert>\n      <div class="panel panel-default">\n        <div class="panel-body">\n          <form name="form">\n            <div class="form-group" validate>\n              <label>Email <help help-text="Enter the email that the admin uses to access the system"/></label>\n              <input class="form-control" type="email" required name="email" placeholder="Your Email Address" ng-model="email">\n            </div>\n            <div>\n              <button type="submit" class="btn btn-primary" ng-click="submit()">Send Reset Code</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/forgot/forgotSuccess.html",'<div id="forgot-password" class="container">\n  <div class="row">\n    <div class="col-md-4 col-md-offset-4">\n      <div class="text-center"><img src="/images/logo_new.png" /></div>\n      <h4 class="text-center">Password Change Success</h4>\n      <alert ng-repeat="alert in alerts" class="text-center" type="{{alert.type}}">{{alert.msg}}</alert>\n      <div class="panel panel-default">\n        <div class="panel-body">\n            <div class="text-center">\n              <button type="submit" class="btn btn-primary" ng-click="submit()">Continue To Login</button>\n            </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n');
}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/forgot/resetForm.html",'<div id="forgot-password" class="container">\n  <div class="row">\n    <div class="col-md-4 col-md-offset-4">\n      <div class="text-center"><img src="/images/logo_new.png" /></div>\n      <h4 class="text-center">Reset Your Password </h4>\n      <alert ng-repeat="alert in alerts" class="text-center" type="{{alert.type}}" >{{alert.msg}}</alert>\n      <div class="panel panel-default">\n        <div class="panel-body">\n          <form name="form">\n            <div class="form-group" validate>\n              <label>Email</label>\n              <input class="form-control" type="email" required name="email" placeholder="Enter Email Address" ng-model="data.email">\n            </div>\n            <div class="form-group" validate>\n              <label>Code</label>\n              <input class="form-control" type="text" required name="code" placeholder="Code" ng-model="data.code">\n            </div>\n            <div class="form-group" validate>\n              <label>New Password</label>\n              <input class="form-control" type="password" required name="newPassword" placeholder="Enter New Password" ng-model="data.newPassword">\n            </div>\n            <div class="form-group" validate>\n              <label>Confirm Password</label>\n              <input class="form-control" type="password" required name="confirmPassword" placeholder="Confirm Password" ng-model="data.confirmPassword">\n            </div>\n            <div>\n              <button type="submit" class="btn btn-primary" ng-click="submit()">Reset Password</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/login/login.html",'<div id="login" class="container">\n\n    <alert ng-if="alert.msg" type="{{alert.type}}">{{alert.msg}}</alert>\n    <div ng-if="showRegistrationMessage">\n        <alert type="success">\n            Registration successful! Please <a href="#/login">login now</a>.\n        </alert>\n    </div>\n\n    <div class="col-md-4 col-md-offset-4">\n      <div class="text-center"><img src="/images/logo_new1.png" style="height:100px;"/></div>\n      <div class="text-center"><h4>Welcome, Please Login</h4></div>\n      <div class="panel panel-default">\n          <div class="panel-body">\n              <form role="form" name="form">\n                  <input required type="email" class="form-control" placeholder="Enter email" ng-model="email">\n                  <div class="password-container">\n                    <input required show-password="passwordView" type="password" class="form-control" placeholder="Password" ng-model="password">\n                    <a class="password-view" ng-click="passwordView = !passwordView">\n                      <i class="fa" ng-class="passwordView ? \'fa-eye-slash\' : \'fa-eye\'" />\n                    </a>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input type="checkbox" ng-model="rememberMe"> Remember Me\n                    </label>\n                  </div>\n                  <button type="submit" class="btn btn-primary form-control" ng-click="submit()">Submit</button>\n              </form>\n              <div class="forgot-link">\n                 <div class="float-left">\n                      <a href="#/forgot">Forgot Password ?</a>\n                </div>\n                 <div class="float-right">\n                     <a href="#/emergency" class="fa fa-exclamation-triangle emergency-link" title="Emergency Access"></a>\n                </div>\n                <div class="clear"></div>\n              </div>\n              <!-- Not applicable iin this workflow 102917\n               <div class="forgot-link">\n                     <a href="#/patient">Login as Patient</a>\n               </div>\n             -->\n          </div>\n      </div>\n    </div>\n\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/organization/details.html",'<div class="modal-header">\n    <h3 class="modal-title text-center">\n        <span>Statistics : {{user.name}}</span>\n    </h3>\n</div>\n<div class="modal-body" style="position: relative" wait="waiting">\n    <ul class="list-group">\n      <li class="list-group-item">\n        <span class="badge">{{data.patients}}</span>\n        Total Patients\n      </li>\n      <li class="list-group-item">\n        <span class="badge">{{data.avg_call_time | secondsToHoursString}}</span>\n        Average Call Time\n      </li>\n      <li class="list-group-item">\n        <span class="badge">{{data.with_notes}}</span>\n        Patients with Notes\n      </li>\n      <li class="list-group-item">\n        <span class="badge">{{data.avg_wait_time | secondsToHoursString}}</span>\n        Average Wait Time\n      </li>\n    </ul>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">OK</button>\n</div>\n</script>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/organization/organization.html",'<div id="organization">\n\n  <!-- Org Header -->\n  <div class="header">\n    <div class="container">\n      <div class="col-sm-8 col-xs-12 text-left"><h3>{{org.name}}</h3></div>\n      <div class="col-sm-4 col-xs-12 form-group">\n          <div class="col-sm-6 text-left col-xs-6">\n            <div class="col-sm-6 col-xs-4">\n              <p class=\'activeLabel\'>Active</p>\n            </div>\n            <div class="col-sm-6 col-xs-4">\n              <switch id="enabled" name="enabled" ng-model="enabled" ng-change=\'changeStatus(org.id)\'></switch>\n            </div>\n          </div>\n          <!--<div class="col-md-2"></div>-->\n          <div class="col-sm-6 text-right">\n            <button class="btn btn-primary btn-sm" ng-click="getOrganizationStatistics()"><strong>REFRESH</strong></button>\n          </div>\n        </div>\n    </div>\n  </div>\n  <!-- Org Header -->\n\n  <!-- Org Base Details -->\n  <div class="container no-list">\n\n    <!-- user block -->\n        <toggle-list ng-if="org.stats" list-title="Users">\n          <li class="list-group-item">\n            <span class="badge">{{org.stats.admin + org.stats.provider}}</span>\n            All\n          </li>\n          <li class="list-group-item">\n            <span class="badge">{{org.stats.provider}}</span>\n            Providers\n          </li>\n          <li class="list-group-item">\n            <span class="badge">{{org.stats.admin}}</span>\n            Admins\n          </li>\n        </toggle-list>\n    <!-- user block -->\n\n\n    <!-- encounter block -->\n        <toggle-list ng-if="org.encounter" list-title="Encounters">\n            <li class="list-group-item">\n              <span class="badge">{{org.encounter.count}}</span>\n              All\n            </li>\n            <li class="list-group-item">\n              <span class="badge">{{org.encounter.with_oauth}}</span>\n              Linked with Services\n            </li>\n            <li class="list-group-item">\n              <span class="badge">{{org.encounter.with_notes}}</span>\n              With Notes\n            </li>\n            <li class="list-group-item">\n              <span class="badge">{{org.encounter.ccm}}</span>\n              CCM\n            </li>\n            <li class="list-group-item">\n              <span class="badge">{{org.encounter.no_activity}}</span>\n              Missed\n            </li>\n            <li class="list-group-item">\n              <span class="badge">$ {{org.encounter.avg_fee}}</span>\n              Average Fee\n            </li>\n            <li class="list-group-item">\n              <span class="badge">{{org.encounter.wait_time | secondsToHoursString}}</span>\n              Average Waiting Time\n            </li>\n          </toggle-list>\n    <!-- encounter block -->\n\n    <!-- providers drilldown block -->\n    <toggle-list ng-if="org.providers" list-title="Providers">\n      <div class="synsormed-list-table">\n        <div class="list-head-row">\n          <div class="container">\n            <div class="col-xs-6 col-sm-4"><strong>Name</strong></div>\n            <div class="hidden-xs col-sm-4"><strong>Email</strong></div>\n            <div class="col-xs-6 col-sm-4 text-center"><strong>Actions</strong></div>\n          </div>\n        </div>\n        <div class="list-head-row hover-grid" ng-repeat="provider in org.providers">\n          <div class="container">\n            <div class="col-xs-6 col-sm-4">{{provider.name}}</div>\n            <div class="hidden-xs col-sm-4">{{provider.email}}</div>\n            <div class="col-xs-6 col-sm-4 text-center">\n              <button class="btn btn-secondary" ng-click="getDetails(provider)"><i class="fa fa-bar-chart"></i></button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </toggle-list>\n    <!-- providers drilldown block -->\n\n  </div>\n  <!-- Org Base Details -->\n\n  <alert type="warning" class="container no-list" ng-if="!org">No Data Loaded.</alert>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/register/register.html",'<div id="register" class="container" ng-if="adminUser.role == \'SuperAdmin\' || adminUser.role == \'OrgCreator\'">\n  <div class="row">\n    <div class="col-md-4 col-md-offset-4">\n      <div class="text-center"><img src="/images/logo_new1.png" style="height:100px;" /></div>\n      <div class="text-center"><h4>Welcome, Organization Details</h4></div>\n      <div class="panel panel-default">\n        <div class="panel-body">\n          <form name="form" ng-if="showForm">\n            <div class="form-group" validate>\n              <label>Business Name</label>\n              <input class="form-control" required name="practiceName" placeholder="Practice Name" ng-model="practice.name">\n            </div>\n            <div class="form-group" validate>\n              <label>Administrator Name <help help-text="The name of the person responsible for billing and account administration."/></label>\n              <input required class="form-control" name="name" placeholder="First Name" ng-model="user.first_name">\n              <input required class="form-control" name="name" placeholder="Last Name" ng-model="user.last_name">\n            </div>\n            <div class="form-group" validate>\n              <label>Administrator Email Address <help help-text="The email of the person responsible for billing and account administration."/></label>\n              <input type="email" required class="form-control" placeholder="Email" name="email" ng-model="user.email">\n            </div>\n            <div class="form-group" validate>\n              <label>Password</label>\n              <input type="password" required class="form-control" placeholder="Password" ng-model="user.password" name="password" ng-pattern="/^(?=.*[A-Za-z])(?=.*\\d)(?=.*[$@$!%*#?&])[A-Za-z\\d$@$!%*#?&]{8,}$/">\n              <small ng-if="passwordPattern" style="color:#d9534f">Password must contain alteast 8 characters, one number and one special character.</small>\n            </div>\n            <div class="form-group" validate>\n              <label>Confirm Password</label>\n              <input type="password" required class="form-control" placeholder="Confirm Password" ng-model="user.confirmPassword" name="confirmPassword">\n            </div>\n          </form>\n          <div>\n            <button type="submit" class="btn btn-primary" ng-click="submit()">Register</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/patient/auth.html",'<div id="patient-auth" class="container">\n    <div class="row">\n        <div class="col-md-4 col-md-offset-4">\n            <div class="text-center"><img src="/images/logo_new1.png" /></div>\n            <h4 class="text-center">Patient login</h4>\n            <alert ng-repeat="alert in alerts" class="text-center" type="{{alert.type}}">{{alert.msg}}</alert>\n            <div class="panel panel-default">\n                <div class="panel-body">\n                    <form name="patient-form">\n                        <div class="form-group" validate>\n                            <label>Patient Code</label>\n                            <input maxlength="10" class="form-control text-uppercase" type="text" required name="patientCode" placeholder="Patient Code" ng-model="patientCode">\n                        </div>\n                        <div class="row">\n                            <div class="col-sm-4 col-xs-4">\n                                <button type="submit" class="btn btn-primary" ng-click="submit()">Submit</button>\n                            </div>\n                            <div class="col-sm-3 col-xs-3 text-center margin-top-6">\n                                <b> or </b>\n                            </div>\n                            <div class="col-sm-5 col-xs-5 margin-top-6">\n                                <a href="#/login" class="pull-right">Login as Physician</a>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/reports/reports.html",'<div id="reports">\n    <!-- Nav tabs -->\n    <!-- Top nav starts  -->\n    <nav class="navbar synsormed-navs navbar-inverse" role="tabs">\n        <div class="container">\n            <!-- Nav brand start -->\n            <div class="navbar-header col-md-2">\n                <button type="button" class="navbar-toggle" data-toggle="collapse"\n                data-target="#collspse-insight-target">\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n            </button>\n            <a class="navbar-brand" ><strong>Reports</strong></a>\n        </div>\n        <!-- Nav brand ends-->\n        <!-- Nav menu start-->\n        <ul role="tablist" id="collspse-insight-target" class="nav navbar-nav collapse navbar-collapse col-md-10">\n            <button type="button" class="navbar-toggle" data-toggle="collapse"\n            data-target="#collspse-insight-target">\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n        </button>\n        <a class="navbar-brand report-link"  href="#report-section" aria-controls="report-section" role="tab" data-toggle="tab">Reports</a>\n    </ul>\n    <!-- Nav menu ends -->\n\n    <div class="alert alert-danger col-md-offset-1 col-md-3" ng-if="licenseMsg" style="padding:8px;margin:10px 0px;float:right;">\n      <strong style="padding-left: 35px;">{{licenseMsg}}</strong>\n    </div>\n\n</div>\n</nav>\n\n<!-- Tab panes -->\n<div class="tab-content">\n    <div ng-if="user.role == \'Admin\'" id="report-section" role="tabpanel" class="tab-pane active" >\n\n        <div class="container pad-tp-35">\n            <!-- <div class="col-md-4 text-left">\n                <div class="font22">Compliance</div>\n                <div class="font13 report-desc">\n                    Shows information regarding Education sessions and Bio sessions, so that you can\n                    see the total scheduled and completed health sessions for the patient.\n                </div>\n                <div class="font13">\n                    <a href="#compliance" ng-click="loadComplianceReport()" class="non-dec" aria-controls="dashboard" role="tab" data-toggle="tab">Run</a>\n                </div>\n            </div> -->\n            <div class="col-md-6 text-left">\n                <div class="font22">RPM Report</div>\n                <div class="font13 report-desc">\n                    Download RPM Report\n                </div>\n                <div class="font13">\n                    <a ng-click="loadRPMReport()" class="non-dec" aria-controls="dashboard" role="tab" data-toggle="tab">Run</a>\n                    <!-- <a href="#summary" class="non-dec" aria-controls="summary" role="tab" data-toggle="tab">Run</a> -->\n                </div>\n            </div>\n        </div>\n\n        <div class="container pad-tp-35">\n          <div class="col-md-6 text-left">\n            <div class="font22">Billing Report</div>\n            <div class="font13 report-desc">\n              Download Billing Report\n            </div>\n            <div class="font13">\n              <a ng-click="loadBillingReport()" class="non-dec" aria-controls="dashboard" role="tab" data-toggle="tab">Run</a>\n            </div>\n          </div>\n        </div>\n\n    </div>\n\n    <div ng-if="user.role == \'Admin\'" id="compliance" role="tabpanel" class="tab-pane" ng-controller="ComplianceReportController">\n        <div class="header">\n            <div class="container">\n                <div class="col-md-2 text-left"><h3>Compliance</h3></div>\n                <div class="col-md-6 text-left form-group">\n                    <div ng-if="users.length" class="col-md-8 col-sm-7 col-lg-6 col-xs-12 xs-visible-block clearfix xs-mar-top-10 pad-0">\n                        <span class="hidden-xs hidden-sm small-text">Reports for</span>\n                        <aura-dropdown class=\'xs-fl\' selected="showUser.id" items="users" key="id" item="name"></aura-dropdown>\n                    </div>\n                    <div class="col-md-4 col-sm-5 col-lg-6 col-xs-12 xs-visible-block clearfix xs-mar-top-10 pad-0">\n                        <span class="small-text">Records</span>\n                        <aura-dropdown selected="pagination.pageSize" items="pagination.pageSizes"></aura-dropdown>\n                    </div>\n                </div>\n                <div class="col-md-3 form-group">\n                    <div class="row" ng-if="monitors.length">\n                        <div class="col-sm-6">\n                            <button class="btn btn-primary btn-sm" export-to-pdf="compliance-data" pdf-title="{{reportTitle}}"><strong>Export as PDF</strong></button>\n                        </div>\n                        <div class="col-sm-6">\n                            <button class="btn btn-primary btn-sm" export-to-csv="compliance-data"><strong>Export as CSV</strong></button>\n                        </div>\n                    </div>\n                </div>\n                <div class="col-md-1 col-xs-6 text-right form-group">\n                    <button class="btn btn-primary btn-sm" ng-click="loadComplianceReport()"><strong>REFRESH</strong></button>\n                </div>\n            </div>\n        </div>\n        <div class="container">\n            <table class="table table-striped " ng-if="monitors.length" id="compliance-data">\n                <thead>\n                    <tr>\n                        <th class="text-center" ng-click="toggleData()">{{keyOne.text}}</th>\n                        <th class="text-center"># of Scheduled EDU Sessions</th>\n                        <th class="text-center"># of Completed EDU Sessions</th>\n                        <th class="text-center">% Adherence to EDU Schedule</th>\n                        <th class="text-center"># of Scheduled BIO Sessions</th>\n                        <th class="text-center"># of Completed BIO Sessions</th>\n                        <th class="text-center">% Adherence to BIO Schedule</th>\n                    </tr>\n                </thead>\n                <tbody class="text-center">\n                    <tr ng-repeat="monitor in pagination.finalMonitors">\n                        <th scope="row">{{monitor.display | defaultText:\'N/A\'}}</th>\n                        <td>{{monitor.scheduled}}</td>\n                        <td>{{monitor.attended}}</td>\n                        <td>{{monitor.adherence}}%</td>\n                        <td>{{monitor.monitored}}</td>\n                        <td>{{monitor.activity}}</td>\n                        <td>{{monitor.utilization}}%</td>\n                    </tr>\n                </tbody>\n            </table>\n            <alert ng-if="!monitors.length" class="container no-list" type="warning">No Records</alert>\n        </div>\n        <div ng-if="pagination.finalMonitors.length != 0" class="container text-center">\n            <ul class="pagination" ng-if="pageCount != 1">\n              <li><span ng-click="pageTurn(-1)" ng-if="showPrevious"><i class="fa fa-arrow-left"></i> Previous</span></li>\n              <li ng-repeat="aPage in pages" ng-class="{active: pagination.page == aPage}"><span ng-click="pageTo(aPage)">{{aPage}}</span></li>\n              <li><span ng-click="pageTurn(1)" ng-if="showNext">Next <i class="fa fa-arrow-right"></i></span></li>\n            </ul>\n        </div>\n        <div ng-if="pagination.finalMonitors.length != 0" class="container"><small>Viewing page {{pagination.page}} of {{pageCount}}</small></div>\n    </div>\n\n    <div ng-if="user.role == \'Admin\'" id="summary" role="tabpanel" class="tab-pane" ng-controller="ReportSummaryController">\n        <div class="header">\n            <div class="container">\n                <div class="col-md-8 text-left"><h3>Patient Summaries</h3></div>\n                <div class="col-md-4 text-left form-group">\n                    <div class="search">\n                        <form ng-submit="search()">\n                          <input autofocus ng-model="keyword" type="text" class="form-control input-sm" maxlength="64" placeholder="Search patient name or code here" />\n                          <button type="submit" class="btn btn-primary btn-sm">Search</button>\n                       </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="container">\n            <div ng-if="patients && patients.length">\n                <h4>Found {{patients.length}} {{patients.length == 1 ? \'result\' : \'results\'}}</h4>\n                <table class="table table-striped table-collapse">\n                    <thead>\n                        <tr>\n                            <th class="text-left">Code</th>\n                            <th class="text-left">Patient name</th>\n                            <th class="text-left">Action</th>\n                        </tr>\n                    </thead>\n                    <tbody class="text-center">\n                        <tr ng-repeat="patient in pagination.finalPatients">\n                            <th scope="row">{{patient.patientCode | defaultText:\'N/A\'}}</th>\n                            <td class="text-left">{{patient.patientName | defaultText:\'N/A\'}}</td>\n                            <td class="text-left">\n                                <button class="btn btn-secondary btn-sm" ng-click="showSummary(patient.id)">\n                                 <i class="fa fa-eye"></i>\n                                </button>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <div ng-if="pagination.finalPatients.length" class="container text-center">\n                <ul class="pagination" ng-if="pageCount != 1">\n                    <li><span ng-click="pageTurn(-1)"><i class="fa fa-arrow-left"></i> Previous</span></li>\n                    <li ng-repeat="aPage in pages" ng-class="{active: pagination.page == aPage}"><span ng-click="pageTo(aPage)">{{aPage}}</span></li>\n                    <li><span ng-click="pageTurn(1)">Next <i class="fa fa-arrow-right"></i></span></li>\n                </ul>\n            </div>\n            <alert ng-if="!searched" class="container no-list" type="info">Please search the patient</alert>\n            <alert ng-if="searched && (!patients || !patients.length)" class="container no-list" type="warning">No Results Found</alert>\n    </div>\n    </div>\n\n</div>\n\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/settings/editPatient.html",'<div class="modal-header">\n    <h3 class="modal-title">\n        <span ng-if="patient.id">Edit Patient</span>\n        <span ng-if="!patient.id">Add Patient</span>\n    </h3>\n</div>\n<div class="modal-body" style="position: relative" wait="waiting">\n    <alert ng-if="notification" type="danger">{{notification}}</alert>\n    <form name="form">\n        <div class="form-group" validate>\n            <input name="fname" maxlength="25" placeholder="First Name" type="text" required class="form-control" ng-model="patient.firstName">\n        </div>\n        <div class="form-group" validate>\n            <input name="lname" maxlength="25" placeholder="Last Name" type="text"  required class="form-control" ng-model="patient.lastName">\n        </div>\n        <div class="form-group" validate>\n            <select name="gender" class="form-control btn-secondary" ng-model="patient.gender" ng-options="gender.value as gender.label for gender in genders"></select>\n        </div>\n        <!-- Not applicable to this workflow 102917 aholmes\n        <div class="form-group" validate>\n            <input ng-model=\'patient.notify\' type=\'checkbox\' />\n            Receive progress alerts via SMS<help help-text="Get notified via sms on your daily progress."/>\n        </div>\n    -->\n        <div class="form-group" validate>\n            <div class="row">\n                <div class="col-sm-4"><h6>DOB</h6></div>\n                <div class="col-sm-8">\n                    <span ng-combo-date-picker="exp" ng-model="patient.dob" ng-order="mdy" ng-year-order="descending"></span>\n                </div>\n            </div>\n        </div>\n        <div class="form-group" validate>\n            <input name="SSN" maxlength="9" ng-pattern="/^\\d{9}$/" placeholder="Social Security Number" type="text"  class="form-control" ng-model="patient.socialSecurityNumber" ui-mask="999-99-9999" ui-mask-placeholder ui-mask-placeholder-char="_">\n        </div>\n        <div class="form-group" validate>\n            <input name="medicalRecordNumber" maxlength="9" placeholder="Medical Record Number" type="text"  class="form-control" ng-model="patient.medicalRecordNumber">\n        </div>\n        <div class="form-group" validate>\n            <input name="address" placeholder="Address" type="text" required class="form-control" ng-model="patient.address">\n        </div>\n        <div class="form-group" validate>\n            <input name="city" placeholder="City" type="text"  class="form-control" ng-model="patient.city">\n        </div>\n        <div class="form-group" validate>\n            <input name="state" placeholder="State" type="text"  class="form-control" ng-model="patient.state">\n        </div>\n        <div class="form-group" validate>\n            <input name="zip" placeholder="Zip" type="text"  class="form-control" ng-model="patient.zip" ng-pattern="/(^\\d{5}$)|(^\\d{9}$)/" maxlength="9">\n        </div>\n        <div class="form-group" validate>\n            <input name="email" placeholder="Email" type="email" class="form-control" ng-model="patient.email">\n        </div>\n        <div class="form-group" validate>\n            <input name="phone" placeholder="Mobile Phone" required type="tel" ng-pattern="/^[0-9]{10}$/" class="form-control" ng-model="patient.mobileNumber" maxlength="10" ui-mask="(999) 999-9999" ui-mask-placeholder ui-mask-placeholder-char="_" >\n        </div>\n        <div class="form-group" validate>\n            <h5>Assigned Provider</h5>\n            <select name="forUser" required class="form-control btn-secondary" ng-model="patient.userId" ng-options="user.id as user.name for user in users"></select>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">OK</button>\n    <button class="btn btn-default" ng-click="cancel()">Cancel</button>\n</div>\n</script>\n<style>\n    .modal-dialog {\n        width: 400px;\n    }\n</style>')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/settings/editQuestion.html",'<div class="modal-header">\n    <h3 class="modal-title">\n        <span ng-if="question.id">Edit Question #{{questionIndex}} </span>\n        <span ng-if="!question.id">Add Question</span>\n    </h3>\n</div>\n<div class="modal-body" style="position: relative" wait="waiting">\n    <form name="form">\n        <div class="form-group" validate>\n            <textarea name="question" placeholder="Question" required class="form-control" ng-model="question.text">{{question.text}}\n            </textarea>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">OK</button>\n    <button class="btn btn-default" ng-click="cancel()">Cancel</button>\n</div>\n</script>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/settings/editUser.html",'<div class="modal-header">\n    <h3 class="modal-title">\n        <span ng-if="user.id">Edit User</span>\n        <span ng-if="!user.id">Add User</span>\n    </h3>\n</div>\n<div class="modal-body" style="position: relative" wait="waiting">\n    <alert ng-if="notification" type="danger">{{notification}}</alert>\n    <form name="form">\n        <div class="form-group" validate>\n            <input name="name" placeholder="First Name" type="text" required class="form-control" ng-model="user.first_name">\n        </div>\n        <div class="form-group" validate>\n            <input name="middlename" placeholder="Middle Name" type="text" class="form-control" ng-model="user.middle_name">\n        </div>\n        <div class="form-group" validate>\n            <input name="lastname" placeholder="Last Name" type="text" required class="form-control" ng-model="user.last_name">\n        </div>\n        <div class="form-group" validate>\n            <input name="usertitle" placeholder="Title" type="text" class="form-control" ng-model="user.title">\n        </div>\n        <div class="form-group" validate>\n            <input name="email" placeholder="Email" type="email" required class="form-control" ng-model="user.email">\n        </div>\n        <div class="form-group" validate>\n            <input name="mobilephone" placeholder="Mobile Phone" type="tel" class="form-control" ng-model="user.phone_mobile">\n        </div>\n        <div class="form-group" validate>\n            <input name="workphone" placeholder="Work Phone" type="tel" class="form-control" ng-model="user.phone_work">\n        </div>\n\n        <div class="form-group" validate>\n            <input placeholder="Password" ng-disabled="currentUser.id == user.id && user.role.toLowerCase() != \'superadmin\'" name="password" type="password" ng-required="!user.id" class="form-control" ng-model="user.password">\n            <small ng-if="currentUser.id == user.id">Please use the form under \'Your account\' to change your password.</small>\n        </div>\n        <div class="form-group" validate>\n            <select placeholder="Role" ng-disabled="currentUser.id == user.id" name="role" required class="form-control" ng-model="user.role" ng-options="role.value as role.name for role in roles">\n                <option value="">Select Role</option>\n            </select>\n            <small ng-if="currentUser.id == user.id">You cannot change your own role. Another administrator account must be used for that.</small>\n        </div>\n\n        <div class="form-group" validate ng-show="currentUser.role == \'SuperAdmin\'">\n            <select placeholder="Organizations" ng-disabled="currentUser.id == user.id" name="organization"  class="form-control" ng-model="user.org_id" ng-options="org.id as org.name for org in orgs" ng-required="currentUser.role == \'SuperAdmin\'">\n                <option value="">Select Organizations</option>\n            </select>\n        </div>\n        <div class="form-group" validate>\n            <input type="checkbox" name="reminder" value="1" ng-model="user.is_reminder"> Get reminder email\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">OK</button>\n    <button class="btn btn-default" ng-click="cancel()">Cancel</button>\n</div>\n</script>\n');
}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/settings/insights.html",'<div id="admin-insights">\n\n  <!-- Nav tabs -->\n  <!-- Top nav starts  -->\n  <nav class="navbar synsormed-navs navbar-inverse" role="tabs">\n      <div class="container">\n        <!-- Nav brand start -->\n        <div class="navbar-header col-md-2">\n          <button type="button" class="navbar-toggle" data-toggle="collapse"\n           data-target="#collspse-insight-target">\n             <span class="icon-bar"></span>\n             <span class="icon-bar"></span>\n             <span class="icon-bar"></span>\n          </button>\n           <a class="navbar-brand" ><strong>Insights</strong></a>\n        </div>\n        <!-- Nav brand ends-->\n\n        <!-- Nav menu start-->\n        <ul role="tablist" id="collspse-insight-target" class="nav navbar-nav collapse navbar-collapse col-md-10">\n          <li role="presentation" ng-if="user.role == \'SuperAdmin\'" class="active"><a href="#dashboard" aria-controls="dashboard" role="tab" data-toggle="tab">Global</a></li>\n          <li role="presentation" ng-if="user.role == \'SuperAdmin\'" ng-click="loadAdminUsers()"><a href="#adminlist" aria-controls="adminlist" role="tab" data-toggle="tab">Admins</a></li>\n          <li role="presentation" ng-if="user.role == \'SuperAdmin\'" ng-click="loadOrganizations()"><a href="#organization" aria-controls="organization" role="tab" data-toggle="tab">Organizations</a></li>\n        </ul>\n        <!-- Nav menu ends -->\n\n      </div>\n  </nav>\n\n <!-- Tab panes -->\n   <div class="tab-content">\n\n     <div role="tabpanel" class="tab-pane active" ng-if="user.role == \'SuperAdmin\'" id="dashboard" ng-controller="AdminInsightsDashboardController">\n        <div class="header">\n          <div class="container">\n            <div class="col-md-10 col-xs-6 text-left"><h3>Global Insights</h3></div>\n            <div class="col-md-2 col-xs-6 text-right form-group">\n               <button class="btn btn-primary btn-sm" ng-click="getGlobalStatistics()"><strong>REFRESH</strong></button>\n            </div>\n          </div>\n        </div>\n         <alert class="no-list container" ng-if="!insights" type="warning">\n           No Insights Available\n         </alert>\n\n         <div class="container no-list">\n         <ul ng-if="insights" class="list-group">\n           <li class="list-group-item">\n             <span class="badge">{{insights.organizations}}</span>\n             Organizations\n           </li>\n           <li class="list-group-item">\n             <span class="badge">{{insights.users}}</span>\n             Users\n           </li>\n           <li class="list-group-item">\n             <span class="badge">{{insights.providers}}</span>\n             Doctors\n           </li>\n           <li class="list-group-item">\n             <span class="badge">{{insights.admins}}</span>\n             Admins\n           </li>\n           <li class="list-group-item">\n             <span class="badge">{{insights.superAdmins}}</span>\n             Super Admins\n           </li>\n         </ul>\n       </div>\n     </div>\n\n     <div role="tabpanel" class="tab-pane" ng-if="user.role == \'SuperAdmin\'" id="adminlist" ng-controller="AdminInsightsAdminlistController">\n       <div class="header">\n          <div class="container">\n            <div class="col-md-10 col-xs-6 text-left"><h3>Admins</h3></div>\n            <div class="col-md-2 col-xs-6 text-right form-group">\n               <button class="btn btn-primary btn-sm" ng-click="getAdminUsers()"><strong>REFRESH</strong></button>\n            </div>\n          </div>\n        </div>\n        <div ng-if="admins" class="synsormed-list-table">\n          <div class="list-head-row">\n            <div class="container">\n              <div class="col-xs-3"><strong>Name</strong></div>\n              <div class="col-xs-3"><strong>Email</strong></div>\n              <div class="col-xs-3"><strong>Organization</strong></div>\n              <div class="col-xs-3"><strong>Actions</strong></div>\n            </div>\n          </div>\n          <div class="list-head-row hover-grid" ng-repeat="admin in admins | orderBy:\'-org_id\'">\n            <div class="container">\n              <div class="col-xs-3">{{admin.name}}</div>\n              <div class="col-xs-3">{{admin.email}}</div>\n              <div class="col-xs-3">{{getOrganizationById(admin.org_id).name}}</div>\n              <div class="col-xs-3">\n                  <button class="btn btn-secondary fa fa-sign-in" ng-click="loginAsAdmin(admin)" title="Login">\n                  </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n         <alert type="warning" class="container no-list" ng-if="admins.length == 0">No Admins Loaded.</alert>\n\n     </div>\n\n     <div role="tabpanel" class="tab-pane" ng-if="user.role == \'SuperAdmin\'" id="organization" ng-controller="AdminInsightsOrganizationController">\n       <div class="header">\n          <div class="container">\n            <div class="col-md-10 col-xs-6 text-left"><h3>Organizations</h3></div>\n            <div class="col-md-2 col-xs-6 text-right form-group">\n                <a class="btn btn-primary btn-sm" href="#/register"><strong>ADD</strong></a>\n               <button class="btn btn-primary btn-sm" ng-click="getAllOrganizations()"><strong>REFRESH</strong></button>\n            </div>\n          </div>\n        </div>\n\n        <div ng-if="orgs" class="synsormed-list-table">\n          <div class="list-head-row">\n            <div class="container">\n              <div class="col-xs-4"><strong>Name</strong></div>\n              <div class="col-xs-4 text-center"><strong>Active</strong></div>\n              <div class="col-xs-4 text-center"><strong>Actions</strong></div>\n            </div>\n          </div>\n          <div class="list-head-row hover-grid" ng-repeat="org in orgs">\n            <div class="container">\n              <div class="col-xs-4">{{org.name}}</div>\n              <div ng-show=\'org.is_active\' class="col-xs-4 text-center"><span class=\'fa fa-lg fa-check-circle text-success\'></span></div>\n              <div ng-show=\'!org.is_active\' class="col-xs-4 text-center"><span class=\'fa fa-lg fa fa-times-circle text-danger\'></span></div>\n              <div class="col-xs-4 text-center">\n                   <button class="btn btn-secondary" ng-click="getDetails(org)"><i class="fa fa-bar-chart"></i></button>\n                   <button class="btn btn-secondary" ng-click="license(org)">Add License</button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n\n         <alert type="warning" class="container no-list" ng-if="orgs.length == 0">No Organizations Loaded.</alert>\n\n     </div>\n\n  </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/settings/settings.html",'<div id="settings">\n\n  <!-- Nav tabs -->\n  <!-- Top nav starts  -->\n  <nav class="navbar synsormed-navs navbar-inverse" role="tabs">\n    <div class="container">\n      <!-- Nav brand start -->\n      <div class="navbar-header col-md-2">\n        <button type="button" class="navbar-toggle" data-toggle="collapse"\n        data-target="#collspse-settings-target">\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </button>\n      <a class="navbar-brand" ><strong>Settings</strong></a>\n    </div>\n    <!-- Nav brand ends-->\n\n    <!-- Nav menu start-->\n    <ul id="collspse-settings-target" role="tablist" class="nav navbar-nav collapse navbar-collapse col-md-10">\n      <li role="presentation" class="active"><a href="#settingaccount" aria-controls="home" role="tab" data-toggle="tab">Your Account</a></li>\n      <!-- Not applicable to this workflow 102917 aholmes\n      <li role="presentation" ng-if="user.role == \'Admin\'"><a href="#survey" aria-controls="profile" role="tab" data-toggle="tab">Survey Questions</a></li>\n    -->\n      <li role="presentation" ng-if="user.role == \'Admin\'"><a href="#practice" aria-controls="practice" role="tab" data-toggle="tab">Org Details</a></li>\n      <li role="presentation" ng-if="user.role == \'Admin\'"><a href="#users" aria-controls="users" role="tab" data-toggle="tab">Users</a></li>\n      <li role="presentation"><a href="#patients" aria-controls="patients" role="tab" data-toggle="tab" ng-click="loadPatients()">Patients</a></li>\n    </ul>\n    <!-- Nav menu ends -->\n\n    <div class="alert alert-danger col-md-offset-1 col-md-3" ng-if="licenseMsg" style="padding:8px;margin:10px 0px;float:right;">\n      <strong style="padding-left: 35px;">{{licenseMsg}}</strong>\n    </div>\n\n  </div>\n</nav>\n\n<!-- Tab panes -->\n<div class="tab-content">\n\n  <div role="tabpanel" class="tab-pane active" id="settingaccount" ng-controller="SettingsAccountController">\n    <div class="header">\n      <div class="container">\n        <div class="col-md-12"><h3 class="form-group">Your Account</h3></div>\n      </div>\n    </div>\n    <form class="container" name="form">\n      <div class="container">\n        <div class="row">\n          <div class=\'col-md-12\'>\n            <div class="form-group" validate>\n              <label>Email</label>\n              <input name="email" type="email" required class="form-control" ng-model="user.email" ng-disabled="user.role != \'Admin\'">\n              <small ng-if="user.role != \'Admin\'">Contact your administrator to change your email</small>\n            </div>\n          </div>\n        </div>\n        <div class="row">\n          <div class=\'col-md-6 col-xs-12\'>\n            <h4>Change password</h4>\n            <div class="form-group" validate>\n              <label>Password</label>\n              <input type="password" name="password" class="form-control" ng-model="user.password">\n            </div>\n            <div class="form-group" validate>\n              <label>Confirm Password</label>\n              <input type="password" name="confirmPassword" class="form-control" ng-model="user.confirmPassword">\n            </div>\n          </div><!--\n          <div class=\'col-md-6 col-xs-12\'>\n            <h4>Contact details</h4>\n            <div class="form-group" validate>\n              <label>Contact Number</label>\n              <input type="text" maxlength="10" minlength="10" name="phone_mobile" class="form-control" ng-model="user.phone_mobile" />\n            </div>\n            <div class="form-group" validate>\n              <label>Service Provider</label>\n              <select name=\'network_id\' class="form-control" ng-model=\'user.network_id\'>\n                <option value=\'{{val.id}}\' ng-selected = \'val.id == user.network_id\' ng-repeat=\'val in providers\'>{{val.name}}</option>\n              </select>\n            </div>\n          </div>-->\n        </div>\n        <div class="row">\n          <div class=\'col-md-1\'>\n            <button class="btn btn-primary btn-sm" ng-click="save(form)"><strong>SAVE</strong></button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n  <div role="tabpanel" class="tab-pane" id="survey" ng-controller="SettingsSurveyController">\n    <div class="header">\n      <div class="container">\n        <div class="col-md-8 col-sm-7 col-lg-9 col-xs-12"><h3>Survey Questions</h3></div>\n        <div class="col-md-4 col-sm-5 col-lg-3 col-xs-12">\n          <div class="form-group">\n            <button class="btn btn-secondary btn-sm" ng-click="addEmptyQuestion()"><strong>ADD A SURVEY QUESTION</strong></button>\n            <button class="btn btn-primary btn-sm" ng-click="save()"><strong>SAVE</strong></button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <alert class="container no-list" ng-if="surveyQuestions.length == 0" type="warning">You have no survey questions</alert>\n    <div class="synsormed-list-table container" ng-if="surveyQuestions.length !== 0">\n      <div class="hidden-xs list-head-row row">\n        <div class="col-sm-2"><strong>Question #</strong></div>\n        <div class="col-sm-8"><strong>Question Text</strong></div>\n        <div class="col-sm-2 text-center"><strong>Actions</strong></div>\n      </div>\n      <div class="list-head-row hover-grid row" ng-repeat="surveyQuestion in surveyQuestions">\n        <div class="col-sm-2">Question #{{$index + 1}}</div>\n        <div class="col-sm-8 overflow-wrap">\n          {{surveyQuestion.text}}\n        </div>\n        <div class="col-sm-2 text-center">\n          <button class="btn btn-secondary" ng-click="editQuestion(surveyQuestion,$index + 1)"><i class="fa fa-edit"></i></button>\n          <button class="btn btn-secondary" ng-click="removeQuestion($index)"><i class="fa fa-trash"></i></button>\n        </div>\n      </div>\n    </div>\n    <div class="container">\n      <small>\n        Changes to survey questions will not affect any patients already in the system. Question will be answered with a \'yes\' (positive response) or \'no\' (negative response).\n      </small>\n    </div>\n  </div>\n\n  <div role="tabpanel" class="tab-pane" id="practice" ng-controller="SettingsPracticeInformation">\n    <div class="header">\n      <div class="container">\n        <div class="col-md-12"><h3 class="form-group">Organization Details</h3></div>\n      </div>\n    </div>\n    <form class="container" name="form">\n      <!-- Not applicable to this workflow 102917 aholmes\n      <div class="form-group" validate>\n        <label>Default Fee</label>\n        <div class="input-group">\n          <div class="input-group-addon btn-secondary"><strong>$</strong></div>\n          <input required class="border-secondary form-control" type="number" ng-model="practice.defaultFee">\n        </div>\n      </div>\n    -->\n      <div class="form-group" validate>\n        <label>Organization Name</label>\n        <input required class="form-control" ng-model="practice.name">\n      </div>\n      <div class="form-group" validate>\n          <label>Organization Emails <help help-text="Maximum of 5 Emails that will receive care alerts for the organization."/></label>\n          <br />\n          <input required ng-model="practice.orgEmails" tags-input type=\'text\' name=\'orgEmails\' class="form-control" />\n          <br />\n      </div>\n      <div class="form-group" validate>\n              <br />\n              <label>Emergency Access Token <help help-text="Use this code to login as admin using Emergency Access"/></label>\n              <br />\n          <div class="form-control otp-code-area">\n              <div ng-if="!otpCode">\n                  <a href="javascript:void(0)" ng-click="getOtp()">Show organization OTP</a>\n              </div>\n              <div ng-if="otpCode">\n                  <span class="otp-clr-code"> {{otpCode}} </span>\n                   <a  href="javascript:void(0)" ng-click="removeOtp()">Hide OTP</a>\n              </div>\n          </div>\n      </div>\n      <!-- Not applicable to this workflow 102917 aholmes\n      <div class="form-group" validate>\n          <label>\n              <input ng-model="practice.isLeaderboardActive" type="checkbox"> Enable Leaderboard\n          </label>\n          <help help-text="Enable leaderboard for the organization."/>\n      </div>\n    -->\n      <div>\n        <button class="btn btn-primary btn-sm" ng-click="save()"><strong>SAVE</strong></button>\n      </div>\n    </form>\n  </div>\n\n  <div role="tabpanel" class="tab-pane " id="users" ng-controller="SettingsUsersController">\n    <div class="header">\n      <div class="container">\n        <div class="col-xs-4 col-sm-2"><h3>Users</h3></div>\n        <div class="col-xs-2 col-sm-7 navmargin">\n            <aura-dropdown class=\'xs-fr pointer\' selected="deleteduser.id" items="deletedusers" key="id" item="name"></aura-dropdown>\n        </div>\n        <div class="col-xs-4 col-sm-1" style="margin-right:10px">\n          <div class="form-group">\n            <button class="btn btn-primary btn-sm" ng-click="addUser()"><strong>ADD A USER</strong></button>\n          </div>\n        </div>\n        <div class="col-xs-4 col-sm-1">\n          <div class="form-group">\n            <button class="btn btn-primary btn-sm" ng-click="refreshUserList()"><strong>REFRESH LIST</strong></button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="synsormed-list-table">\n      <div class="list-head-row" ng-if="users.length && users.length">\n        <div class="container">\n          <div class="col-sm-3 col-xs-4"><strong>Name</strong></div>\n          <div class="col-sm-3 hidden-xs"><strong>Email</strong></div>\n          <div class="col-sm-3 col-xs-4 text-center"><strong>Role</strong></div>\n          <div class="col-sm-3 col-xs-4 text-center"><strong>Actions</strong></div>\n        </div>\n      </div>\n      <div class="list-head-row hover-grid" ng-repeat="practiceUser in users">\n        <div class="container">\n          <div class="col-sm-3 col-xs-4">{{practiceUser.name}}</div>\n          <div class="col-sm-3 hidden-xs">{{practiceUser.email}}</div>\n          <div class="col-sm-3 col-xs-4 text-center">{{practiceUser.role}}</div>\n          <div class="col-sm-3 col-xs-4 text-center" ng-if="!practiceUser.deleted_at">\n            <button class="btn btn-secondary" ng-click="editUser(practiceUser)"><i class="fa fa-edit"></i></button>\n            <button class="btn btn-secondary" ng-if="practiceUser.id != user.id" ng-click="deleteUser(practiceUser)"><i class="fa fa-trash"></i></button>\n          </div>\n          <div class="col-sm-3 col-xs-4 text-center" ng-if="practiceUser.deleted_at">\n            <button data-toggle="dropdown" class="dropdown-toggle btn btn-secondary btn-sm btn-options">\n                <i class="fa fa-ellipsis-v" aria-hidden="true"></i>\n            </button>\n            <ul class="dropdown-menu font-15" role="menu">\n                <li ng-click="resetUser(practiceUser.id)">\n                    <a class="pointer">\n                       <i class="text-center width25 text-secondary fa fa-cloud-upload"></i>\n                       <span> Reset User </span>\n                    </a>\n                </li>\n                <li ng-click="permanentDeleteUser(practiceUser.id)">\n                    <a class="pointer">\n                       <i class="text-center width25 text-secondary fa fa-trash"></i>\n                       <span>Permanent Delete User</span>\n                    </a>\n                </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n    <alert ng-if="!users.length" class="container no-list" type="info">{{messageAlert.noUsers}}</alert>\n    <div  ng-if="users.length && pageCount>1" class="container text-center">\n      <ul class="pagination" >\n          <li><span ng-hide=\'pagination.page == 1\' ng-click="pageTurn(-1)"><i class="fa fa-arrow-left"></i> Previous</span></li>\n          <li ng-repeat="page in pages" ng-class="{active: pagination.page == page}" ng-init="pageTo(1)"><span ng-click="pageTo(page)">{{page}}</span></li>\n          <li><span ng-hide=\'pagination.page == pageCount\' ng-click="pageTurn(1)">Next <i class="fa fa-arrow-right"></i></span></li>\n      </ul>\n    </div>\n  </div>\n\n  <div role="tabpanel" class="tab-pane " id="patients" ng-controller="SettingsPatientController">\n    <div class="header" ng-if="users.length">\n      <div class="container">\n          <div class="xs-visible-block col-sm-2  clearfix"><h3>Patients</h3></div>\n          <div class="xs-visible-block col-sm-10  clearfix patient-filter">\n                <div class="col-md-2 col-sm-2 col-lg-3 col-xs-2 xs-visible-block clearfix xs-mar-top-10 pad-0">\n                    <span class="hidden-xs hidden-sm small-text">Patients for</span>\n                    <aura-dropdown class=\'xs-fl pointer\' selected="showUser.id" items="users" key="id" item="name"></aura-dropdown>\n                </div>\n                <div class="col-xs-2 col-sm-2 col-lg-2">\n                  <aura-dropdown class=\'xs-fr pointer\' selected="deletedPatient.id" items="deletedPatients" key="id" item="name"></aura-dropdown>\n                </div>\n                <div class="col-md-4 col-sm-5 col-lg-4 col-xs-12 xs-visible-block clearfix xs-mar-top-10 pad-0">\n                    <div class="xs-fl col-lg-6 col-sm-5 col-xs-5 pad-0">\n                       <span>\n                           <span class="hidden-xs hidden-sm small-text">Records</span>\n                           <aura-dropdown selected="pagination.pageSize" items="pagination.pageSizes" class="pointer"></aura-dropdown>\n                           <span class="visible-xs-inline small-text">Records</span>\n                       </span>\n                   </div>\n                   <div class="col-lg-6 col-sm-6 col-xs-4 xs-fr pad-0">\n                       <input class=\'mar-left-10 form-control\' type=\'text\' placeholder="Search" ng-model=\'pagination.searchBox\' />\n                   </div>\n               </div>\n                <div class="col-md-2 col-sm-2 col-lg-2 col-xs-12 xs-visible-block clearfix xs-mar-top-10 pad-0">\n                  <button data-toggle="dropdown" class="dropdown-toggle btn btn-secondary btn-sm btn-options">\n                      Add Patient\n                  </button>\n                  <ul class="dropdown-menu font-15" role="menu">\n                      <li ng-click="addPatient()">\n                           <a class="pointer">\n                              <span> Add a Patient </span>\n                           </a>\n                      </li>\n                      <li ng-click="uploadFile()">\n                           <a class="pointer">\n                              <span> Upload Patients </span>\n                           </a>\n                      </li>\n                  </ul>\n               </div>\n               <div class="col-md-2 col-sm-2 col-lg-1 col-xs-12 xs-visible-block clearfix xs-mar-top-10 pad-0">\n                 <button class="btn btn-primary btn-sm" ng-click="refreshPatientList()"><strong>REFRESH LIST</strong></button>\n               </div>\n          </div>\n      </div>\n    </div>\n    <!-- Patients -->\n    <div class="synsormed-list-table">\n      <div class="list-head-row" ng-if="patients.length && users.length">\n        <div class="container">\n          <div class="col-sm-3 col-xs-4"><strong>Name</strong></div>\n          <div class="col-sm-3 hidden-xs"><strong>Email</strong></div>\n          <div class="col-sm-2 hidden-xs"><strong>Phone</strong></div>\n          <div class="col-sm-2 col-xs-4 text-center"><strong>Address</strong></div>\n          <div class="col-sm-2 col-xs-4 text-center"><strong>Actions</strong></div>\n        </div>\n        <alert ng-if="!pagination.finalPatients.length" class="container no-list" type="warning">{{messageAlert.noSearchResults}}</alert>\n      </div>\n      <div class="list-head-row hover-grid" ng-repeat="patient in pagination.finalPatients">\n        <div class="container">\n          <div class="col-sm-3 col-xs-4">{{patient.name | defaultText:\'N/A\'}}</div>\n          <div class="col-sm-3 hidden-xs">{{patient.email | defaultText:\'N/A\'}}</div>\n          <div class="col-sm-2 hidden-xs">{{patient.mobileNumber | defaultText:\'N/A\'}}</div>\n          <div class="col-sm-2 col-xs-4 text-center">{{patient.address | defaultText:\'N/A\'}}</div>\n          <div class="col-sm-2 col-xs-4 text-center" ng-if="!patient.deletedAt">\n            <button class="btn btn-secondary" ng-click="editPatient(patient)"><i class="fa fa-edit"></i></button>\n            <button class="btn btn-secondary" ng-click="deletePatient(patient)"><i class="fa fa-trash"></i></button>\n          </div>\n          <div class="col-sm-2 col-xs-4 text-center" ng-if="patient.deletedAt">\n            <button data-toggle="dropdown" class="dropdown-toggle btn btn-secondary btn-sm btn-options">\n                <i class="fa fa-ellipsis-v" aria-hidden="true"></i>\n            </button>\n            <ul class="dropdown-menu font-15" role="menu">\n                <li ng-click="resetPatient(patient.id)">\n                    <a class="pointer">\n                       <i class="text-center width25 text-secondary fa fa-cloud-upload"></i>\n                       <span> Reset Patient </span>\n                    </a>\n                </li>\n                <li ng-click="permanentDeletePatient(patient.id)">\n                    <a class="pointer">\n                       <i class="text-center width25 text-secondary fa fa-trash"></i>\n                       <span>Permanent Delete Patient</span>\n                    </a>\n                </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n      <alert ng-if="!patients.length && users.length" class="container no-list" type="info">{{messageAlert.noPatients}}</alert>\n      <alert ng-if="!users.length" class="container no-list" type="danger">{{messageAlert.noUsers}}</alert>\n    </div>\n    <!-- Patients End Here -->\n\n    <!--Pagination-->\n    <div  class="container text-center">\n      <ul class="pagination" ng-if="pageCount && pageCount != 1">\n          <li><span ng-click="pageTurn(-1)"><i class="fa fa-arrow-left"></i> Previous</span></li>\n          <li ng-repeat="page in pages" ng-class="{active: pagination.page == page}" ng-init="pageTo(1)"><span ng-click="pageTo(page)">{{page}}</span></li>\n          <li><span ng-click="pageTurn(1)">Next <i class="fa fa-arrow-right"></i></span></li>\n      </ul>\n    </div>\n    <div ng-if="pagination.finalPatients.length" class="container"><small>Viewing page {{pagination.page}} of {{pageCount}}</small></div>\n    <!--Pagination-->\n  </div>\n\n</div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/settings/uploadPatient.html",'<div wait="waiting">\n    <div class="modal-body" style="position: relative">\n        <div class="modal-header">\n            <div class="text-center">\n                <h3>Upload File</h3>\n            </div>\n        </div>\n        <div class="modal-body" style="position: relative">\n            <form name="form" role="form">\n                <div class="form-group" validate>\n                    <input type="file" required class="form-control" file-model="myFile"/>\n                </div>\n            </form>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" ng-click="uploadFile()">Send</button>\n        <button class="btn btn-default" ng-click="cancel()">Cancel</button>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/admin/insights/insights.html",'<div id="admin-insights">\n\n  <!-- Nav tabs -->\n  <!-- Top nav starts  -->\n  <nav class="navbar synsormed-navs navbar-inverse" role="tabs">\n      <div class="container">\n        <!-- Nav brand start -->\n        <div class="navbar-header col-md-2">\n          <button type="button" class="navbar-toggle" data-toggle="collapse"\n           data-target="#collspse-insight-target">\n             <span class="icon-bar"></span>\n             <span class="icon-bar"></span>\n             <span class="icon-bar"></span>\n          </button>\n           <a class="navbar-brand" ><strong>Insights</strong></a>\n        </div>\n        <!-- Nav brand ends-->\n\n        <!-- Nav menu start-->\n        <ul role="tablist" id="collspse-insight-target" class="nav navbar-nav collapse navbar-collapse col-md-10">\n          <li role="presentation" ng-if="user.role == \'SuperAdmin\'" class="active"><a href="#dashboard" aria-controls="dashboard" role="tab" data-toggle="tab">Global</a></li>\n          <li role="presentation" ng-if="user.role == \'SuperAdmin\'" ng-click="loadAdminUsers()"><a href="#adminlist" aria-controls="adminlist" role="tab" data-toggle="tab">Admins</a></li>\n          <li role="presentation" ng-class="{\'active\': user.role == \'OrgCreator\'}" ng-if="user.role == \'SuperAdmin\' || user.role == \'OrgCreator\'" ng-click="loadOrganizations()"><a href="#organization" aria-controls="organization" role="tab" data-toggle="tab">\n            Organizations</a>\n          </li>\n          <li role="presentation" ng-class="{\'active\': user.role == \'OrgCreator\'}" ng-if="user.role == \'SuperAdmin\'" ng-click="loadOrgCreatorUsers()"><a href="#organiz" aria-controls="organization" role="tab" data-toggle="tab">\n            Organization Creator</a>\n          </li>\n        </ul>\n        <!-- Nav menu ends -->\n\n      </div>\n  </nav>\n\n <!-- Tab panes -->\n   <div class="tab-content">\n\n     <div role="tabpanel" class="tab-pane active" ng-if="user.role == \'SuperAdmin\'" id="dashboard" ng-controller="AdminInsightsDashboardController">\n        <div class="header">\n          <div class="container">\n            <div class="col-md-10 col-xs-6 text-left"><h3>Global Insights</h3></div>\n            <div class="col-md-2 col-xs-6 text-right form-group">\n               <button class="btn btn-primary btn-sm" ng-click="getGlobalStatistics()"><strong>REFRESH</strong></button>\n            </div>\n          </div>\n        </div>\n         <alert class="no-list container" ng-if="!insights" type="warning">\n           No Insights Available\n         </alert>\n\n         <div class="container no-list">\n         <ul ng-if="insights" class="list-group">\n           <li class="list-group-item">\n             <span class="badge">{{insights.organizations}}</span>\n             Organizations\n           </li>\n           <li class="list-group-item">\n             <span class="badge">{{insights.users}}</span>\n             Users\n           </li>\n           <li class="list-group-item">\n             <span class="badge">{{insights.providers}}</span>\n             Doctors\n           </li>\n           <li class="list-group-item">\n             <span class="badge">{{insights.admins}}</span>\n             Admins\n           </li>\n           <li class="list-group-item">\n             <span class="badge">{{insights.superAdmins}}</span>\n             Super Admins\n           </li>\n         </ul>\n       </div>\n     </div>\n\n     <div role="tabpanel" class="tab-pane" ng-if="user.role == \'SuperAdmin\'" id="adminlist" ng-controller="AdminInsightsAdminlistController">\n       <div class="header">\n          <div class="container">\n            <div class="col-md-10 col-xs-6 text-left"><h3>Admins</h3></div>\n            <div class="col-md-2 col-xs-6 text-right form-group">\n               <button class="btn btn-primary btn-sm" ng-click="getAdminUsers()"><strong>REFRESH</strong></button>\n            </div>\n          </div>\n        </div>\n        <div ng-if="admins" class="synsormed-list-table">\n          <div class="list-head-row">\n            <div class="container">\n              <div class="col-xs-3"><strong>Name</strong></div>\n              <div class="col-xs-3"><strong>Email</strong></div>\n              <div class="col-xs-3"><strong>Organization</strong></div>\n              <div class="col-xs-3"><strong>Actions</strong></div>\n            </div>\n          </div>\n          <div class="list-head-row hover-grid" ng-repeat="admin in admins | orderBy:\'-org_id\'">\n            <div class="container">\n              <div class="col-xs-3">{{admin.name}}</div>\n              <div class="col-xs-3">{{admin.email}}</div>\n              <div class="col-xs-3">{{getOrganizationById(admin.org_id).name}}</div>\n              <div class="col-xs-3">\n                  <button class="btn btn-secondary fa fa-sign-in" ng-click="loginAsAdmin(admin)" title="Login">\n                  </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n         <alert type="warning" class="container no-list" ng-if="admins.length == 0">No Admins Loaded.</alert>\n\n     </div>\n\n     <div role="tabpanel" class="tab-pane" ng-class="{\'active\': user.role == \'OrgCreator\'}" ng-if="user.role == \'SuperAdmin\' || user.role == \'OrgCreator\'" id="organization" ng-controller="AdminInsightsOrganizationController">\n       <div class="header">\n          <div class="container">\n            <div class="col-md-10 col-xs-6 text-left"><h3>Organizations</h3></div>\n            <div class="col-md-2 col-xs-6 text-right form-group">\n                <a class="btn btn-primary btn-sm" href="#/register"><strong>ADD</strong></a>\n               <button class="btn btn-primary btn-sm" ng-click="getAllOrganizations()"><strong>REFRESH</strong></button>\n            </div>\n          </div>\n        </div>\n\n        <div ng-if="orgs" class="synsormed-list-table">\n          <div class="list-head-row" ng-if="user.role == \'SuperAdmin\'">\n            <div class="container">\n              <div class="col-xs-4"><strong>Name</strong></div>\n              <div class="col-xs-4 text-center"><strong>Active</strong></div>\n              <div class="col-xs-4 text-center"><strong>Actions</strong></div>\n            </div>\n          </div>\n          <div class="list-head-row hover-grid" ng-repeat="org in orgs">\n            <div class="container">\n              <div class="col-xs-4">{{org.name}}</div>\n              <div ng-if="user.role == \'SuperAdmin\'" ng-show=\'org.is_active\' class="col-xs-4 text-center"><span class=\'fa fa-lg fa-check-circle text-success\'></span></div>\n              <div ng-if="user.role == \'SuperAdmin\'" ng-show=\'!org.is_active\' class="col-xs-4 text-center"><span class=\'fa fa-lg fa fa-times-circle text-danger\'></span></div>\n              <div class="col-xs-4 text-center" ng-if="user.role == \'SuperAdmin\'">\n                   <button class="btn btn-secondary" ng-click="getDetails(org)"><i class="fa fa-bar-chart"></i></button>\n                   <button class="btn btn-secondary" ng-click="license(org)">Add License</button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n\n         <alert type="warning" class="container no-list" ng-if="orgs.length == 0">No Organizations Loaded.</alert>\n\n     </div>\n     <div role="tabpanel" class="tab-pane" ng-if="user.role == \'SuperAdmin\'" id="organiz" ng-controller="AdminInsightsAdminlistController">\n       <div class="header">\n          <div class="container">\n            <div class="col-md-10 col-xs-6 text-left"><h3>Organization Creators</h3></div>\n            <div class="col-md-2 col-xs-6 text-right form-group">\n               <button class="btn btn-primary btn-sm" ng-click="EditorgCreator()"><strong>ADD</strong></button>\n                <button class="btn btn-primary btn-sm" ng-click="getOrgCreatorUsers()"><strong>REFRESH</strong></button>\n            </div>\n          </div>\n        </div>\n        <div ng-if="OrgCreators" class="synsormed-list-table">\n\n          <div class="list-head-row">\n            <div class="container">\n              <div class="col-xs-3"><strong>Name</strong></div>\n              <div class="col-xs-3"><strong>Email</strong></div>\n              <div class="col-xs-3"><strong>Organization</strong></div>\n              <div class="col-xs-3"><strong>Actions</strong></div>\n            </div>\n          </div>\n          <div class="list-head-row hover-grid" ng-repeat="OrgCreator in OrgCreators | orderBy:\'-org_id\'">\n            <div class="container">\n              <div class="col-xs-3">{{OrgCreator.name}}</div>\n              <div class="col-xs-3">{{OrgCreator.email}}</div>\n              <div class="col-xs-3">{{getOrganizationById(OrgCreator.org_id).name}}</div>\n              <div class="col-xs-3">\n                <button class="btn btn-secondary fa fa-edit" ng-click="EditorgCreator(OrgCreator)" title="Edit">\n                </button>\n                <button class="btn btn-secondary" ng-click="deleteUser(OrgCreator)" title="Delete">\n                  <i class="fa fa-trash"></i>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <alert type="warning" class="container no-list" ng-if="OrgCreators.length == 0">No OrgCreators Loaded.</alert>\n     </div>\n  </div>\n</div>\n');
}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/admin/insights/license.html",'<div wait="waiting">\n    <div class="modal-body" style="position: relative">\n        <div class="modal-header">\n            <div class="text-center">\n                <h3>License</h3>\n            </div>\n        </div>\n        <div class="modal-body" style="position: relative">\n            <form name="form">\n                <div class="form-group" validate>\n                    <input type="text" ng-model="$parent.licenseCount" required name="license" placeholder="Enter License" class="form-control" ng-pattern="/^[0-9]*$/">\n                    </textarea>\n                </div>\n            </form>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" ng-click="send()">Send</button>\n        <button class="btn btn-default" ng-click="cancel()">Cancel</button>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/ehr/graph/graph.html",'<div id=\'ehrGraph\'>\n    <div  class="modal-body" style="position: relative;" wait="waiting">\n        <div class="text-center">\n            <h3>Monitor Readings {{monitor.patientCode}}</h3>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-body">\n                <div class=\'mar-bot-15\'>\n                    <aura-dropdown selected="selected.id" items="monitorMeasurements" key="id" item="name"></aura-dropdown>\n                </div>\n                <alert ng-if="notification" type="danger">{{notification}}</alert>\n                <highchart ng-hide=\'notification\' id="monitorInsightsModal" class="center-block default-modal-width text-center" config="chartConfig"></highchart>\n            </div>\n        </div>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/ehr/monitor/monitor.html",'<div id=\'ehrMonitor\'>\n    <div class="panel panel-default mar-top-20">\n    <div class="modal-body" style="position: relative" wait="waiting">\n        <div class="text-center">\n            <h3>New Monitor</h3>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-body">\n                <form role="form" name="form">\n                    <div class="form-group" validate>\n                        <input required placeholder="Monitoring Details" name="description" class="form-control" type="text">\n                    </div>\n\n                    <div class="form-group" validate>\n                        <h5>For Provider</h5>\n                        <select name="forUser" required class="form-control btn-secondary" ng-model="useUser.id" ng-options="user.id as user.name for user in users"></select>\n                    </div>\n                    <div class="form-group" validate>\n                        <input ng-model=\'data.notify\' type=\'checkbox\' />\n                        Send Care Alerts <help help-text="Get notified via email on any out of range or missed readings."/>\n                    </div>\n\n                    <div class="form-group" ng-if="data.notify" validate>\n                        <h5>Sensitivity <help help-text="No. of consecutive missed or out of range readings before notifying"/></h5>\n                        <div range-slider min="1" max="6" model-max="data.sensitivity" pin-handle="min"></div>\n                    </div>\n                    <div class="form-group">\n                        <h5 class="pull-left">Measurements <help help-text="Choose which health indicators you want to monitor"/></h5>\n                        <button type="button" class="pull-right btn btn-secondary btn-sm" ng-click="addIndicator()"><i class="fa fa-plus"></i></button>\n                        <div class="clear"></div>\n                    </div>\n                    <indicator-list monitor-id=\'monitor.id\' measurements=\'measurements\' monitor-measurements=\'monitorMeasurements\'></indicator-list>\n                </form>\n                <small ng-if=\'!isNew\'>(Next Reading date will reset if you update the indicator)</small><br />\n                <small ng-if="monitorMeasurements.length">(* Indicator not saved yet)</small>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <button class="btn btn-primary" ng-click="ok()">Next</button>\n            <button class="btn btn-default" ng-click="ok()">Close</button>\n        </div>\n    </div>\n</div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/showCode/emailCode.html",'<div id="emailCode" class="modal-body" wait="waiting">\n    <div class="text-center">\n      <h3>Send to email</h3>\n    </div>\n    <div class="panel panel-default">\n          <div class="panel-body">\n              <form role="form" name="form">\n                <div class="form-group" validate>\n                  <label for="email">Email</label>\n                  <input required ng-model="email.data" placeholder="Email" name="email" class="form-control" type="email" />\n                </div>\n                  <small>(Enter you email to recieve code details and instruction into your mailbox)</small>\n              </form>\n          </div>\n      </div>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">Send</button>\n    <button class="btn btn-default" ng-click="cancel()">Cancel</button>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/showCode/showCode.html",'<div id="showCode">\n     <div class="header">\n         <div class="container">\n           <div class="col-md-8 col-xs-6"><h3>Patient Code</h3></div>\n           <div class="col-md-4 col-xs-6">\n             <div class="form-group text-right">\n               <button class="btn btn-primary btn-sm" ng-click="sendEmail()"><strong>EMAIL</strong></button>\n               <button class="btn btn-primary btn-sm" ng-click="printInfo()"><strong>PRINT THIS INFORMATION</strong></button>\n             </div>\n           </div>\n         </div>\n    </div>\n    <div class="container">\n        <div class="col-md-10 col-md-offset-1 code-wrap">\n            <div class="text-center"><strong>Your Code Is Below</strong></div>\n            <div class="text-center"><h1><strong>{{encounter.patientCode}}</strong></h1></div>\n            <div>\n                <div class="col-md-6">\n                    <ol>\n                        <li><strong>Download The App</strong>\n                            <ul>\n                                <li>Go to the app store on your smart phone or tablet</li>\n                                <li>Apple users will use the Apple App Store</li>\n                                <li>Android users will use Google Play</li>\n                                <li>Search for: <b>SynsorMed</b></li>\n                                <li>Download and install the free app</li>\n                            </ul>\n                        </li>\n                        <li><strong>Login</strong>\n                            <ul>\n                                <li>Use the access code above to log into the app</li>\n                            </ul>\n                        </li>\n                        <li><strong>Waiting Room</strong>\n                            <ul>\n                                <li><u>Important:</u> Keep the app open</li>\n                                <li>You will see a prompt when the provider is ready to begin</li>\n                            </ul>\n                        </li>\n                        <li><strong>Video Session</strong>\n                            <ul>\n                                <li>Proceed with the secure session with your provider</li>\n                            </ul>\n                        </li>\n                        <li><strong>Survey</strong>\n                            <ul>\n                                <li>Complete the quick survey after your session</li>\n                            </ul>\n                        </li>\n                    </ol>\n                </div>\n                <div class="col-md-6">\n                    <div class="reason-wrap">\n                        <strong>Reason For eVisit</strong>\n                        <ul>\n                            <li><p>{{encounter.reasonForVisit}}</p></li>\n                        </ul>\n                        <strong>eVisit Date</strong>\n                        <ul>\n                            <li>{{encounter.scheduledStartTime|date:\'short\'}}</li>\n                        </ul>\n                    </div>\n                    <div class="well">\n                        <strong class="warning">WARNING</strong>\n                        <ul>\n                            <li>In an emergency, DO NOT use the app! Call 911 or go to your nearest Emergency Room!</li>\n                            <li>Your access code will expire the day after your eVisit</li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/showMonitor/emailMonitor.html",'<div id="generateCode" class="modal-body" wait="waiting">\n    <div class="text-center">\n      <h3>Send to email</h3>\n    </div>\n    <div class="panel panel-default">\n          <div class="panel-body">\n              <form role="form" name="form">\n                <div class="form-group" validate>\n                  <label for="email">Email</label>\n                  <input required placeholder="Email" name="emailTo" class="form-control" type="email" ng-model="email.data">\n                </div>\n                <small>(Enter you email to recieve code details and instruction into your mailbox)</small>\n              </form>\n          </div>\n      </div>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">Send</button>\n    <button class="btn btn-default" ng-click="cancel()">Cancel</button>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/showMonitor/showMonitor.html",'<div id="showMonitor">\n     <div class="header">\n         <div class="container">\n           <div class="col-md-8 col-xs-6"><h3>Monitor Code</h3></div>\n           <div class="col-md-4 col-xs-6">\n             <div class="form-group text-right">\n               <button class="btn btn-primary btn-sm" ng-click="SendEmail()"><strong>EMAIL</strong></button>\n               <button class="btn btn-primary btn-sm" ng-click="printInfo()"><strong>PRINT THIS INFORMATION</strong></button>\n             </div>\n           </div>\n         </div>\n    </div>\n\n    <div class="container">\n        <div class="col-md-10 col-md-offset-1 code-wrap">\n            <div class="text-center"><strong>Your Code Is Below</strong></div>\n            <div class="text-center"><h1><strong>{{monitor.patientCode}}</strong></h1></div>\n            <img class="img-responsive" src="/images/download-instructions.png?v=2" />\n                <!-- <div class="col-md-6">\n                    <div class="reason-wrap">\n                        <strong>Monitor Description</strong>\n                        <ul>\n                            <li><p>{{monitor.description}}</p></li>\n                        </ul>\n                        <strong>Start Date</strong>\n                        <ul>\n                            <li>{{monitor.createdAt | date:\'short\'}}</li>\n                        </ul>\n                    </div>\n                    <div class="well">\n                        <strong class="warning">WARNING</strong>\n                        <ul>\n                            <li>In an emergency, DO NOT use the app! Call 911 or go to your nearest Emergency Room!</li>\n                        </ul>\n                    </div>\n                </div> -->\n        </div>\n        <!-- <div class="col-md-12 headings-wrap">\n            <ol>\n                <li><strong>Download The App</strong>\n                    <div class="row description-images">\n                        <div class="col-md-4 col-xs-4">\n                            <img src="/images/1_a@2x.png" />\n                        </div>\n                        <div class="col-md-4 col-xs-4">\n                            <img src="/images/1_b@2x.png" />\n                        </div>\n                        <div class="col-md-4 col-xs-4">\n                            <img src="/images/1_c@2x.png" />\n                        </div>\n                    </div>\n                </li>\n                <li><strong>Login</strong>\n                    <div class="row description-images">\n                        <div class="col-md-4 col-xs-4">\n                            <img src="/images/2_a@2x.png" />\n                        </div>\n                        <div class="col-md-4 col-xs-4">\n                            <img src="/images/2_b@2x.png" />\n                        </div>\n                        <div class="col-md-4 col-xs-4">\n                            <img src="/images/2_c@2x.png" />\n                        </div>\n                    </div>\n                </li>\n                <li><strong>CAIREview Connect</strong>\n                    <div class="row description-images">\n                        <div class="col-md-4 col-xs-4">\n                            <img src="/images/3_a@2x.png" />\n                        </div>\n                        <div class="col-md-4 col-xs-4">\n                            <img src="/images/3_b@2x.png" />\n                        </div>\n                        <div class="col-md-4 col-xs-4">\n                            <img src="/images/3_c@2x.png" />\n                        </div>\n                    </div>\n                </li>\n                <li><strong>Next Reading</strong>\n                    <div class="row description-images">\n                        <div class="col-md-4 col-xs-4">\n                            <img src="/images/4_a@2x.png" />\n                        </div>\n                        <div class="col-md-4 col-xs-4">\n                            <img src="/images/4_b@2x.png" />\n                        </div>\n                        <div class="col-md-4 col-xs-4">\n                            <img src="/images/4_c@2x.png" />\n                        </div>\n                    </div>\n                </li>\n            </ol>\n        </div> -->\n        <div class="col-md-12">\n            <div class="text-center footer"><strong>SynsorMed Support - <a href="mailto:support@synsormed.com" target="_top">support@synsormed.com</a> - 888-605-1440</strong></div>\n        </div>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/monitor/appointment.html",'<div id="setAppointment" class="modal-body" style="position: relative" wait="waiting">\n    <alert ng-if="notification" type="danger">{{notification}}</alert>\n    <div class="text-center">\n      <h3>Appointment for {{monitor.patientCode}}</h3>\n    </div>\n    <div class="panel panel-default">\n          <div class="panel-body text-center" ng-if="monitor.encounterId">\n            <h4><i class="fa fa-lg fa-check-circle text-success"></i> An eVisit is already fixed</h4>\n            <h5 class="text-center">Get more details <a ng-click="goToEncounter(monitor.encounterId)">here</a></h5>\n            <div class="text-center">\n              <button class="btn btn-primary" ng-click="resetAppointment()">Offer new eVisit Schedule</button>\n            </div>\n          </div>\n          <div class="panel-body">\n            <form role="form" name="form" ng-if="!monitor.encounterId">\n              <b>eVisits Available for Patient</b>\n              <div class="dropdown" validate>\n                <a class="dropdown-toggle" id="dropdown0" role="button" data-target="#" href="#">\n                  <div class="input-group">\n                    <input name="dropdown0" required type="text" class="form-control" ng-model="date[0]" />\n                    <span class="input-group-addon">\n                      <i class="fa fa-calendar"></i>\n                    </span>\n                  </div>\n                </a>\n                <ul class="dropdown-menu" role="menu">\n                  <datetimepicker ng-model="date[0]" datetimepicker-config="{ dropdownSelector: \'#dropdown0\' }"/>\n                </ul>\n              </div>\n              <div class="dropdown" validate>\n                <a class="dropdown-toggle" id="dropdown1" role="button" data-target="#" href="#">\n                  <div class="input-group">\n                    <input name="dropdown0" required type="text" class="form-control" ng-model="date[1]" />\n                    <span class="input-group-addon">\n                      <i class="fa fa-calendar"></i>\n                    </span>\n                  </div>\n                </a>\n                <ul class="dropdown-menu" role="menu">\n                  <datetimepicker ng-model="date[1]" datetimepicker-config="{ dropdownSelector: \'#dropdown1\' }"/>\n                </ul>\n              </div>\n              <div class="dropdown" validate>\n                <a class="dropdown-toggle" id="dropdown2" role="button" data-target="#" href="#">\n                  <div class="input-group">\n                    <input name="dropdown0" required type="text" class="form-control" ng-model="date[2]" />\n                    <span class="input-group-addon">\n                      <i class="fa fa-calendar"></i>\n                    </span>\n                  </div>\n                </a>\n                <ul class="dropdown-menu" role="menu">\n                  <datetimepicker ng-model="date[2]" datetimepicker-config="{ dropdownSelector: \'#dropdown2\' }"/>\n                </ul>\n              </div>\n              <br />\n            </form>\n            <b>Current Status</b>\n            <ul class="list-group">\n              <li class="list-group-item">Reading<span class=\'badge badge-new\' ng-repeat=\'name in monitor.measurementName track by $index\'>{{name}}</span></li>\n              <!-- <li class="list-group-item">Reading Repetition<span class="badge">{{monitorMeasurements.repeatInterval / (3600)}} Hours</span></li> -->\n              <li class="list-group-item">Missed<span class="badge">{{monitor.isMissed ? \'Yes\' : \'No\'}}</span></li>\n              <li class="list-group-item">Abnormal Reading<span class="badge">{{monitor.isOutofBound ? \'Yes\' : \'No\'}}</span></li>\n            </ul>\n          </div>\n      </div>\n\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-if="!monitor.encounterId" ng-click="ok()">OK</button>\n    <button class="btn btn-default" ng-click="cancel()">Cancel</button>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/monitor/editMonitor.html",'<div id="generateMonitor" class="modal-body" style="position: relative" wait="waiting">\n    <div class="text-center">\n      <h3 ng-if="!isNew">Link Monitor {{monitor.patientCode}}</h3>\n      <h3 ng-if="isNew">New Monitor</h3>\n    </div>\n    <div class="panel panel-default">\n          <div class="panel-body">\n              <form role="form" name="form">\n                <!-- Not applicable to this workflow 102917 aholmes\n                <div class="form-group" validate>\n                 <input required placeholder="Monitoring Details" name="description" class="form-control" type="text" ng-model="data.description">\n                </div>\n            -->\n\n                <div class="form-group" ng-if="!profileType">\n                    <h5>For Provider</h5>\n                    <!-- <select name="forUser" required class="form-control btn-secondary" ng-model="useUser.id" ng-options="user.id as user.name for user in users"></select> -->\n                    <multiple-autocomplete ng-model="data.selectedList" object-property="name" suggestions-arr="providers" name="forUser" required="true" after-select-item="afterSelectItem"></multiple-autocomplete>\n                </div>\n                <div class="form-group" ng-if="profileType">\n                    <h5>Care Coordinator</h5>\n                    <select name="forUser" required class="form-control border-secondary" ng-model="useUser.id" ng-options="user.id as user.name for user in users"></select>\n                </div>\n\n                <div class="form-group" validate>\n                    <h5 ng-if="profileType">Date Added</h5>\n                    <div class="input-group">\n                        <input name="startDate" placeholder="Start Date" type="text" class="border-secondary form-control"\n                        ng-click="datePicker.opened=true" datepicker-options="{showWeeks:false}"\n                        datepicker-popup="shortDate" ng-model="data.startDate" is-open="datePicker.opened"\n                        close-text="Close" show-button-bar="true" />\n                        <div class="input-group-btn">\n                            <button type="button" class="btn btn-secondary" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group" validate>\n                    <h5 class="pull-left" ng-if="!profileType">For Patient</h5>\n                    <h5 class="pull-left" ng-if="profileType">Patient Name</h5>\n                    <button title=\'Add Patient\' type="button" class="pull-right btn btn-secondary btn-sm" ng-click="createPatient()"><i class="fa fa-plus"></i></button>\n                    <div class="clear"></div>\n                    <ui-select input-id="forPatient" ng-model="data.patientId" theme="bootstrap" title="Choose a person">\n                        <ui-select-match placeholder="Enter patient name...">{{$select.selected.name}}</ui-select-match>\n                        <ui-select-choices repeat="patient.id as patient in patients | propsFilter: {name: $select.search}">\n                            <div ng-bind-html="patient.name | highlight: $select.search"></div>\n                        </ui-select-choices>\n                    </ui-select>\n                </div>\n                <div class="form-group" validate >\n                    <input ng-model=\'data.notify\' type=\'checkbox\' />\n                    Send Care Alerts <help help-text="Get notified via email on any missed data submissions."/>\n                </div>\n                <div class="clear"></div>\n                <!-- This checkbox is not functional. Created for illustration purposes only. -->\n                <div class="form-group">\n                    <input type=\'checkbox\' ng-model=\'data.educationChecked\' />\n                    Education <help help-text="Send an health education piece to patient."/>\n                </div>\n                <div class="clear"></div>\n                <div class="form-group" validate >\n                    <input ng-model=\'data.medication\' type=\'checkbox\' />\n                    Medication Reminders <help help-text="Get notified on medication reminder."/>\n                </div>\n\n                <!-- <div class="form-group" validate ng-if="profileType">\n                    Set Care Alerts <help help-text="Get notified via email on any missed data submissions."/>\n                    <input name="careAlerts" placeholder="Enter patient Caregiver email address here" type="text" class="border-secondary form-control">\n                </div> -->\n\n<!--                 <div class="form-group" ng-if="data.notify && !profileType" validate>\n                    <h5>Number of Occurrences <help help-text="No. of consecutive missed data submissions before notifying"/></h5>\n                    <div range-slider min="1" max="6" model-max="data.sensitivity" pin-handle="min"></div>\n                </div>\n                <div class="form-group" ng-if="data.notify && profileType" validate>\n                    <h5>Number of Occurrences <help help-text="No. of consecutive missed data submissions before notifying"/></h5>\n                    <select name="occurences" required class="border-secondary form-control" placeholder="Enter patient Caregiver occurences here" ng-model="data.patientId" ng-options="occurence.id for occurence in occurences"></select>\n                </div> -->\n\n\n                <div class="form-group" ng-if="data.notify" validate>\n                    <h5>Reporting Emails <help help-text="The email ids where we will send notifications"/></h5>\n                    <input ng-model="data.reportingEmails" tags-input type=\'text\' name=\'emails\' class="form-control" placeholder="Email Details" />\n                </div>\n\n                <div class="form-group" ng-if="data.medication" validate>\n                    <select name="medicationReminder" required class="form-control btn-secondary" ng-model="data.medicationReminder" ng-options="interval.id as interval.name for interval in monitoringIntervals"></select>\n                </div>\n\n                <div class="form-group">\n                    <h5 class="pull-left">Measurements <help help-text="Choose which health indicators you want to monitor"/></h5>\n                    <button title=\'Add indicator\' type="button" class="pull-right btn btn-secondary btn-sm" ng-click="addIndicator()"><i class="fa fa-plus"></i></button>\n                    <div class="clear"></div>\n                </div>\n                <indicator-list monitor-id=\'monitor.id\' measurements=\'measurements\'\n                 monitor-measurements=\'monitorMeasurements\' diseases=\'diseases\'\n                 leaderboard="monitor ? monitor.isLeaderboardActive : false"\n                 status-survey="statusSurvey">\n                </indicator-list>\n                <div class="clear"></div>\n\n                <!-- <div class="form-group" ng-if="profileType" validate>\n                    <h5>Default Settings <help help-text="Google Fit Pedometer"/></h5>\n                    <div class="input-group">\n                        <input name=\'pedometer\' placeholder="Google Fit Pefdometer" type="text" class="border-secondary form-control" ng-model="data.pedometer" />\n                        <div class="input-group-btn">\n                            <button type="button" class="btn btn-secondary"><i class="glyphicon glyphicon-trash"></i></button>\n                        </div>\n                    </div>\n                </div> -->\n            </form>\n            <small ng-if=\'!isNew\'>(Next Reading date will reset if you update the indicator)</small><br />\n            <small ng-if="monitorMeasurements.length">(* Indicator not saved yet)</small>\n          </div>\n      </div>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">{{getStateText()}}</button>\n    <button class="btn btn-default" ng-click="cancel()">Cancel</button>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/monitor/insights.html",'<div id="admin-insights">\n\n  <!-- Nav tabs -->\n  <!-- Top nav starts  -->\n  <nav class="navbar synsormed-navs navbar-inverse" role="tabs">\n      <div class="container">\n        <!-- Nav brand start -->\n        <div class="navbar-header col-md-2">\n          <button type="button" class="navbar-toggle" data-toggle="collapse"\n           data-target="#collspse-insight-target">\n             <span class="icon-bar"></span>\n             <span class="icon-bar"></span>\n             <span class="icon-bar"></span>\n          </button>\n           <a class="navbar-brand" ><strong>Insights</strong></a>\n        </div>\n        <!-- Nav brand ends-->\n\n        <!-- Nav menu start-->\n        <ul role="tablist" id="collspse-insight-target" class="nav navbar-nav collapse navbar-collapse col-md-10">\n          <li role="presentation" ng-if="user.role == \'SuperAdmin\'" class="active"><a href="#dashboard" aria-controls="dashboard" role="tab" data-toggle="tab">Global</a></li>\n          <li role="presentation" ng-if="user.role == \'SuperAdmin\'" ng-click="loadAdminUsers()"><a href="#adminlist" aria-controls="adminlist" role="tab" data-toggle="tab">Admins</a></li>\n          <li role="presentation" ng-if="user.role == \'SuperAdmin\'" ng-click="loadOrganizations()"><a href="#organization" aria-controls="organization" role="tab" data-toggle="tab">Organizations</a></li>\n        </ul>\n        <!-- Nav menu ends -->\n\n      </div>\n  </nav>\n\n <!-- Tab panes -->\n   <div class="tab-content">\n\n     <div role="tabpanel" class="tab-pane active" ng-if="user.role == \'SuperAdmin\'" id="dashboard" ng-controller="AdminInsightsDashboardController">\n        <div class="header">\n          <div class="container">\n            <div class="col-md-10 col-xs-6 text-left"><h3>Global Insights</h3></div>\n            <div class="col-md-2 col-xs-6 text-right form-group">\n               <button class="btn btn-primary btn-sm" ng-click="getGlobalStatistics()"><strong>REFRESH</strong></button>\n            </div>\n          </div>\n        </div>\n         <alert class="no-list container" ng-if="!insights" type="warning">\n           No Insights Available\n         </alert>\n\n         <div class="container no-list">\n         <ul ng-if="insights" class="list-group">\n           <li class="list-group-item">\n             <span class="badge">{{insights.organizations}}</span>\n             Organizations\n           </li>\n           <li class="list-group-item">\n             <span class="badge">{{insights.users}}</span>\n             Users\n           </li>\n           <li class="list-group-item">\n             <span class="badge">{{insights.providers}}</span>\n             Doctors\n           </li>\n           <li class="list-group-item">\n             <span class="badge">{{insights.admins}}</span>\n             Admins\n           </li>\n           <li class="list-group-item">\n             <span class="badge">{{insights.superAdmins}}</span>\n             Super Admins\n           </li>\n         </ul>\n       </div>\n     </div>\n\n     <div role="tabpanel" class="tab-pane" ng-if="user.role == \'SuperAdmin\'" id="adminlist" ng-controller="AdminInsightsAdminlistController">\n       <div class="header">\n          <div class="container">\n            <div class="col-md-10 col-xs-6 text-left"><h3>Admins</h3></div>\n            <div class="col-md-2 col-xs-6 text-right form-group">\n               <button class="btn btn-primary btn-sm" ng-click="getAdminUsers()"><strong>REFRESH</strong></button>\n            </div>\n          </div>\n        </div>\n        <div ng-if="admins" class="synsormed-list-table">\n          <div class="list-head-row">\n            <div class="container">\n              <div class="col-xs-3"><strong>Name</strong></div>\n              <div class="col-xs-3"><strong>Email</strong></div>\n              <div class="col-xs-3"><strong>Organization</strong></div>\n              <div class="col-xs-3"><strong>Actions</strong></div>\n            </div>\n          </div>\n          <div class="list-head-row hover-grid" ng-repeat="admin in admins | orderBy:\'-org_id\'">\n            <div class="container">\n              <div class="col-xs-3">{{admin.name}}</div>\n              <div class="col-xs-3">{{admin.email}}</div>\n              <div class="col-xs-3">{{getOrganizationById(admin.org_id).name}}</div>\n              <div class="col-xs-3">\n                  <button class="btn btn-secondary fa fa-sign-in" ng-click="loginAsAdmin(admin)" title="Login">\n                  </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n         <alert type="warning" class="container no-list" ng-if="admins.length == 0">No Admins Loaded.</alert>\n\n     </div>\n\n     <div role="tabpanel" class="tab-pane" ng-if="user.role == \'SuperAdmin\'" id="organization" ng-controller="AdminInsightsOrganizationController">\n       <div class="header">\n          <div class="container">\n            <div class="col-md-10 col-xs-6 text-left"><h3>Organizations</h3></div>\n            <div class="col-md-2 col-xs-6 text-right form-group">\n                <a class="btn btn-primary btn-sm" href="#/register"><strong>ADD</strong></a>\n               <button class="btn btn-primary btn-sm" ng-click="getAllOrganizations()"><strong>REFRESH</strong></button>\n            </div>\n          </div>\n        </div>\n\n        <div ng-if="orgs" class="synsormed-list-table">\n          <div class="list-head-row">\n            <div class="container">\n              <div class="col-xs-4"><strong>Name</strong></div>\n              <div class="col-xs-4 text-center"><strong>Active</strong></div>\n              <div class="col-xs-4 text-center"><strong>Actions</strong></div>\n            </div>\n          </div>\n          <div class="list-head-row hover-grid" ng-repeat="org in orgs">\n            <div class="container">\n              <div class="col-xs-4">{{org.name}}</div>\n              <div ng-show=\'org.is_active\' class="col-xs-4 text-center"><span class=\'fa fa-lg fa-check-circle text-success\'></span></div>\n              <div ng-show=\'!org.is_active\' class="col-xs-4 text-center"><span class=\'fa fa-lg fa fa-times-circle text-danger\'></span></div>\n              <div class="col-xs-4 text-center">\n                   <button class="btn btn-secondary" ng-click="getDetails(org)"><i class="fa fa-bar-chart"></i></button>\n                   <button class="btn btn-secondary" ng-click="license(org)">Add License</button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n\n         <alert type="warning" class="container no-list" ng-if="orgs.length == 0">No Organizations Loaded.</alert>\n\n     </div>\n\n  </div>\n</div>\n');
}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/monitor/map.html",'<div id="mapMonitor" class="modal-body" wait="waiting">\n    <h4 class="text-center">Monitor-{{patientCode}} Location</h4>\n    <div ng-if="location && location.coords.latitude && location.coords.longitude">\n        <map center="{{userPosition}}" reverse-geocode lat="{{location.coords.latitude}}" lng="{{location.coords.longitude}}" zoom="13" cache="false">\n            <marker position="{{userPosition}}"/>\n        </map>\n   </div>\n    <alert ng-if="!location" type="warning">\n        No location details found for this monitor.\n    </alert>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">Ok</button>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/monitor/monitor.html",'<div id="monitor">\n  <!-- Nav tabs -->\n  <!-- Top nav starts  -->\n  <nav class="navbar synsormed-navs navbar-inverse" role="tabs">\n    <div class="container">\n      <!-- Nav brand start -->\n      <div class="navbar-header col-md-2">\n        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#collspse-settings-target">\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        </button>\n        <a class="navbar-brand">\n        <strong>Monitors</strong>\n        </a>\n      </div>\n      <!-- Nav brand ends-->\n      <!-- Nav menu start-->\n      <ul id="collspse-settings-target" role="tablist" class="nav navbar-nav collapse navbar-collapse col-md-10">\n        <li role="presentation" ng-if="user.role == \'Admin\' || user.role == \'Provider\'" ng-click="editMonitor()">\n          <a>New Monitor</a>\n        </li>\n        <li class="active" role="presentation" ng-if="user.role == \'Admin\' || user.role == \'Provider\'">\n          <a href="#worklist" aria-controls="worklist" role="tab" data-toggle="tab">List</a>\n        </li>\n      </ul>\n      <!-- Nav menu ends -->\n      <div class="alert alert-danger col-md-offset-1 col-md-3" ng-if="licenseMsg" style="padding:8px;margin:10px 0px;float:right;">\n        <strong style="padding-left: 35px;">{{licenseMsg}}</strong>\n      </div>\n    </div>\n  </nav>\n  <!-- Tab panes -->\n  <div class="tab-content">\n    <!-- monitor list -->\n    <div role="tabpanel" class="tab-pane active monitor-list" id="monitor-list">\n      <div ng-if="!alert.msg">\n        <div class="header">\n          <div class="container monitor-filter">\n            <div class="xs-visible-block col-sm-3 col-lg-2 clearfix">\n              <h3>Monitor List</h3>\n            </div>\n            <div class="xs-visible-block col-sm-9 col-lg-10 clearfix">\n              <div class="col-md-7 col-sm-6 col-lg-5 col-xs-12 xs-visible-block clearfix xs-mar-top-10 pad-0">\n                <span class="hidden-xs hidden-sm small-text">Monitors for</span>\n                <aura-dropdown class=\'xs-fl pointer\' selected="showUser.id" items="users" key="id" item="name"></aura-dropdown>\n                <aura-dropdown class=\'xs-fr pointer\' selected="filter.id" items="filters" key="id" item="name"></aura-dropdown>\n                <!--<aura-dropdown class=\'xs-fr pointer\' selected="deletedmonitor.id" items="deletedmonitors" key="id" item="name"></aura-dropdown>-->\n                <span class="hidden-xs hidden-sm small-text">Filter</span>\n              </div>\n              <div class="col-md-3 col-sm-4 col-lg-4 col-xs-12 xs-visible-block clearfix xs-mar-top-10 pad-0">\n                <div class="xs-fl col-lg-5 col-sm-4 col-xs-4 pad-0">\n                  <span>\n                    <span class="hidden-xs hidden-sm small-text">Records</span>\n                    <aura-dropdown selected="pagination.pageSize" items="pagination.pageSizes" class="pointer"></aura-dropdown>\n                    <span class="visible-xs-inline small-text">Records</span>\n                  </span>\n                </div>\n                <div class="col-lg-4 col-sm-6 col-xs-4 xs-fr pad-0">\n                  <input class=\'mar-left-10 form-control\' type=\'text\' placeholder="Search" ng-model=\'pagination.searchBox\' />\n                </div>\n              </div>\n              <div class="col-md-2 col-sm-2 col-lg-2 col-xs-12 xs-visible-block clearfix xs-mar-top-10 pad-0">\n                <button class="btn btn-primary btn-sm" ng-click="refreshMonitorList()"><strong>REFRESH LIST</strong></button>\n              </div>\n            </div>\n          </div>\n          <!-- <div class="container monitor-filter" ng-if="profileType">\n            <div class="xs-visible-block col-sm-9 col-lg-9 clearfix">\n                  <div class="col-md-7 col-sm-6 col-lg-4 col-xs-12 xs-visible-block clearfix xs-mar-top-10 pad-0 col-md-offset-2">\n                      <div class="col-md-3">\n                        <span class="hidden-xs hidden-sm small-text">Filter By</span>\n                      </div>\n                      <div class="col-md-8">\n                        <input class=\'form-control\' type=\'text\' placeholder="Filter" ng-model=\'pagination.filter\' style="border: 1px solid #00ABA2;border-radius: 10px;"/>\n                    </div>\n                  </div>\n                  <div class="col-md-3 col-sm-4 col-lg-5 col-xs-12 xs-visible-block clearfix xs-mar-top-10 pad-0">\n                        <div class="col-md-3">\n                          <span class="hidden-xs hidden-sm small-text">Records per Page</span>\n                        </div>\n                        <div class="col-md-4">\n                          <input class=\'form-control\' type=\'text\' placeholder="Page" ng-model=\'pagination.pageSize\' style="border: 1px solid #00ABA2;border-radius: 10px;"/>\n                        </div>\n                 </div>\n            </div>\n            <div class="col-md-2 col-sm-2 col-lg-2 col-xs-12 xs-visible-block clearfix xs-mar-top-10 pad-0">\n               <input class=\'mar-left-10 form-control\' type=\'text\' placeholder="Search" ng-model=\'pagination.searchBox\' style="border: 1px solid #00ABA2;border-radius: 10px;"/>\n            </div>\n            </div> -->\n          <!--<stacked-toggle-progress ng-if="filterData.length" data="filterData" for="selectUserById(showUser.id)" total="monitors.length"></stacked-toggle-progress>-->\n        </div>\n        <div ng-if="monitors.length > 0 && initialLoaded" class="synsormed-list-table">\n          <div class="list-head-row">\n            <div class="row">\n              <div class="col-sm-1 col-xs-1"></div>\n              <div class="col-sm-1 col-xs-3">\n                <strong>Code</strong>\n              </div>\n              <div class="col-xs-3 text-center" ng-class="profileType ? \'col-sm-3\' : \'col-sm-2\'">\n                <strong>Patient</strong>\n              </div>\n              <div class="hidden-xs text-center" ng-class="profileType ? \'col-sm-3\' : \'col-sm-2\'" ng-if="profileType">\n                <strong>Care Coordinator</strong>\n              </div>\n              <div class="col-sm-2 hidden-xs text-center" ng-if="!profileType">\n                <strong>Serial Number</strong>\n              </div>\n              <div class="col-sm-4 col-xs-3 text-center" ng-if="!profileType">\n                <strong>Monitoring</strong>\n              </div>\n              <!-- <div class="col-sm-2 hidden-xs text-center"><strong>Start Date</strong></div> -->\n              <div class="col-sm-1 hidden-xs"><strong>Status</strong></div>\n              <div class="col-sm-2 col-xs-5">\n                <strong class="visible-xs">Status</strong>\n                <strong>Actions</strong>\n              </div>\n            </div>\n          </div>\n          <div class="list-head-row hover-grid" ng-repeat="monitor in pagination.finalMonitors track by $index" id="monitors">\n            <div class="row">\n              <div class="col-xs-1 col-sm-1 cell-pinged text-center">\n                <span ng-click="hideNotify(monitor); displaySummary(monitor)" tooltip-html-unsafe="Click for details" class="tooltip-auqa-bg" tooltip-placement="top" ng-if="monitor.notifyRequested">\n                <i class="fa fa-phone" aria-hidden="true"></i>\n                </span>\n              </div>\n              <div class="col-sm-1 col-xs-3">\n                <div class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                  <a class="pointer"> {{monitor.patientCode}} </a>\n                </div>\n                <ul class="dropdown-menu dropdown-menu-left" aria-labelledby="dropdownMenu2">\n                  <!-- <li><a href="/#/showMonitor?id={{monitor.id}}" > Instructions </a></li>\n                    <li ng-if="monitor.location"><a class="pointer" ng-click="displayLocation(monitor.patientCode, monitor.location)"> Location </a></li> -->\n                  <li>\n                    <a class="pointer" ng-click="displaySummary(monitor)"> Patient Summary </a>\n                  </li>\n                </ul>\n              </div>\n              <!--              <div class="col-sm-1 col-xs-3 text-center tooltip-auqa-bg" ng-if="profileType" tooltip-placement="top" tooltip-html-unsafe="{{showPatientInfo(monitor)}}">\n                <a  class="pointer" style="color:#F05F3A"> {{monitor.patientCode}} </a>\n                </div> -->\n              <div class="col-xs-3 text-center tooltip-auqa-bg" ng-class="profileType ? \'col-sm-3\' : \'col-sm-2 \'">\n                {{monitor.patientName || \'N/A\'}}\n              </div>\n              <div class="hidden-xs text-center" ng-if="profileType" ng-class="profileType ? \'col-sm-3\' : \'col-sm-2 \'">{{monitor.providerName || \'N/A\'}}</div>\n              <div class="col-sm-2 hidden-xs text-center" ng-if="!profileType">{{monitor.serialNumber || \'N/A\'}}</div>\n              <div class="col-sm-4 col-xs-3 text-center" ng-if="!profileType">\n                <span ng-if="monitor.measurementName.length" ng-repeat=\'name in monitor.measurementName track by $index\'>{{name}}\n                <i ng-if=\'$index!=(monitor.measurementName.length-1)\'>, </i>\n                </span>\n                <span ng-if="!monitor.measurementName.length">N/A</span>\n              </div>\n              <!-- <div class="col-sm-2  hidden-xs text-center">{{ (monitor.startDate | date:\'mediumDate\') || \'N/A\'}}</div> -->\n              <div class="col-xs-1 col-sm-1" style="position: relative; left: 15px">\n                <span ng-style="{color: monitor.surveyColor}" tooltip-html-unsafe="{{showLastSyncDates(monitor)}}" class="tooltip-auqa-bg" tooltip-placement="top">\n                  <i ng-class="{\'fa fa-circle\': monitor.surveyColor !== \'#fff\', statusBorder: monitor.surveyColor == \'#fff\'}" aria-hidden="true"></i>\n                </span>\n                <!-- <div ng-if="checkAlertCondition(monitor.lastSync) != true">\n                  <span ng-if="!(monitor.isMissed || monitor.isOutofBound)" class="fa fa-lg fa-check-circle text-success tooltip-auqa-bg" tooltip-placement="top" tooltip-html-unsafe="{{showLastSyncDates(monitor.lastSync)}}"></span>\n                  <span ng-if="monitor.isMissed" class="tooltip-auqa-bg fa fa-lg fa-calendar-times-o {{(monitor.bioSeverity > 3 )? \'text-danger\': \'text-warning\'}}" tooltip-placement="top" tooltip-html-unsafe="{{showLastSyncDates(monitor.lastSync)}}"></span>\n                  <span ng-if="monitor.isOutofBound" class="tooltip-auqa-bg fa fa-lg fa-heartbeat text-danger" tooltip-placement="top" tooltip-html-unsafe="{{showLastSyncDates(monitor.lastSync)}}"></span>\n                  <span ng-if="monitor.isEduMissed" class="tooltip-auqa-bg fa fa-lg fa-file-text {{(monitor.eduSeverity > 3 )? \'text-danger\': \'text-warning\'}}" tooltip-placement="top" tooltip-html-unsafe="{{showLastSyncDates(monitor.lastSync)}}"></span>\n                  </div> -->\n              </div>\n              <div class="col-sm-2 col-xs-4" ng-if="!monitor.deleted_at && !profileType">\n                <button class="btn btn-secondary btn-sm" ng-click="monitorInsightChart(monitor)">\n                <i class="fa fa-bar-chart"></i>\n                </button>\n                <button data-toggle="dropdown" class="dropdown-toggle btn btn-secondary btn-sm btn-options">\n                <i class="fa fa-ellipsis-v" aria-hidden="true"></i>\n                </button>\n                <ul class="dropdown-menu font-15" role="menu">\n                  <li ng-click="editMonitor(monitor)">\n                    <a class="pointer">\n                    <i class="text-center width25 text-secondary fa fa-edit"></i>\n                    <span> Edit monitor </span>\n                    </a>\n                  </li>\n                  <li ng-click="monitorOauthLink(monitor)">\n                    <a class="pointer">\n                    <i class="text-center width25 text-secondary fa fa-cloud-upload"></i>\n                    <span> Connected Services </span>\n                    </a>\n                  </li>\n                  <!-- Not applicable to this workflow 102917 aholmes\n                    <li ng-click="notifyMonitor(monitor)">\n                        <a class="pointer">\n                           <i class="text-center width25 text-secondary fa fa-bell"></i>\n                           <span> Send message </span>\n                        </a>\n                    </li>\n                    -->\n                  <li ng-click="deleteMonitor(monitor.id)">\n                    <a class="pointer">\n                    <i class="text-center width25 text-secondary fa fa-trash"></i>\n                    <span> Delete monitor </span>\n                    </a>\n                  </li>\n                  <li ng-click="displaySummary(monitor)">\n                    <a class="pointer">\n                    <i class="text-center width25 text-secondary fa fa-file-text-o"></i>\n                    <span> Notes </span>\n                    </a>\n                  </li>\n                </ul>\n              </div>\n              <div class="col-sm-3 col-xs-4" ng-if="!monitor.deleted_at && profileType">\n                <button class="btn btn-sm" ng-click="monitorInsightChart(monitor)" style="background-color:white"><i class="fa fa-bar-chart"></i></button>\n                <button data-toggle="dropdown" class="dropdown-toggle btn-options btn-sm" style="background-color:white; border:none">\n                <i class="fa fa-ellipsis-v" aria-hidden="true"></i>\n                </button>\n                <ul class="dropdown-menu font-15" role="menu">\n                  <li ng-click="editMonitor(monitor)">\n                    <a class="pointer">\n                      <i class="text-center width25 text-secondary fa fa-edit"></i>\n                      <span> Edit monitor </span>\n                    </a>\n                  </li>\n                  <li ng-click="monitorOauthLink(monitor)">\n                    <a class="pointer">\n                      <i class="text-center width25 text-secondary fa fa-cloud-upload"></i>\n                      <span> Connected Services </span>\n                    </a>\n                  </li>\n                  <li ng-click="displaySummary(monitor)">\n                    <a class="pointer">\n                      <i class="text-center width25 text-secondary fa fa-file-text-o"></i>\n                      <span> Notes </span>\n                    </a>\n                  </li>\n                  <li ng-click="deleteMonitor(monitor.id)">\n                    <a class="pointer">\n                      <i class="text-center width25 text-secondary fa fa-trash"></i>\n                      <span> Delete monitor </span>\n                    </a>\n                  </li>\n                </ul>\n                <br class="visible-xs" />\n                <a class="pointer" ng-if="monitor.notificationId && monitor.showNote" ng-click="displaySummary(monitor)" class="new-notes">\n                  <span style="color: #F05F3A;font-size:12px;">NEW NOTES</span>\n                </a>\n              </div>\n              <div class="col-sm-10 col-xs-6" ng-if="monitor.deleted_at">\n                <button data-toggle="dropdown" class="dropdown-toggle btn btn-secondary btn-sm btn-options">\n                <i class="fa fa-ellipsis-v" aria-hidden="true"></i>\n                </button>\n                <ul class="dropdown-menu font-15" role="menu">\n                  <li ng-click="resetMonitor(monitor.id)">\n                    <a class="pointer">\n                    <i class="text-center width25 text-secondary fa fa-trash"></i>\n                    <span> Reset monitor </span>\n                    </a>\n                  </li>\n                  <li ng-click="permanentDeleteMonitor(monitor.id)">\n                    <a class="pointer">\n                    <i class="text-center width25 text-secondary fa fa-trash"></i>\n                    <span>Permanent Delete monitor</span>\n                    </a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n          <alert ng-if="pagination.finalMonitors.length == 0" class="container no-list" type="warning">No monitors in this filter</alert>\n        </div>\n      </div>\n      <alert ng-if="!alert.msg && !monitors.length && initialLoaded" class="container no-list" type="info">There are no monitors for current provider.</alert>\n      <alert class="container no-list" ng-if="alert.msg" type="{{alert.type}}">{{alert.msg}}</alert>\n    </div>\n    <!-- monitor list ends -->\n    <!--Pagination-->\n    <div ng-if="pagination.finalMonitors.length != 0" class="container text-center">\n      <ul class="pagination" ng-if="pageCount != 1">\n        <li>\n          <span ng-click="pageTurn(-1)" ng-if="showPrevious">\n          <i class="fa fa-arrow-left"></i> Previous</span>\n        </li>\n        <li ng-repeat="aPage in pages" ng-class="{active: pagination.page == aPage}">\n          <span ng-click="pageTo(aPage)">{{aPage}}</span>\n        </li>\n        <li>\n          <span ng-click="pageTurn(1)" ng-if="showNext">Next\n          <i class="fa fa-arrow-right"></i>\n          </span>\n        </li>\n      </ul>\n    </div>\n    <div ng-if="pagination.finalMonitors.length != 0" class="container">\n      <small>Viewing page {{pagination.page}} of {{pageCount}}</small>\n    </div>\n    <!--Pagination-->\n  </div>\n  <!-- Tab panes end -->\n</div>\n<style>\n  .status-green {\n  color: green;\n  }\n  .status-red {\n  color: red;\n  }\n  .status-orange {\n  color: orange;\n  }\n  .status-white {\n  color: #d2d2d2;\n  }\n</style>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/monitor/monitorInsights.html",'<div  class="modal-body" style="position: relative;" wait="waiting">\n    <div class="text-center">\n      <h3 ng-if="monitor.patientName">Patient: {{monitor.patientName}}</h3>\n      <h3>Monitor: {{monitor.patientCode}}</h3>\n    </div>\n    <div class="panel panel-default">\n          <div class="panel-body">\n              <div class=\'mar-bot-15\'>\n                  <div class="pull-left">\n                      <aura-dropdown selected="selected.id" items="monitorMeasurements" key="id" item="name" class="pointer"></aura-dropdown>\n                      <!-- <aura-dropdown selected="step.id" items="surveySteps" key="id" item="name" class="pointer"></aura-dropdown> -->\n                      <!-- <aura-dropdown ng-if="extraSurveySeries && extraSurveySeries.length" items="extraSurveySeries" key="key" item="name" selected="selected.survey" class="pointer"> -->\n                      <aura-dropdown ng-if="checkMeasurementForDropDown(selected.id) && dateCategories.length"  selected="selected.date" items="dateCategories" key="text" item="text" class="pointer">\n                      </aura-dropdown>\n                      <aura-dropdown ng-if="extraSeries && extraSeries.length" items="extraSeries" key="key" item="name" selected="selected.graph" class="pointer">\n                      </aura-dropdown>\n                      <aura-dropdown ng-if="checkOxygenFlowMeasurement(selected.id) && flowCategories.length && selected.graph == \'default\'"  selected="selected.flowDate" items="flowCategories" key="text" item="text" class="pointer">\n                      </aura-dropdown>\n                      <!-- <aura-dropdown ng-if="selected.graph == \'alarms\' && alertDateCategoriesDropdown.length"  selected="selected.alertDate" items="alertDateCategoriesDropdown" key="text" item="text" >\n                      </aura-dropdown> -->\n                  </div>\n                  <div class="pull-right text-center last-sync-time">\n                     <i class="fa fa-info" title="The last sync date for this indicator is {{lastSyncTime}}"></i>\n                  </div>\n                  <div class="clear"></div>\n              </div>\n              <div class="row" ng-if="selected.graph == \'alarms\'">\n                  <div class="alarm-type">\n                    <h5 class="text-center"><b>Alarm Type</b></h5>\n                  </div>\n                  <div class="alarm-type" ng-repeat="(alert, date) in latestDates" ng-hide="alert == \'Cleared\'">\n                    <h5 class="text-center"><b>{{alert}}</b></h5>\n                  </div>\n                  <div class="clearfix"></div>\n                  <div class="alarm-type">\n                    <h5 class="text-center"><b>Most Recent <br>Status</b></h5>\n                  </div>\n                  <div class="alarm-type {{getStatusClass(alert, date)}}" ng-repeat="(alert, date) in latestDates" ng-hide="alert == \'Cleared\'">\n                    <span tooltip-html-unsafe="{{showAlertDates(alert)}}" class="tooltip-auqa-bg" tooltip-placement="top" style="margin-left: 50%;"><i class="fa fa-circle status-circle" aria-hidden="true" ></i></span></td>\n                  </div>\n              </div>\n              <alert ng-if="notification" type="danger">{{notification}}</alert>\n              <highchart ng-hide=\'notification\' id="monitorInsightsModal" class="center-block default-modal-width text-center" config="chartConfig"></highchart>\n              <div ng-if="selected.graph == \'alarms\'" class="row">\n                <span class="float-right" style="margin-bottom:15px;margin-right: 20px;color:#606060;"><small><b>Last update:</b> {{latestAlertDate || \'N/A\'}}</small></span>\n              </div>\n              <div class="text-center" ng-if="showDates">\n                  <button class="btn btn-info" ng-click="getDataAccTime(1)" ng-class="\n                  dayActive ? \'\' : \'activeButton\'">DAY</button>\n                  <button class="btn btn-info" ng-click="getDataAccTime(7)" ng-class="\n                  weekActive ? \'\' : \'activeButton\'">WEEK</button>\n                  <button class="btn btn-info" ng-click="getDataAccTime(30)" ng-class="\n                  monthActive ? \'\' : \'activeButton\'">MONTH</button>\n                  <button class="btn btn-info" ng-click="getDataAccTime(365)" ng-class="\n                  yearActive ? \'\' : \'activeButton\'">Year</button>\n                  <button class="btn btn-info" ng-click="getDataAccTime(\'custom\')" ng-class="\n                  customActive ? \'\' : \'activeButton\'">Custom</button>\n                  <div class="row" ng-if="showDatePickers" style="margin-top:10px;">\n                    <p class="input-group" style="width:50%; float:left;">\n                        <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="date.dt1" is-open="open.opened1"  max-date="maxDate" datepicker-options="dateOptions"  ng-required="true" close-text="Close" />\n                        <span class="input-group-btn">\n                          <button type="button" class="btn btn-default" ng-click="openCalender1($event)"><i class="glyphicon glyphicon-calendar"></i></button>\n                        </span>\n                    </p>\n                    <p class="input-group" style="width:50%;float:left;">\n                        <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="date.dt2" is-open="open.opened2" min-date="minDate"  max-date="maxDate" datepicker-options="dateOptions"  ng-required="true" close-text="Close" />\n                        <span class="input-group-btn">\n                          <button type="button" class="btn btn-default" ng-click="openCalender2($event)"><i class="glyphicon glyphicon-calendar"></i></button>\n                        </span>\n                    </p>\n                    <!-- <datepicker ng-model="dt" show-weeks="true"  style="float:left;"></datepicker>\n                    <datepicker show-weeks="true"  style="float:left;"></datepicker> -->\n                  </div>\n              </div>\n          </div>\n   </div>\n   <div class="modal-footer">\n     <div class="pull-right">\n        <button ng-hide=\'notification\' class="btn btn-primary" ng-click="displaySummary(monitor)">Notes</button>\n        <button ng-hide=\'notification\' class="btn btn-primary" ng-click="printChart()">DOWNLOAD</button>\n        <button class="btn btn-primary" ng-click="ok()">OK</button>\n     </div>\n     <div class="clear"></div>\n   </div>\n</div>\n\n<style>\n.col-xs-12 .test h5{\nfont-size: 9px;\n}\n</style>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/monitor/notification.html",'<div wait="waiting">\n    <div class="modal-body" style="position: relative">\n        <div class="modal-header">\n            <div class="text-center">\n                <h3>{{title}}</h3>\n            </div>\n        </div>\n        <div class="modal-body" style="position: relative">\n            <form name="form">\n                <div class="form-group" validate>\n                    <textarea ng-model="message" required maxlength="90" name="message" placeholder="Enter message" class="form-control">\n                    </textarea>\n                </div>\n            </form>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" ng-click="send()">Send</button>\n        <button class="btn btn-default" ng-click="cancel()">Cancel</button>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/monitor/patientSummary.html",'<div id="patientSummary" ng-class="{\'modal-lg\': size == \'lg\'}">\n    <div class="modal-body" wait="waiting">\n        <div class="make-center">\n            <h4 class="modal-title modal-head">PATIENT SUMMARY ({{monitor.patientCode}})</h4>\n        </div>\n        <div class="row">\n            <div class="col-xs-6 col-md-6 col-xs-12">\n                <div class="left-section">\n                    <h4>Contact Info</h4>\n\n                    <div class="info-box">\n                        <div class="no-patient" ng-if="monitor.patientId == null">\n                            <p>No Patient Info</p>\n                        </div>\n                        <div ng-if="monitor.patientId != null">\n                            <p>Name - {{patient.firstName }} {{patient.lastName }}</p>\n                            <p>Phone - {{patient.mobileNumber}}</p>\n                            <p>Email - {{patient.email}}</p>\n                            <p>Address - {{patient.address}}</p>\n                        </div>\n                    </div>\n                    <h4>Profile</h4>\n                    <div class="info-box">\n                        <div class="no-patient" ng-if="monitor.patientId == null">\n                            <p>No Patient Info</p>\n                        </div>\n                        <div ng-if="monitor.patientId != null">\n                            <p>Age - {{patient.age}}</p>\n                            <p>Gender - {{patient.gender}}</p>\n                        </div>\n                    </div>\n                    <h4>File Info</h4>\n                    <div class="info-box">\n                        <p>Provider - {{providersName}}</p>\n                        <p>Email - {{providersEmail}}</p>\n                    </div>\n                </div>\n            </div>\n            <div class="col-xs-6 col-md-6 col-xs-12">\n                <div class="left-section">\n                    <h4 class="note-head">Notes</h4>\n                    <div class="notes-icons">\n                        <button class="btn btn-sm fa-icon-1" ng-click="addNote(monitor)">\n                            <i class="fa fa-plus"></i>\n                        </button>\n                        <button class="btn btn-sm fa-icon-1" ng-click="printNote()">\n                            <i class="fa fa-print"></i>\n                        </button>\n                    </div>\n\n                    <div class="info-box-right">\n                        <div class="no-notes" ng-if="monitor.note == null || monitor.note.length == 0">\n                            <p>No Notes available</p>\n                        </div>\n                        <div ng-if="newNote" class="info-box-new-note">\n                            <textarea class="form-control" ng-model="newNote.text"></textarea>\n                            <div class="btn-group" dropdown is-open="dropdownStatus.new">\n                                <button class="icon-btn" dropdown-toggle><i class="fa fa-clock-o"></i> {{newNote.duration ? newNote.duration + \' min\' : \'\'}}</button>\n                                <ul class="dropdown-menu" role="menu">\n                                    <li ng-repeat="duration in durations">\n                                        <a ng-click="updateNewNoteDuration(duration.value)">{{duration.text}}</a>\n                                    </li>\n                                </ul>\n                                <button class="icon-btn" ng-click="confirmAdd()"><i class="fa fa-check"></i></button>\n                                <button class="icon-btn" ng-click="cancelAdd()"><i class="fa fa-times"></i></button>\n                            </div>\n                        </div>\n                        <p class="content-border" ng-if="newNote"></p>\n                        <div ng-if="monitor.note != null" class="info-box-right-notes" ng-class="newNote ? \'has-new-note\' : \'\'">\n                            <div class="notes-content" ng-class="note.isNotify ? \'request-note\' : \'\'" ng-repeat="note in monitor.note">\n                                <p class="note-time"> {{formatDate(note.date)}}\n                                    <span class="note-icons">\n                                        <div class="btn-group hide-on-request-note" dropdown is-open="dropdownStatus[$index]">\n                                            <button class="icon-btn" dropdown-toggle><i class="fa fa-clock-o"></i></button>\n                                            <ul class="dropdown-menu" role="menu">\n                                                <li ng-repeat="duration in durations">\n                                                    <a ng-click="updateDuration($parent.$index, note, duration.value)">{{duration.text}}</a>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                        <span class="note-duration hide-on-request-note">{{note.duration}} min</span>\n                                        <button class="icon-btn hide-on-request-note" ng-click="editNote($index, note)"><i class="fa fa-pencil"></i></button>\n                                        <button class="icon-btn" ng-click="deleteNote(note)"><i class="fa fa-trash"></i></button>\n                                    </span>\n                                </p>\n                                <p ng-if="$index !== editingNoteIndex">{{note.text}}</p>\n                                <div ng-if="$index === editingNoteIndex">\n                                    <textarea class="form-control" ng-model="note.text"></textarea>\n                                    <div>\n                                        <button class="icon-btn" ng-click="confirmEdit()"><i class="fa fa-check"></i></button>\n                                        <button class="icon-btn" ng-click="cancelEdit()"><i class="fa fa-times"></i></button>\n                                    </div>\n                                </div>\n                                <p class="content-border"> </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="row">\n            <div class="modal-footer">\n                <div class="col-lg-6 col-md-6 col-xs-12">\n                    <!-- <button class="btn btn-secondary float-left" ng-click="editPatientDetail()">Edit patient Info</button> -->\n                </div>\n                <div class="col-lg-6 col-md-6 col-xs-12">\n                    <button class="btn btn-primary" ng-click="downloadPDF()">Download Report</button>\n                    <button class="btn btn-primary" ng-click="ok()">Exit</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<style>\n    .modal-dialog {\n        width: 768px;\n    }\n\n    @media only screen and (max-width: 480px) {\n        .modal-dialog {\n            max-width: 400px;\n        }\n    }\n</style>\n');
}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/monitor/serviceList.html",'<div id="monitor-service-list" class="modal-body" style="position: relative;" wait="waiting">\n    <div  class="text-center">\n        <h3>Connected Services</h3>\n    </div>\n    <div ng-if="!connectedServices.length" class="alert alert-warning" >\n        No Services Connected\n    </div>\n    <div ng-if=\'connectedServices\' class="panel panel-default" ng-repeat="connected in connectedServices">\n       <div class="panel-body">\n           <div class="text-center">\n               <b>{{connected.service_name}}</b> Connected <span class="text-success fa-lg fa fa-check-circle"></span>\n           </div>\n       </div>\n       <div class="panel-footer">\n           <div class="text-center">\n               <button class="btn btn-warning" ng-click="unlinkMonitor(connected.id, connected.monitor_id)">Unlink {{connected.service_name}}</button>\n           </div>\n       </div>\n   </div>\n\n   <div ng-if="connectedServices" class="text-center">\n       <small>(Reconnect with listed services to update)</small>\n   </div>\n</div>\n<div class="modal-footer">\n   <button class="btn btn-primary" ng-click="ok()">OK</button>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/visits/editEncounter.html",'<div id="generateCode" class="modal-body" wait="waiting">\n    <alert ng-if="notification" type="danger">{{notification}}</alert>\n    <div class="text-center">\n      <h3 ng-if="!isNew">Edit Encounter {{encounter.patientCode}}</h3>\n      <h3 ng-if="isNew">Schedule Visit</h3>\n    </div>\n    <div class="panel panel-default">\n          <div class="panel-body">\n              <form role="form" name="form">\n                <div class="form-group" validate>\n                 <input required placeholder="Reason for visit" name="reasonForVisit" class="form-control" type="text" ng-model="data.reasonForVisit">\n                </div>\n\n                <div class="input-group" validate>\n                   <input required name="followUpDate" type="text" class="border-secondary form-control" ng-focus="opened=true" datepicker-options="{showWeeks:false}" datepicker-popup="shortDate" ng-model="data.followupDate" is-open="opened" min-date="minDate" max-date="maxDate"  ng-required="true" close-text="Close"  />\n                    <div class="input-group-btn">\n                        <button type="button" class="btn btn-secondary" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>\n                    </div>\n                </div>\n\n                <div class="form-group" validate>\n                    <h5>Followup Time</h5>\n                    <timepicker class="timepicker" ng-model="data.followupTime"></timepicker>\n                </div>\n                <div class="form-group" validate>\n                    <h5>Worklist for</h5>\n                    <select name="forUser" required class="form-control btn-secondary" ng-model="useUser.id" ng-options="user.id as user.name for user in users"></select>\n                </div>\n                <div class="form-group" validate>\n                    <h5 class="pull-left">Patient for</h5>\n                    <button title=\'Add Patient\' type="button" class="pull-right btn btn-secondary btn-sm" ng-click="createPatient()"><i class="fa fa-plus"></i></button>\n                    <select name="forUser" class="form-control btn-secondary" ng-model="data.patientId" ng-options="patient.id as patient.name for patient in patients"></select>\n                    <div class="clear"></div>\n                </div>\n\n                <div class="checkbox form-group">\n                  <label><input name="isCCM" type="checkbox" ng-model="data.isCCM" />CCM <help help-text="Check the box if this code belongs to a patient under Chronic Care Management(CCM)."/></label>\n                </div>\n              </form>\n          </div>\n      </div>\n\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">OK</button>\n    <button class="btn btn-default" ng-click="cancel()">Cancel</button>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/visits/editNote.html",'<div class="modal-header">\n    <h3 class="modal-title text-center">\n        <span>Edit Note for {{encounter.patientCode}}</span>\n    </h3>\n</div>\n<div class="modal-body" style="position: relative" wait="waiting">\n    <alert ng-if="notification" type="danger">{{notification}}</alert>\n    <form name="form">\n        <div class="form-group" validate>\n            <label>Notes</label>\n            <textarea class="form-control" type="text" ng-model="encounter.note"></textarea>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">OK</button>\n    <button class="btn btn-default" ng-click="cancel()">Cancel</button>\n</div>\n</script>')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/visits/map.html",'<div id="mapMonitor" class="modal-body" wait="waiting">\n    <h4 class="text-center">Encounter-{{patientCode}} Location</h4>\n    <div ng-if="location">\n        <map center="{{userPosition}}" zoom="13">\n            <marker position="{{userPosition}}" />\n        </map>\n    </div>\n    <alert ng-if="!location" type="warning">\n        No location details found for this encounter.\n    </alert>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">Ok</button>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/visits/video.html",'<div  id="video-chat-container" modaldraggable>\n    <div>\n        <div class="pull-left online-area">\n            <i ng-if="onlineEncounters[encounterId]" class="fa fa-circle online-patient" aria-hidden="true" title="Patient is online"></i>\n            <i ng-if="!onlineEncounters[encounterId]" class="fa fa-circle text-danger" aria-hidden="true" title="Patient is offline"></i>\n        </div>\n        <div class="pull-right close-btn">\n            <i class="fa fa-times" aria-hidden="true" ng-click="close()"></i>\n        </div>\n        <div class="clear"></div>\n    </div>\n    <div class="modal-body">\n        <div class="remote-video-wrap">\n            <video id="remoteVideo" ng-class="showBackground ? \'video-background\' : \'\'" class="video-style" poster="/images/synsormed_logo_color.png"></video>\n            <div class="local-timer-wrap" ng-if="duration">\n                <alert class="text-center" type="info">{{duration | timerFormat}}</alert>\n            </div>\n            <div class="local-video-wrap">\n                <video id="localVideo" autoplay="true" muted="muted" ng-class="showBackground ? \'video-background\' : \'\'" class="video-style" poster="/images/synsormed_logo_color.png"></video>\n            </div>\n        </div>\n        <div class="top-margin-10 text-center">\n            <button ng-disabled="disableBtn || !onlineEncounters[encounterId]" ng-if="controls.start" class="btn btn-success" ng-click="startCall()" title="Start Call">\n                <i class="fa fa-phone fa-lg" aria-hidden="true"></i>\n            </button>\n            <button ng-disabled="disableBtn || !onlineEncounters[encounterId]" ng-if="controls.dial && !controls.start" class="btn btn-success" title="Dialing">\n                Dialing...\n            </button>\n            <button ng-disabled="disableBtn || !onlineEncounters[encounterId]" ng-if="!controls.start" class="btn btn-danger" ng-click="endCall()" title="End Call">\n                <i class="fa fa-phone fa-lg" aria-hidden="true"></i>\n            </button>\n            <button ng-disabled="disableBtn || !onlineEncounters[encounterId]" ng-if="controls.audio" class="btn btn-success" title="Mute Audio" ng-click="toggleType(\'audio\')">\n                <i class="fa fa-microphone" aria-hidden="true"></i>\n            </button>\n            <button ng-disabled="disableBtn || !onlineEncounters[encounterId]" ng-if="!controls.audio" class="btn btn-danger" title="Unmute Audio" ng-click="toggleType(\'audio\')">\n                <i class="fa fa-microphone-slash" aria-hidden="true"></i>\n            </button>\n            <button ng-disabled="disableBtn || !onlineEncounters[encounterId]" ng-if="controls.video" class="btn btn-success" title="Hide Video" ng-click="toggleType(\'video\')">\n                <i class="fa fa-video-camera" aria-hidden="true"></i>\n            </button>\n            <button ng-disabled="disableBtn || !onlineEncounters[encounterId]" ng-if="!controls.video" class="btn btn-danger" title="Show Video" ng-click="toggleType(\'video\')">\n                <i class="fa fa-video-camera" aria-hidden="true"></i>\n            </button>\n        </div>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/visits/visits.html",'<div id="visits">\n\n  <!-- Nav tabs -->\n  <!-- Top nav starts  -->\n  <nav class="navbar synsormed-navs navbar-inverse" role="tabs">\n      <div class="container">\n        <!-- Nav brand start -->\n        <div class="navbar-header col-md-2">\n          <button type="button" class="navbar-toggle" data-toggle="collapse"\n           data-target="#collspse-settings-target">\n             <span class="icon-bar"></span>\n             <span class="icon-bar"></span>\n             <span class="icon-bar"></span>\n          </button>\n          <a class="navbar-brand" ><strong>Visits</strong></a>\n        </div>\n        <!-- Nav brand ends-->\n\n        <!-- Nav menu start-->\n        <ul id="collspse-settings-target" role="tablist" class="nav navbar-nav collapse navbar-collapse col-md-10">\n          <li role="presentation" ng-if="user.role == \'Admin\' || user.role == \'Provider\'" ng-click="editEncounter()"><a>Schedule Visit</a></li>\n          <li class="active" role="presentation" ng-if="user.role == \'Admin\' || user.role == \'Provider\'"><a href="#worklist" aria-controls="worklist" role="tab" data-toggle="tab">Worklist</a></li>\n        </ul>\n        <!-- Nav menu ends -->\n\n      </div>\n  </nav>\n\n <!-- Tab panes -->\n <div class="tab-content">\n\n   <!-- worklist -->\n   <div role="tabpanel" class="tab-pane active" id="worklist">\n     <div id="worklist" class="vbox">\n\n         <div id="worklist-filter" >\n             <div class="container" ng-show="users.length">\n                 <div class="col-sm-5 col-md-2 col-lg-2"><h3>Worklist</h3></div>\n                 <div class="col-sm-7 col-md-5 col-lg-6 col-xs-12 ipad-fix">\n                   <span>\n                       <span class="hidden-xs small-text">Worklist for</span>\n                       <span class="visible-xs-inline small-text">Worklist</span>\n                       <aura-dropdown selected="showUser.id" items="users" key="id" item="name"></aura-dropdown>\n                   </span>\n                   <span>\n                       <aura-dropdown selected="callStatusId" items="callStatus" key="id" item="name"></aura-dropdown>\n                   </span>\n                   <span>\n                       <aura-dropdown selected="pagination.pageSize" items="pagination.pageSizes"></aura-dropdown>\n                       <span class="hidden-xs small-text">Records per page</span>\n                       <span class="visible-xs-inline small-text">Records</span>\n                   </span>\n                 </div>\n                 <div class="col-md-5 col-lg-4 col-xs-12">\n                     <div class="pull-left">\n                       <div class="input-group" datepicker-addon current-date="currentDate">\n                           <span class="hidden-xs input-group-addon small-text">Worklist Date</span>\n                           <input type="text" class="border-secondary form-control input-sm"\n                                datepicker-popup="shortDate"\n                                ng-model="worklistDate"\n                                is-open="datepicker.opened"\n                                datepicker-options="dateOptions"\n                                close-text="Close"\n                                 />\n                           <div class="input-group-btn">\n                               <button type="button" class="btn btn-secondary btn-sm" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>\n                           </div>\n                       </div>\n                     </div>\n                   <div class="pull-right clearfix">\n                       <button ng-click="refreshWorkList()" class="btn btn-primary btn-sm"><strong>REFRESH WORKLIST</strong></button>\n                   </div>\n                 </div>\n             </div>\n\n         </div>\n\n         <div id="worklist-table" wait="worklistLoading" class="flex" ng-if="filteredWorklist.length != 0">\n\n             <div class="synsormed-list-table">\n               <div class="list-head-row">\n                 <div class="container">\n                   <div class="col-md-2 col-sm-3 col-xs-4"><strong>Code</strong></div>\n                   <div class="col-md-2  hidden-xs text-center"><strong>Patient</strong></div>\n                   <div class="col-md-3 col-sm-3 hidden-xs"><strong>Reason for Visit</strong></div>\n                   <div class="col-md-1 col-sm-2 col-xs-4 text-center"><strong>Appointment Time</strong></div>\n                   <div class="col-md-4 col-sm-4 col-xs-4">\n                       <div class="col-md-3 hidden-sm hidden-xs text-center"><strong>Call Completed</strong></div>\n                       <div class="col-md-3 hidden-sm text-center hidden-xs"><strong>Call Duration</strong></div>\n                       <div class="col-md-6 col-sm-12 col-xs-12 text-center"><strong>Actions</strong></div>\n                   </div>\n                 </div>\n               </div>\n               <div class="list-head-row hover-grid" ng-repeat="worklistItem in filteredWorklist">\n\n                 <div class="container">\n                   <div class="col-md-2 col-sm-3 col-xs-4">\n                       <div  class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                           <a class="pointer"> {{worklistItem.patientCode}} </a>\n                           <i ng-if="onlineEncounters[worklistItem.id]" class="fa fa-circle online-patient" aria-hidden="true" title="Online"></i>\n                       </div>\n                       <ul class="dropdown-menu dropdown-menu-left" aria-labelledby="dropdownMenu2">\n                           <li><a href="/#/showCode?id={{worklistItem.id}}" > Instructions </a></li>\n                           <li ng-if="worklistItem.location"><a class="pointer" ng-click="displayLocation(worklistItem.patientCode, worklistItem.location)"> Location </a></li>\n                       </ul>\n                   </div>\n                   <div class="col-sm-2 hidden-xs text-center tooltip-auqa-bg" tooltip-placement="top" tooltip-html-unsafe="{{showPatientInfo(worklistItem)}}">\n                       {{worklistItem.patientName || \'N/A\'}}\n                   </div>\n                   <div class="col-md-3 col-sm-3 hidden-xs overflow-wrap">{{worklistItem.reasonForVisit}}</div>\n                   <div class="col-md-1 col-sm-2 col-xs-4 text-center">{{worklistItem.scheduledStartTime|date:\'shortTime\'}}</div>\n                   <div class="col-md-4 col-sm-4 col-xs-4">\n                     <div class="col-md-3 hidden-sm hidden-xs text-center">\n                         <span ng-if="worklistItem.callCompleted" class="fa fa-lg fa-check-circle text-success" title="{{getCallCompletionDate(worklistItem.callStarted, worklistItem.callDuration)}}"></span>\n                         <span ng-if="!worklistItem.callCompleted" class="fa fa-lg fa-times-circle text-warning"></span>\n                     </div>\n                     <div class="col-md-3 hidden-sm hidden-xs text-center">{{callDuration(worklistItem.callDuration)}}</div>\n                     <div class="col-md-6 col-sm-12 col-xs-12 text-center">\n                       <button class="btn btn-secondary btn-sm" ng-click="editEncounter(worklistItem)"><i class="fa fa-edit"></i></button>\n                       <button data-toggle="dropdown" class="dropdown-toggle btn btn-secondary btn-sm btn-options">\n                           <i class="fa fa-ellipsis-v" aria-hidden="true"></i>\n                       </button>\n                       <ul class="dropdown-menu font-15" role="menu">\n                           <li ng-click="showNotes(worklistItem)">\n                                <a class="pointer">\n                                   <i class="width25 text-center text-secondary fa fa-file-text-o"></i>\n                                   <span> Edit note </span>\n                                </a>\n                           </li>\n                           <li ng-if="user.role.toLowerCase() == \'provider\' && onlineEncounters[worklistItem.id]" ng-click="openVideoPopUp(worklistItem.id)">\n                                <a class="pointer">\n                                   <i class="width25 text-center text-secondary fa fa-video-camera"></i>\n                                   <span> Start video call </span>\n                                </a>\n                           </li>\n                           <li ng-click="notifyEncounter(worklistItem)">\n                               <a class="pointer">\n                                  <i class="width25 text-center text-secondary fa fa-bell"></i>\n                                  <span> Send message </span>\n                               </a>\n                           </li>\n                           <li ng-click="deleteEncounter(worklistItem.id)">\n                               <a class="pointer">\n                                  <i class="width25 text-center text-secondary fa fa-trash"></i>\n                                  <span> Delete encounter </span>\n                               </a>\n                           </li>\n                       </ul>\n\n\n                     </div>\n                   </div>\n                 </div>\n               </div>\n             </div>\n\n             <div class="container text-center">\n               <ul class="pagination" ng-if="pageCount != 1">\n                   <li><span ng-click="pageTurn(-1)"><i class="fa fa-arrow-left"></i> Previous</span></li>\n\n                   <li ng-repeat="aPage in pages" ng-class="{active: pagination.page == aPage}"><span ng-click="pageTo(aPage)">{{aPage}}</span></li>\n                   <li><span ng-click="pageTurn(1)">Next <i class="fa fa-arrow-right"></i></span></li>\n               </ul>\n             </div>\n             <div class="container"><small>Viewing page {{pagination.page}} of {{pageCount}}</small></div>\n         </div>\n         <alert ng-if="!alert.msg && filteredWorklist.length == 0" class="container no-list" type="info">There are no worklist items for this date.</alert>\n         <alert class="container no-list" ng-if="alert.msg" type="{{alert.type}}">{{alert.msg}}</alert>\n     </div>\n\n   </div>\n   <!-- worklist ends -->\n\n </div>\n <!-- Tab panes end -->\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/patient/encounter/call.html",'<div id="patient-call-area" >\n    <div class="tab-content">\n        <div role="tabpanel" class="tab-pane active" id="patienCall">\n            <div class="container">\n                <div class="xs-visible-block col-sm-4 col-lg-3 clearfix ">\n                    <div class="call-title">Virtual Waiting Room</div>\n                    <div class="patient-code text-center">Patient <span class="patient-code-clr">{{patientCode}}</span></div>\n                </div>\n            </div>\n\n            <div class="synsormed-list-table">\n                <div class="list-head-row">\n                    <div class="container">\n                        <div class="row margin-top-20">\n                            <div class="col-sm-4">\n                                <div class="pull-left">\n                                     <span class="font-20"> Physician status </span>\n                               </div>\n                               <div class="pull-left phy-status">\n                                 <span ng-if="isProviderOnline">\n                                     <i class="fa fa-circle online-patient" aria-hidden="true" title="Physician is online"></i>\n                                     <strong>Physician is online</strong>\n                                 </span>\n                                 <span ng-if="!isProviderOnline">\n                                     <i  class="fa fa-circle text-danger" aria-hidden="true" title="Physician is offline"></i>\n                                     <strong>Physician is offline</strong>\n                                 </span>\n                               </div>\n                                <div class="clear"> </div>\n                            </div>\n                        </div>\n                    </div>\n               </div>\n\n               <div class="list-head-row">\n                   <div class="container">\n                       <div class="col-sm-4 instructions-wrap">\n                           <strong class="text-info">Instructions</strong>\n                           <ul type="none">\n                               <li>Please keep this window open. The medical provider will request a video session shortly</li>\n                           </ul>\n                       </div>\n                   </div>\n               </div>\n          </div>\n      </div>\n   </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/patient/encounter/video.html",'<div  id="video-chat-container" modaldraggable>\n    <div ng-show="!callStarted" id="calling-phy">\n        <div class="text-center phy-call-area">\n                <h3>Physician is Calling ...</h3>\n                <button class="btn btn-success" title="Answer" ng-click="acceptCall()">\n                    Accept\n                </button>\n                <button class="btn btn-danger" title="Reject" ng-click="rejectCall()">\n                    Reject\n                </button>\n        </div>\n    </div>\n    <div class="modal-body" ng-show="callStarted">\n        <div class="remote-video-wrap">\n            <video id="remoteVideo" ng-class="showBackground ? \'video-background\' : \'\'" class="video-style" poster="/images/synsormed_logo_color.png"></video>\n            <div class="local-timer-wrap" ng-if="duration">\n                <alert class="text-center" type="info">{{duration | timerFormat}}</alert>\n            </div>\n            <div class="local-video-wrap">\n                <video id="localVideo" autoplay="true" muted="muted" ng-class="showBackground ? \'video-background\' : \'\'" class="video-style" poster="/images/synsormed_logo_color.png"></video>\n            </div>\n        </div>\n        <div class="top-margin-10 text-center">\n            <button class="btn btn-danger" ng-click="endCall()" title="End Call">\n                <i class="fa fa-phone fa-lg" aria-hidden="true"></i>\n            </button>\n            <button ng-if="controls.audio" class="btn btn-success" title="Mute Audio" ng-click="toggleType(\'audio\')">\n                <i class="fa fa-microphone" aria-hidden="true"></i>\n            </button>\n            <button ng-if="!controls.audio" class="btn btn-danger" title="Unmute Audio" ng-click="toggleType(\'audio\')">\n                <i class="fa fa-microphone-slash" aria-hidden="true"></i>\n            </button>\n            <button ng-if="controls.video" class="btn btn-success" title="Hide Video" ng-click="toggleType(\'video\')">\n                <i class="fa fa-video-camera" aria-hidden="true"></i>\n            </button>\n            <button ng-if="!controls.video" class="btn btn-danger" title="Show Video" ng-click="toggleType(\'video\')">\n                <i class="fa fa-video-camera" aria-hidden="true"></i>\n            </button>\n        </div>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/reports/billing/billing.html",'<div id="patient-usage" class="modal-body" style="position: relative">\n    <div class="text-center">\n      <h3>Billing Report</h3>\n    </div>\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <div class="row">\n          <div ng-class="customDates ? \'col-md-3\' : \'col-md-offset-1 col-md-4\'">\n            <select name="days" required class="form-control" ng-model="day.selectedDay" ng-selected="days[0].id" ng-options="day.id as day.name for day in days">\n            </select>\n          </div>\n          <div ng-class="customDates ? \'col-md-6\' : \'col-md-7\'" class="text-center" ng-if="!customDates" style="margin-top:8px;">\n            <a ng-click="requestReport()" class="non-dec pointer" aria-controls="dashboard" role="tab" data-toggle="tab">Request Report</a>\n          </div>\n          <div ng-class="customDates ? \'col-md-8\' : \'col-md-12\'" ng-if="customDates">\n            <div class="row">\n              <p class="input-group" style="width:50%; float:left;">\n                  <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="date.dt1" is-open="open.opened1"  max-date="maxDate" datepicker-options="dateOptions"  ng-required="true" close-text="Close" />\n                  <span class="input-group-btn">\n                    <button type="button" class="btn btn-default" ng-click="openCalender1($event)"><i class="glyphicon glyphicon-calendar"></i></button>\n                  </span>\n              </p>\n              <p class="input-group" style="width:50%;float:left;">\n                  <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="date.dt2" is-open="open.opened2" min-date="minDate"  max-date="maxDate" datepicker-options="dateOptions"  ng-required="true" close-text="Close" />\n                  <span class="input-group-btn">\n                    <button type="button" class="btn btn-default" ng-click="openCalender2($event)"><i class="glyphicon glyphicon-calendar"></i></button>\n                  </span>\n              </p>\n            </div>\n          </div>\n        </div>\n        <div class="row text-center"  ng-if="customDates">\n          <a ng-click="requestReport()" class="non-dec" aria-controls="dashboard" role="tab" data-toggle="tab" export-to-csv="patient-usage-data">Request Report</a>\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" ng-click="ok()">Close</button>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/reports/billing/download.html",'<div id="rpm-report" class="modal-body" style="position: relative">\n    <div class="row" ng-if="hasResult">\n      <div class="text-center">\n        <h3>Your report is ready!</h3>\n        <a href="{{getBillingReportURL()}}" target=\'_self\' class="non-dec pointer" download>Download Report</a>\n      </div>\n    </div>\n    <div class="row" ng-if="!hasResult">\n      <alert class="no-list text-center" type="warning">No patients in this date range</alert>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" ng-click="ok()">Close</button>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/reports/billing/gatheringdata.html",'<div id="rpm-report" class="modal-body" style="position: relative">\n    <div class="text-center">\n      <p>Gathering Report Data</p>\n      <p>Please standby...</p>\n      <p>This may take few minutes based on your report criteria</p>\n      <p>Please do not leave or refresh page</p>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/reports/summary/summary.html",'<div id="summary-report" class="modal-body" style="position: relative">\n    <div class="text-center">\n      <h3>Patient Summary</h3>\n    </div>\n    <div class="panel panel-default">\n          <div class="panel-body">\n              <div ng-if="!result"> No information found</div>\n              <div ng-if="result" id="patient-summary">\n                  <div class="list-group">\n                      <div class="row group-item hdr">\n                         <div class="col-sm-12">General</div>\n                      </div>\n                      <div class="row group-item">\n                         <div class="col-sm-6 bordr-rt"> Patient Code</div>\n                         <div class="col-sm-6"><span class="badge">{{result.code}}</span></div>\n                      </div>\n                      <div class="row group-item">\n                         <div class="col-sm-6 bordr-rt">Patient Name</div>\n                         <div class="col-sm-6">\n                             <span class="badge">{{result.patientName | defaultText : \'N/A\'}}\n                             </span>\n                         </div>\n                      </div>\n                      <div class="row group-item">\n                         <div class="col-sm-6 bordr-rt">DOB</div>\n                         <div class="col-sm-6">\n                             <span class="badge">\n                                 {{result.dob | formatDob}}\n                             </span>\n                         </div>\n                      </div>\n                      <div class="row group-item">\n                         <div class="col-sm-6 bordr-rt">Organization name</div>\n                         <div class="col-sm-6">\n                             <span class="badge">\n                                 {{result.organizationName}}\n                             </span>\n                         </div>\n                      </div>\n                      <div class="row group-item">\n                         <div class="col-sm-6 bordr-rt">Provider name</div>\n                         <div class="col-sm-6">\n                             <span class="badge">\n                                 {{result.providerName}}\n                             </span>\n                         </div>\n                      </div>\n                      <div class="row group-item">\n                         <div class="col-sm-6 bordr-rt">Phone number</div>\n                         <div class="col-sm-6">\n                             <span class="badge">\n                                 {{result.patientContact | defaultText : \'N/A\'}}\n                             </span>\n                         </div>\n                      </div>\n                  </div>\n                  <indicator-metrics indicators="result.indicators"></indicator-metrics>\n                  <ul class="list-group">\n                      <li class="list-group-item list-header">\n                          Notes\n                      </li>\n                      <li style="word-wrap:break-word;" class="list-group-item" ng-repeat="note in result.notes" ng-if="result.notes && result.notes.length">\n                          {{note.text}}\n                      </li>\n                      <li class="list-group-item" ng-if="!result.notes || !result.notes.length">\n                          <alert class="no-list" type="warning">None</alert>\n                      </li>\n                  </ul>\n              </div>\n          </div>\n      </div>\n</div>\n<div class="modal-footer">\n    <!-- <a href="/proxy/v1/pdf" download>link</a> -->\n    <button ng-click="downloadPDF()" class="btn btn-primary">Download</button>\n    <button class="btn btn-primary" ng-click="ok()">Ok</button>\n</div>\n');
}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/reports/rpm/gatheringReport.html",'<div id="rpm-report" class="modal-body" style="position: relative">\n    <div class="text-center">\n      <p>Gathering Report Data</p>\n      <p>Please standby...</p>\n      <p>This may take few minutes based on your report criteria</p>\n      <p>Please do not leave or refresh page</p>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/reports/rpm/rpm.html",'<div id="patient-usage" class="modal-body" style="position: relative">\n    <div class="text-center">\n      <h3>RPM Report</h3>\n    </div>\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <div class="row">\n          <div ng-class="customDates ? \'col-md-3\' : \'col-md-offset-1 col-md-4\'">\n            <select name="days" required class="form-control" ng-model="day.selectedDay" ng-selected="days[0].id" ng-options="day.id as day.name for day in days">\n            </select>\n          </div>\n          <div ng-class="customDates ? \'col-md-3\' : \'col-md-offset-1 col-md-4\'" ng-if="globalAdmin">\n            <select name="days" required class="form-control" ng-model="org.id" ng-options="org.id as org.name for org in orgs"></select>\n          </div>\n          <div ng-class="customDates ? \'col-md-6\' : (globalAdmin ? \'col-md-12\' : \'col-md-7\')" class="text-center" ng-if="!customDates" style="margin-top:8px;">\n            <a ng-click="requestReport()" class="non-dec pointer" aria-controls="dashboard" role="tab" data-toggle="tab">Request Report</a>\n          </div>\n          <div ng-class="customDates ? (globalAdmin ? \'col-md-6\' : \'col-md-8\') : \'col-md-12\'" ng-if="customDates">\n            <div class="row">\n              <p class="input-group" style="width:50%; float:left;">\n                  <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="date.dt1" is-open="open.opened1"  max-date="maxDate" datepicker-options="dateOptions"  ng-required="true" close-text="Close" />\n                  <span class="input-group-btn">\n                    <button type="button" class="btn btn-default" ng-click="openCalender1($event)"><i class="glyphicon glyphicon-calendar"></i></button>\n                  </span>\n              </p>\n              <p class="input-group" style="width:50%;float:left;">\n                  <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="date.dt2" is-open="open.opened2" min-date="minDate"  max-date="maxDate" datepicker-options="dateOptions"  ng-required="true" close-text="Close" />\n                  <span class="input-group-btn">\n                    <button type="button" class="btn btn-default" ng-click="openCalender2($event)"><i class="glyphicon glyphicon-calendar"></i></button>\n                  </span>\n              </p>\n            </div>\n          </div>\n        </div>\n        <div class="row text-center"  ng-if="customDates">\n          <a ng-click="requestReport()" class="non-dec" aria-controls="dashboard" role="tab" data-toggle="tab" export-to-csv="patient-usage-data">Request Report</a>\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" ng-click="ok()">Close</button>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/reports/rpm/rpmReport.html",'<div id="rpm-report" class="modal-body" style="position: relative">\n    <div class="row" ng-if="hasResult">\n      <div class="text-center">\n        <h3>Your report is ready!</h3>\n        <a href="{{getURL()}}" target=\'_self\' class="non-dec pointer" download>Download Report</a>\n      </div>\n    </div>\n    <div class="row" ng-if="!hasResult">\n      <alert class="no-list text-center" type="warning">No patients in this date range</alert>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" ng-click="ok()">Close</button>\n    </div>\n</div>\n')}]),angular.module("templates").run(["$templateCache",function(n){n.put("javascripts/app/features/provider/monitor/details/details.html",'<div  class="modal-body" style="position: relative;" wait="waiting">\n    <div class="text-center">\n      <h3>Details</h3>\n    </div>\n    <div class="modal-body">\n        <div class="row" ng-repeat="result in results" style="border-top: 1px solid #e5e5e5;padding:10px 0px">\n            <div class="col-md-9" style="border-right: 1px solid #e5e5e5;">\n                <div >\n                    {{result.extra.question}}\n                </div>\n            </div>\n            <div class="col-md-2">\n                <div ng-if="result.extra.options.length === 2 && result.extra.answer == 2" style="color: green">\n                    {{result.extra.answer}}\n                </div>\n                <div ng-if="result.extra.options.length === 2 && result.extra.answer == 4" style="color: red">\n                    {{result.extra.answer}}\n                </div>\n                <div ng-if="result.extra.options.length !== 2">\n                    {{result.extra.answer}}\n                </div>\n            </div>\n        </div>\n  </div>\n   <div class="modal-footer">\n     <div class="pull-right">\n        <button class="btn btn-primary" ng-click="close()">Close</button>\n     </div>\n     <div class="clear"></div>\n   </div>\n</div>\n')}]);
"use strict";angular.module("synsormed.directives.dragdrop",[]).directive("modaldraggable",["$document","$timeout",function(e,t){return{restrict:"A",link:function(t,r,i){var n=$(r).parents(".modal-dialog"),s=Math.max(0,(window.innerWidth-n.outerWidth())/2);$(n).parents(".modal").css({height:"0px",width:"0px"}),n.css({position:"fixed",cursor:"move",left:s+"px"});var o=0,a=0,l=s,c=0,d=function(e){l=e.screenX-o,c=e.screenY-a,n.css({top:c+"px",left:l+"px"})},u=function(){e.unbind("mousemove",d),e.unbind("mouseup",u)},m=function(t){t.preventDefault(),o=t.screenX-l,a=t.screenY-c,e.on("mousemove",d),e.on("mouseup",u)};n.on("mousedown",m)}}}]),angular.module("AuraDropdownModule",["ui.bootstrap"]).controller("AuraDropdownController",["$scope",function(e){e.select=function(t){e.keyIndex?e.selected=t[e.keyIndex]:e.selected=t};var t=function(e,t,r){for(var i=0;i<e.length;i++)if(e[i][t]==r)return e[i];return!1};e.getOption=function(t){return e.itemIndex?t[e.itemIndex]:t},e.getSelected=function(){var r=e.keyIndex?t(e.items,e.keyIndex,e.selected):e.selected;return e.getOption(r)}}]).directive("auraDropdown",function(){return{restrict:"E",templateUrl:"javascripts/app/directives/dropdown/dropdown.html",scope:{selected:"=selected",items:"=items",keyIndex:"@key",itemIndex:"@item"},controller:"AuraDropdownController"}}),angular.module("synsormed.directives.exportCSV",[]).directive("exportToCsv",function(){return{restrict:"A",link:function(e,t,r){console.log("inside export file"),t.bind("click",function(e){var t=r.exportToCsv;if(t){var i=document.getElementById(t);if(i){for(var n="",s=0;s<i.rows.length;s++){for(var o=i.rows[s].cells,a=0;a<o.length;a++)n=n+o[a].innerHTML+",";n=n.substring(0,n.length-1),n+="\n"}n=n.substring(0,n.length-1);var l=$("<a/>",{style:"display:none",href:"data:application/octet-stream;base64,"+btoa(n),download:t+".csv"}).appendTo("body");l[0].click(),l.remove()}}})}}}),angular.module("synsormed.directives.exportPDF",[]).directive("exportToPdf",function(){return{restrict:"A",link:function(e,t,r){t.bind("click",function(t){var i=r.exportToPdf;if(i){var n=$("#"+i),s=n.width(),o=[595.28,841.89],a=r.pdfTitle||"SynsorMed Title",l=function(){return n.width(1.33333*o[0]-80).css({"max-width":"none"}),html2canvas(n,{imageTimeout:2e3,removeContainer:!0})},c=function(e,t,r){var i=e.getStringUnitWidth(t)*e.internal.getFontSize()/e.internal.scaleFactor,n=(e.internal.pageSize.width-i)/2;e.text(n,r,t)};e.$emit("wait:start"),l().then(function(t){n.width(s);var r=t.toDataURL("image/png"),o=new jsPDF({unit:"px",format:"a4"});c(o,a,25),o.addImage(r,"JPEG",20,35),o.save(i+".pdf"),e.$emit("wait:stop")})["catch"](function(){n.width(s),e.$emit("wait:stop")}),n.width(s)}})}}}),angular.module("synsormed.directives.education",[]).directive("education",[function(){return{restrict:"E",templateUrl:"javascripts/app/directives/education-module/education.html",controller:"EducationDirectiveController",scope:{displayDiseases:"=displayDiseases",diseases:"=diseases",diseasesId:"=diseasesId",isEducationChecked:"=isEducationChecked"}}}]).controller("EducationDirectiveController",["$scope",function(e){e.temp={id:e.diseasesId?e.diseasesId:e.diseases.length?e.diseases[0].id:null},e.tempDiseases={displayDiseases:e.isEducationChecked||null};var t=e.$watch("temp.id",function(){e.diseasesId=e.temp.id?e.temp.id:null});e.$watch("tempDiseases.displayDiseases",function(t){e.isEducationChecked=!!t,e.tempDiseases.displayDiseases=!!t}),e.$on("$destroy",function(){t()})}]),angular.module("synsormed.directives.datepicker",["ui.bootstrap.datepicker"]).directive("datepickerAddon",["$timeout",function(e){return{restrict:"A",scope:{currentDate:"="},link:function(t,r){e(function(){var e=r.find("[datepicker]"),i=angular.element(e).controller("datepicker"),n=angular.element(e).isolateScope(),s=n.$watch(function(){return i.activeDate},function(e,r){t.currentDate=e});n.$on("destroy",function(){s()})},0)}}}]),angular.module("synsormed.directives.indicatorList",["synsormed.services.monitor"]).controller("IndicatorListDirectiveController",["$scope","$modal","synsormed.services.MonitorMeasurementService",function(e,t,r){e.displayDiseases=!!e.diseases.length,e.removeIndicator=function(t,r){if(r.id){var i=confirm("Do you want to delete this indicator ?");return void(i&&e.$emit("delete:monitor:measurement",{id:r.id,index:t}))}_.pullAt(e.monitorMeasurements,t)},e.getCurrentMeasurementName=function(t){var r=_.find(e.measurements,function(e){return e.id==t});return r?r.display_name?r.display_name:r.name:null},e.monitorOauthLink=function(r,i,n){var s=t.open({templateUrl:"javascripts/app/directives/indicator-list/service-list.html",controller:"MonitorOauthDirectiveController",windowClass:"monitor-service-modal",resolve:{monitorId:function(){return i},measurementId:function(){return r},monitorMeasurementId:function(){return n}}});s.result.then(function(t){return e.$emit("wait:start"),t?void e.$emit("monitor:edit:popup:refresh"):void e.$emit("notification",{type:"danger",message:"Synsormed Connected Failed"})}),s.result["finally"](function(){e.$emit("wait:stop")})}}]).controller("MonitorOauthDirectiveController",["$scope","$window","$timeout","$interval","$modalInstance","measurementId","monitorId","monitorMeasurementId","synsormed.services.MonitorServicesService","synsormed.services.MonitorService","localStorageService","synsormed.services.MonitorMeasurementService",function(e,t,r,i,n,s,o,a,l,c,d,u){e.services=null,e.$emit("wait:start"),l.getServicesForMonitor(o,s).then(function(t){return e.$emit("wait:stop"),e.services=_.filter(t,function(e){return 0!==parseInt(e.version)}),l.getConnectedService(o).then(function(t){for(var r=0;r<e.services.length;r++)for(var i=0;i<t.length;i++)e.services[r].name==t[i].service_name&&(e.services[r].connected=t[i])})})["catch"](function(t){console.log(t),e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server Error"})}),e.ok=function(){n.dismiss("close")};var m=null;e.startOauth=function(r){e.isConnected=r.connected;var s=450,l=450,c=screen.width/2-s/2,d=screen.height/2-l/2;if(e.isConnected)e.$emit("wait:start"),u.setOauthDataForMeasurement(o,a,{service_name:r.name},!0).then(function(t){e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"Synsormed Connected"}),e.$emit("monitor:edit:popup:refresh")}),n.close(!0);else{var p=t.open(r.apiUrl+"?monitorId="+o+"&measurementMapId="+a,r.title,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=no, copyhistory=no, width="+s+", height="+l+", top="+d+", left="+c);m=r.name;var v=i(function(){p.closed&&(i.cancel(v),u.setOauthDataForMeasurement(o,a,{service_name:r.name},!0).then(function(t){e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"Synsormed Connected"}),n.close(!0),e.$emit("monitor:edit:popup:refresh")}))},900)}}}]).directive("indicatorList",[function(){return{restrict:"E",templateUrl:"javascripts/app/directives/indicator-list/indicator-list.html",controller:"IndicatorListDirectiveController",scope:{measurements:"=measurements",monitorMeasurements:"=monitorMeasurements",monitorId:"=monitorId",diseases:"=diseases",leaderboard:"=leaderboard",statusSurvey:"=statusSurvey"}}}]),angular.module("synsormed.directives.healthindicator",[]).directive("healthIndicator",[function(){return{restrict:"E",templateUrl:"javascripts/app/directives/health-indicator-selection/healthindicator.html",controller:"HealthIndicatorDirectiveController",scope:{measurementId:"=selectMeasurementId",measurements:"=measurements",upperbound:"=upperbound",lowerbound:"=lowerbound",repeatInterval:"=repeatInterval",sensitivity:"=sensitivity",serviceName:"=serviceName",oauthAvailable:"=oauthAvailable",isOutofBound:"=isOutofBound",isMissed:"=isMissed",diseases:"=diseases",displayDiseases:"=displayDiseases",diseasesId:"=diseasesId",statusSurvey:"=statusSurvey",statusSurveyId:"=statusSurveyId",isEducationChecked:"=isEducationChecked"}}}]).controller("HealthIndicatorDirectiveController",["$scope",function(e){e.getCurrent=function(t){return _.find(e.measurements,function(e){return e.id==t})},e.repeatIntervalInHours=e.repeatInterval/3600,e.$watch("repeatIntervalInHours",function(){e.repeatInterval=3600*e.repeatIntervalInHours},!0),e.measurementId||(e.measurementId=12,e.repeatIntervalInHours=24,e.sensitivity=2),e.monitoringIntervals=[{id:24,name:"Daily"}],e.$watch("measurementId",function(){"Steps"==e.getCurrent(e.measurementId).name||"Sleep"==e.getCurrent(e.measurementId).name?(e.monitoringIntervals=[{id:24,name:"Daily"}],e.repeatIntervalInHours=24):e.monitoringIntervals=[{id:12e3,name:"N/A"},{id:24,name:"Daily"}]})}]).directive("optionClassExpr",["$compile","$parse",function(e,t){var r=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/;return{restrict:"A",link:function(e,i,n){var s=n.ngOptions;if(s){var o=s.match(r);o&&(o[7],t(n.optionClassExpr),e.$watchCollection(function(){return i.children()},function(e){angular.forEach(e,function(e){var e=angular.element(e),t=e.val();8!=t&&e.attr("class",n.optionClassExpr)})}))}}}}]),angular.module("synsormed.directives.indicatorMetrics",[]).controller("IndicatorMetricsDirectiveController",["$scope",function(e){e.indicators&&e.indicators.length&&_.forEach(e.indicators,function(e){if("status"==e.name.toLowerCase()&&e.results&&e.results.displayData&&e.results.displayData[2]){var t=moment(e.results.displayData[2],"YYYY-MM-DDTHH:mm:ss.sssZ").format("LT"),r=moment(e.results.displayData[2],"YYYY-MM-DDTHH:mm:ss.sssZ").format("L");e.results.displayData[2]=t+" "+r}})}]).directive("indicatorMetrics",function(){return{restrict:"E",templateUrl:"javascripts/app/directives/indicator-metrics/indicator-metrics.html",controller:"IndicatorMetricsDirectiveController",scope:{indicators:"=indicators"},link:function(){},replace:!0,transclude:!0}}),angular.module("synsormed.directives.safereading",["modelOptions"]).controller("SafeReadingDirectiveController",["$scope","$window",function(e,t){var r,i,n,s,o,a,l=e.upperbound,c=e.lowerbound,d=e.measurement?e.measurement.name:"",u=e.statusSurveyId||!1;e.selected={statusSurveyId:e.statusSurveyId?e.statusSurveyId:0},e.$watch("selected.statusSurveyId",function(r,i){u&&r&&u!=r?t.confirm("Changing the survey will delete the previous submissions from this patient.")?e.statusSurveyId=r||null:e.selected.statusSurveyId=u:e.statusSurveyId=r||null});var m=function(e,t){return t[0]<=parseInt(e[0])&&parseInt(e[0])<=t[1]&&t[0]<=parseInt(e[1])&&parseInt(e[1])<=t[1]};e.modelOptionsConfig={debounce:1500},e.$watch("measurement.name",function(t){switch(t=t||"",t.toLowerCase()){case"blood pressure":if(r&&i&&n&&s&&(r(),i(),n(),s()),e.bpslider={min:90,max:120,min1:60,max1:80,ceil:200,floor:1},isNaN(e.upperbound)){var u=e.upperbound.split("/"),p=e.lowerbound.split("/");e.bpslider.min=parseInt(u[0])||90,e.bpslider.max=parseInt(u[1])||120,e.bpslider.min1=parseInt(p[0])||60,e.bpslider.max1=parseInt(p[1])||80}r=e.$watch("bpslider.min",function(){e.upperbound=e.bpslider.min+"/"+e.bpslider.max}),i=e.$watch("bpslider.max",function(){e.upperbound=e.bpslider.min+"/"+e.bpslider.max}),n=e.$watch("bpslider.min1",function(){e.lowerbound=e.bpslider.min1+"/"+e.bpslider.max1}),s=e.$watch("bpslider.max1",function(){e.lowerbound=e.bpslider.min1+"/"+e.bpslider.max1});break;case"steps":case"glucose":case"oxygen flow":case"weight":case"heartrate":case"sleep":case"temperature":case"breath":case"caloric intake":e.slider={min:2e3,max:2500,ceil:3500,floor:1200};case"oxygen saturation":default:o&&a&&(o(),a()),"steps"==t.toLowerCase()&&(e.slider={min:2e3,max:1e4,ceil:5e4,floor:1e3}),"sleep"==t.toLowerCase()&&(e.slider={min:6,max:10,ceil:24,floor:1}),"glucose"==t.toLowerCase()&&(e.slider={min:80,max:125,ceil:200,floor:1,step:.5,decimal:2}),"oxygen flow"==t.toLowerCase()&&(e.slider={max:2,ceil:10,floor:0,step:.5,decimal:1}),"weight"==t.toLowerCase()&&(e.slider={min:150,max:250,ceil:600,floor:1}),"heartrate"==t.toLowerCase()&&(e.slider={min:60,max:100,ceil:200,floor:1}),"temperature"==t.toLowerCase()&&(e.slider={min:97,max:100,ceil:115,floor:90}),"breath"==t.toLowerCase()&&(e.slider={min:10,max:30,ceil:70,floor:1}),"oxygen saturation"==t.toLowerCase()&&(e.slider={min:94,max:99,ceil:100,floor:80}),"status"==t.toLowerCase()&&(e.slider={min:0,max:0,ceil:0,floor:0},e.statussurvey=5),"peak flow rate"==t.toLowerCase()&&(e.slider={min:500,max:800,ceil:800,floor:100},"peak flow rate"==d.toLowerCase()||l||c||(e.lowerbound=500,e.upperbound=800)),e.slider.max&&(e.sliderValue=10*e.slider.max-10),e.lowerbound&&e.upperbound&&m([e.lowerbound,e.upperbound],[e.slider.floor,e.slider.ceil])&&(e.slider.min=isNaN(e.lowerbound)?e.slider.min:parseFloat(e.lowerbound),e.slider.max=isNaN(e.upperbound)?e.slider.max:parseFloat(e.upperbound)),o=e.$watch("slider.min",function(){e.lowerbound=e.slider.min}),a=e.$watch("slider.max",function(){e.slider.max<1?e.sliderValue=0:e.sliderValue=10*e.slider.max-10,e.upperbound=e.slider.max})}})}]).directive("safeReading",function(){return{restrict:"E",templateUrl:"javascripts/app/directives/safereading/safereading.html",controller:"SafeReadingDirectiveController",scope:{measurement:"=measurement",upperbound:"=upperbound",lowerbound:"=lowerbound",statusSurvey:"=statusSurvey",statusSurveyId:"=statusSurveyId"}}}),angular.module("synsormed.directives.stackedToggleProgressBar",[]).controller("StackedToggleProgressDirectiveController",["$scope",function(e){var t;e.$watch("data",function(e){t=0,_.forEach(e,function(e){t+=e.count}),_.forEach(e,function(e){e.percent=(e.count/t*100).toFixed(1)})})}]).directive("stackedToggleProgress",function(){return{restrict:"E",templateUrl:"javascripts/app/directives/stacked-toggle-progress-bar/stacked-toggle-progress-bar.html",controller:"StackedToggleProgressDirectiveController",scope:{data:"=data",doc:"=for",total:"=total"},link:function(){var e=$("#stackedProgressBar"),t=$("#toggle-switch-wrapper");e.click(function(){t.toggleClass("switched")})},replace:!0,transclude:!0}}),angular.module("synsormed.directives.toogleInputTextarea",[]).directive("toogleInputTextarea",["$compile",function(e){return{restrict:"A",scope:{ngModel:"="},link:function(t,r,i){$(r).is("input")&&$(r).focusin(function(){var n="<textarea "+(i["class"]?'class="'+i["class"]+'"':"")+'ng-model="ngModel" toogle-input-textarea></textarea>',s=e(n)(t);r.replaceWith(s),$(s).focus(),t.$apply()}),$(r).is("textarea")&&$(r).focusout(function(){var n='<input type="text" '+(i["class"]?'class="'+i["class"]+'"':"")+' ng-model="ngModel" toogle-input-textarea />',s=e(n)(t);r.replaceWith(s),t.$apply()})}}}]),angular.module("synsormed.directives.toggleList",[]).controller("ToggleListDirectiveController",["$scope",function(e){e.visible=!1,e.toggle=function(){e.visible=!e.visible}}]).directive("toggleList",function(){return{restrict:"E",templateUrl:"javascripts/app/directives/toggle-list/toggle-list.html",controller:"ToggleListDirectiveController",scope:{listTitle:"@"},replace:!0,transclude:!0}}),angular.module("synsormed.components.wait",[]).directive("wait",["synsormed.components.wait.WaitService",function(e){return{restrict:"A",scope:{wait:"="},link:function(t,r){t.$on("$destroy",function(){e.stop(r)}),t.$watch("wait",function(){t.wait?e.start(r):e.forceStop(r)})}}}]).service("synsormed.components.wait.WaitService",[function(){return{defaultTarget:"body",defaultOpts:{lines:13,length:20,width:10,radius:30,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},targetOpts:{length:10,radius:10,width:4},start:function(e){var t=e,r=$.extend({},this.defaultOpts);if(e&&$.extend(r,this.targetOpts),e||(e=$(this.defaultTarget)),!e.data("spinner")){e.data("spinner",new Spinner(r));var i=$("<div class='overlay'></div>");t||i.attr("id","overlay"),e.data("overlay",i),e.data("waiting",0)}e.data("waiting")||(e.data("overlay").appendTo(e),e.data("spinner").spin(e.data("overlay")[0])),e.data("waiting",e.data("waiting")+1)},stop:function(e){e||(e=$(this.defaultTarget)),e.data("waiting",e.data("waiting")-1),e.data("waiting")<0&&e.data("waiting",0),0===e.data("waiting")&&e.data("overlay")&&(e.data("overlay").detach(),e.data("spinner").stop())},forceStop:function(e){e||(e=$(this.defaultTarget)),e.data("waiting",0),this.stop(e)}}}]);
"use strict";angular.module("synsormed.features.admin",["synsormed.features.admin.insights"]),angular.module("synsormed.features.ehr",["synsormed.features.ehr.monitor","synsormed.features.ehr.graph"]),angular.module("synsormed.features.emergency",["synsormed.services.user"]).controller("EmergencyAccessController",["$scope","$location","synsormed.services.UserService",function(e,t,n){e.alerts=[{type:"warning",msg:"Use organization OTP here"}],e.submit=function(){e.form.$valid&&(e.$emit("wait:start"),n.emergencyAccess(e.otpCode).then(function(i){e.$emit("wait:stop"),n.setCachedUser(i),t.path("/settings")})["catch"](function(t){e.$emit("wait:stop"),e.alerts=[{msg:"You have entered an Invalid OTP",type:"danger"}],console.log("err",t)}))}}]),angular.module("synsormed.features.insights",["synsormed.services.practice","synsormed.services.user"]).controller("InsightsController",["$scope","synsormed.services.UserService",function(e,t){e.user=t.fetchCachedUser(),e.$emit("pageLoaded",{title:"Insights"}),e.loadChart=function(){e.$broadcast("loadChart",{org_id:e.user.org_id})},e.loadCCM=function(){e.$broadcast("loadCCM",{org_id:e.user.org_id})},e.loadSurveyChart=function(){e.$broadcast("loadSurveyChart",{org_id:e.user.org_id})},e.loadLeaderboard=function(){e.$broadcast("loadLeaderboard",{org_id:e.user.org_id})}}]).controller("InsightsDashboardController",["$scope","synsormed.services.UserService","synsormed.services.InsightService",function(e,t,n){e.insights=null,e.loadPracticeInsights=function(t){e.$emit("wait:start"),n.getPracticeInsights(t).then(function(t){e.insights=t,e.$emit("wait:stop")})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})})}}]).controller("InsightsUserController",["$scope","$modal","$filter","synsormed.services.UserService","synsormed.services.InsightService",function(e,t,n,i,o){i.fetchAllUsers().then(function(t){e.users=n("filter")(t,{role:"Provider"})}),e.getDetails=function(e){t.open({templateUrl:"javascripts/app/features/insights/details.html",controller:"InsightsUserDetailsController",resolve:{user:function(){return $.extend({},e)},encounterCount:function(){return o.countEncounters(e.id,7)["catch"](function(){return 0})},insights:function(){return o.getProviderInsights(e.id)}}})}}]).controller("InsightsUserDetailsController",["$scope","$modalInstance","user","encounterCount","insights",function(e,t,n,i,o){e.user=n,e.encounterCount=i,e.insights=o,e.ok=function(){t.dismiss("cancel")}}]).controller("InsightsGraphController",["$scope","$filter","synsormed.services.InsightService",function(e,t,n){e.$on("loadChart",function(t,n){e.days=7}),e.$watch("days",function(){e.loadPracticeDeepInsights(e.user.org_id,e.days-1)}),e.chartSeries=[{showInLegend:!1,data:[],type:"column"}],e.xAxis={gridLineWidth:0,labels:{enabled:!0,style:{fontWeight:"bold"}},title:{text:null},categories:[]},e.loadPracticeDeepInsights=function(t,i){i&&(e.$emit("wait:start"),n.getPracticeInsightSeries(t,i).then(function(t){e.chartSeries[0].data=t.series,e.xAxis.categories=t.categories,e.$emit("wait:stop")})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}))},e.chartConfig={options:{navigation:{buttonOptions:{enabled:!1}},chart:{type:"column",backgroundColor:"rgba(255, 255, 255, 0.1)"},plotOptions:{column:{states:{hover:{color:{linearGradient:{x1:0,y1:1,x2:0,y2:0},stops:[[0,"#F05F3A"],[1,"#EF3809"]]}}},color:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#00918a"],[1,"#00ABA2"]]}}},tooltip:{borderWidth:0,useHTML:!0,backgroundColor:"#FFFFFF",formatter:function(){return'<table class="text-left table-condensed"><tr><td><b>'+this.point.extra.calls+"</b></td><td>Encounters</td></tr><tr><td><b>"+t("secondsToHoursString")(this.point.extra.duration)+"</b></td><td> Total Call Time</td></tr><tr><td><b>"+t("secondsToHoursString")(parseInt(this.point.extra.duration/this.point.extra.active_calls))+"</b></td><td> Avg. Call Duration</td></tr><tr><td><b>"+t("secondsToHoursString")(parseInt(this.point.extra.wait/this.point.extra.active_calls))+"</b></td><td> Avg. Wait Duration</td></tr></table>"}},yAxis:{gridLineWidth:0,labels:{enabled:!1},title:{text:null}},xAxis:e.xAxis,series:e.chartSeries},series:e.chartSeries,title:{text:null},credits:{enabled:!1},loading:!1,xAxis:e.xAxis}}]).controller("InsightsCCMController",["$scope","$element","synsormed.services.InsightService",function(e,t,n){e.logs=null,e.days=7,e.safeLevel=1200,e.getLogs=function(t,i){i=i||7,i--,e.$emit("wait:start"),n.getPracticeCCMInsights(t,i).then(function(t){e.logs=t,e.$emit("wait:stop")})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})})},e.$on("loadCCM",function(t,n){null==e.logs&&e.getLogs(n.org_id,e.days)}),e.$watch("days",function(){t.is(":visible")&&e.getLogs(e.user.org_id,e.days)})}]).controller("InsightsSurveyGraphController",["$scope","synsormed.services.InsightService",function(e,t){e.$on("loadSurveyChart",function(t,n){e.loadPracticeSurveyResponse(n.org_id)}),e.chartSeries=[{showInLegend:!1,data:[],type:"column"}],e.xAxis={gridLineWidth:0,labels:{enabled:!0,style:{fontWeight:"bold"}},title:{text:null},categories:[]},e.loadPracticeSurveyResponse=function(n){e.$emit("wait:start"),t.getSurveyResponseInsights(n).then(function(t){console.log(t.series),e.chartSeries[0].data=t.series,e.xAxis.categories=t.categories,e.$emit("wait:stop")})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})})},e.chartConfig={options:{navigation:{buttonOptions:{enabled:!1}},chart:{type:"column",backgroundColor:"rgba(255, 255, 255, 0.1)"},plotOptions:{column:{stacking:"normal",states:{hover:{color:{linearGradient:{x1:0,y1:1,x2:0,y2:0},stops:[[0,"#F05F3A"],[1,"#EF3809"]]}}},color:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#00918a"],[1,"#00ABA2"]]}}},tooltip:{borderWidth:0,useHTML:!0,backgroundColor:"#FFFFFF",formatter:function(){return'<table style="table-layout:fixed;width:300px;" class="text-left"><tr><td><b> Question : </b></td><td><span class="wrap">'+this.point.extra.question+"</span></td></tr><tr><td><b>Positive : </b></td><td>"+this.point.extra.positive+"</td></tr><tr><td><b>Negative : </b></td><td>"+this.point.extra.negative+"</td></tr></table>"}},yAxis:{gridLineWidth:0,labels:{enabled:!1},title:{text:null},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"grey"},formatter:function(){return this.total+"%"}}},xAxis:e.xAxis,series:e.chartSeries},series:e.chartSeries,title:{text:null},credits:{enabled:!1},loading:!1,xAxis:e.xAxis}}]).controller("InsightsLeaderboardController",["$scope","synsormed.services.InsightService",function(e,t){e.pageCount=0;var n=function(t){if(t.length<e.pagination.pageSize)return t;Math.ceil(t.length/e.pagination.pageSize)<e.pagination.page&&(e.pagination.page=e.pagination.page-1);var n=e.pagination.page*e.pagination.pageSize,i=(e.pagination.page-1)*e.pagination.pageSize;return n>=t.length&&(n=t.length),t.slice(i,n)},i=function(){var t=e.selected.name.toLowerCase();e.pageCount=Math.ceil(e.allRecords[t].length/e.pagination.pageSize),e.pages=[];for(var n=1;n<=e.pageCount;n++)e.pages.push(n)},o=function(t){t=t.toLowerCase();var o=e.allRecords[t];o=o.sort(function(e,t){return parseInt(e.points)<parseInt(t.points)?1:parseInt(e.points)>parseInt(t.points)?-1:0}),e.currentData=n(o),i()};e.pagination={pageSizes:[5,10,25,50,100],pageSize:5,page:1,finalMonitors:[]},e.selected={},e.currentData=[],e.getLeaderboardInsights=function(n){e.$emit("wait:start"),t.getLeaderboardInsights(n).then(function(t){return e.$emit("wait:stop"),e.allRecords=t,e.dataKeys=_.map(t,function(e,t){var n=t.charAt(0).toUpperCase()+t.slice(1);return{name:n}}),!(!e.dataKeys||!e.dataKeys.length)&&void(e.selected.name=e.dataKeys[0].name)})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})})},e.pageTurn=function(t){1==e.pagination.page&&t<0||e.pagination.page==e.pageCount&&t>0||(e.pagination.page=e.pagination.page+t)},e.pageTo=function(t){e.pagination.page=t},e.$watch("selected.name",function(t){return!(!t||!e.allRecords)&&(t=t.toLowerCase(),void o(t))}),e.$watch("pagination.pageSize",function(t,n){t!=n&&(e.pagination.page=1);var i=e.selected.name;i&&o(i)}),e.$watch("pagination.page",function(){var t=e.selected.name;t&&o(t)}),e.$on("loadLeaderboard",function(t,n){e.getLeaderboardInsights(n.org_id)})}]),angular.module("synsormed.features.forgot",["synsormed.services.user"]).controller("ForgotPasswordController",["$scope","$location","synsormed.services.UserService",function(e,t,n){e.email=null,e.alerts=[{type:"warning",msg:"Only Admin can reset password from here"}],e.submit=function(){e.form.$valid&&(e.$emit("wait:start"),n.resetPasswordLink(e.email).then(function(n){e.$emit("wait:stop"),t.path("/forgot/reset")})["catch"](function(t){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:t.data||"Server error"})}))}}]).controller("ResetPasswordController",["$scope","$location","synsormed.services.UserService",function(e,t,n){e.data={email:null,code:null,newPassword:null,confirmPassword:null},e.alerts=[{type:"warning",msg:"Please use code you received in email"}],e.$watch("data",function(){e.data.newPassword&&e.data.confirmPassword&&e.data.newPassword!=e.data.confirmPassword?(e.form.newPassword.$dirty&&e.$broadcast("setInvalid:newPassword","New Password and Confirm Password must match"),e.form.confirmPassword.$dirty&&e.$broadcast("setInvalid:confirmPassword","")):e.form&&(e.form.newPassword.$dirty&&e.$broadcast("setValid:newPassword","New Password and Confirm Password must match"),e.form.confirmPassword.$dirty&&e.$broadcast("setValid:confirmPassword",""))},!0),e.submit=function(){return e.data.newPassword!=e.data.confirmPassword?(e.$broadcast("setInvalid:newPassword","New Password and Confirm Password must match"),void e.$broadcast("setInvalid:confirmPassword","")):e.data.code?(e.$broadcast("setValid:code","This field is required"),void(e.form.$valid&&(e.$emit("wait:start"),n.resetPasswordViaCode(e.data).then(function(n){e.$emit("wait:stop"),t.path("/forgot/success")})["catch"](function(t){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:t.data||"Server error"})})))):void e.$broadcast("setInvalid:code","This field is required")}}]).controller("ForgotSuccessController",["$scope","$location",function(e,t){e.alerts=[{type:"success",msg:"Password Reset was successful"}],e.submit=function(){t.path("/login")}}]),angular.module("synsormed.features.login",["synsormed.services.user"]).controller("LoginController",["$scope","synsormed.services.UserService","$route","$location","localStorageService",function(e,t,n,i,o){var r="savedEmail";e.rememberMe=!!o.get(r),e.passwordView=!1,e.rememberMe&&(e.email=o.get(r)),i.search().showRegistrationMessage&&(e.showRegistrationMessage=!0),e.submit=function(){console.log("redirectRequestUrl()");var n=t.redirectPath();console.log(n),e.$broadcast("validate"),e.form.$valid&&(e.$emit("wait:start"),$("input").trigger("change"),t.login(e.email,e.password).then(function(a){if(e.$emit("wait:stop"),t.setCachedUser(a),e.rememberMe?o.set(r,e.email):o.remove(r),n)i.path(n);else switch(a.role.toLowerCase()){case"orgcreator":case"superadmin":i.path("/monitor");break;case"admin":i.path("/monitor");break;case"provider":i.path("/monitor");break;case"user":i.path("/generateCode")}})["catch"](function(t){e.$emit("wait:stop"),i.search({showRegistrationMessage:null}),e.$emit("wait:stop"),403==t.status?e.alert={msg:"Your organization has been deactivated.",type:"danger"}:"Block User"==t.data?e.alert={msg:"Your account has been blocked. Please try again at a later time.",type:"danger"}:e.alert={msg:"Please verify your username and password and try again.",type:"danger"}}),e.$emit("pageLoaded",{title:"Login"}))}}]),angular.module("synsormed.features.organization",["synsormed.services.user","synsormed.services.practice","synsormed.services.adminInsight"]).controller("OrganizationController",["$scope","$routeParams","$modal","synsormed.services.UserService","synsormed.services.PracticeService","synsormed.services.adminInsight.InsightService",function(e,t,n,i,o,r){var a=t.id;e.org=null,e.changeStatus=function(t){e.$emit("wait:start"),o.changeOrgStatus(t,e.enabled).then(function(){e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"Update Successful"})})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Update Unsuccessful"})})},e.getOrganizationStatistics=function(){e.$emit("wait:start"),r.getOrganizationStatistics(a).then(function(t){e.enabled=t.status,e.org=t,e.$emit("wait:stop")})["catch"](function(){e.org=null,e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})})},e.getOrganizationStatistics(),e.getDetails=function(e){n.open({templateUrl:"javascripts/app/features/organization/details.html",controller:"ProviderStatisticsModalController",resolve:{user:function(){return $.extend({},e)},data:function(){return r.getProviderStatistics(e.id)}}})}}]).controller("ProviderStatisticsModalController",["$scope","$modalInstance","user","data",function(e,t,n,i){e.user=n,e.data=i,e.ok=function(){t.dismiss("cancel")}}]),angular.module("synsormed.features.patient.auth",["synsormed.services.user"]).controller("PatientAuthController",["$scope","$location","synsormed.services.UserService",function(e,t,n){e.submit=function(){e.$broadcast("validate"),e["patient-form"].$valid&&(e.$emit("wait:start"),n.patientLogin(e.patientCode).then(function(i){e.$emit("wait:stop"),i.isMonitor?e.alerts=[{msg:"Please check your patient code and try again.",type:"danger"}]:(e.alerts=[],n.setCachedUser(i),t.path("/patient/call"))})["catch"](function(t){console.log(t),e.$emit("wait:stop"),e.alerts=[{msg:"Please check your patient code and try again.",type:"danger"}]}))}}]),angular.module("synsormed.features.provider",["synsormed.features.provider.visits","synsormed.features.provider.monitor","synsormed.features.provider.showMonitor","synsormed.features.provider.showCode"]),angular.module("synsormed.features.register",["synsormed.services.practice"]).controller("RegisterController",["$scope","$location","synsormed.services.PracticeService","synsormed.services.UserService",function(e,t,n,i){e.adminUser=i.fetchCachedUser(),e.showForm=!0,e.user={},e.practice={},e.$on("setForm",function(t,n){e.form=n}),e.$watch("user",function(){e.passwordPattern=!1,e.user.confirmPassword&&(e.form.password.$invalid&&e.form.password.$error.pattern?e.passwordPattern=!0:e.passwordPattern=!1),e.user.password&&e.user.confirmPassword&&e.user.password!=e.user.confirmPassword?(e.form.password.$dirty&&e.$broadcast("setInvalid:password","Password and Confirm Password must match"),e.form.confirmPassword.$dirty&&e.$broadcast("setInvalid:confirmPassword","")):e.form&&(e.form.password.$dirty&&e.$broadcast("setValid:password","Password and Confirm Password must match"),e.form.confirmPassword.$dirty&&e.$broadcast("setValid:confirmPassword",""))},!0),e.submit=function(){return e.user.password!=e.user.confirmPassword?(e.$broadcast("setInvalid:password","Password and Confirm Password must match"),void e.$broadcast("setInvalid:confirmPassword","")):(e.$broadcast("validate"),void(e.form.$valid&&(e.$emit("wait:start"),n.registerPractice({practice:e.practice,adminUser:e.user}).then(function(n){return e.$emit("notification",{type:"success",message:"Registration Successfull"}),e.$emit("wait:stop"),"OrgCreator"==e.adminUser.role?void t.path("/admin/insights"):void t.path("/organization/"+n.org_id)})["catch"](function(t){e.$emit("wait:stop");var n=(422==t.status?t.data:"Server Error")||"Server Error";e.$emit("notification",{type:"danger",message:n}),console.log(t)}))))}}]),angular.module("synsormed.features.reports",["synsormed.services.user","synsormed.services.report","synsormed.directives.indicatorMetrics"]).controller("ReportsController",["$scope","$modal","users","synsormed.services.UserService",function(e,t,n,i){e.user=i.fetchCachedUser(),e.users=n,e.loadComplianceReport=function(){e.$broadcast("loadComplianceReport")},e.loadRPMReport=function(){t.open({templateUrl:"javascripts/app/features/reports/rpm/rpm.html",controller:"RpmReportController",windowClass:"rpm-report-modal"})},e.loadBillingReport=function(){t.open({templateUrl:"javascripts/app/features/reports/billing/billing.html",controller:"BillingReportController",windowClass:"rpm-report-modal"})}}]).controller("ComplianceReportController",["$scope","$filter","synsormed.services.ReportService",function(e,t,n){var i=e.user;e.pageCount=0,e.filtered=[],e.monitors=[],e.masterMonitors=[],e.reportTitle="SynsorMed Compliance Report "+moment().format("MMM-DD-YYYY").toString(),e.showUser={id:0},e.keyOne={text:"Code",dataKey:"code"},e.keyTwo={text:"Patient name",dataKey:"patientName"};var o=function(t){e.pagination.finalMonitors=_.forEach(e.pagination.finalMonitors,function(e){e.display=e[t]})};e.toggleData=function(){var t=e.keyOne;e.keyOne=angular.copy(e.keyTwo),e.keyTwo=t,o(e.keyOne.dataKey)},e.$watch("showUser.id",function(t){t>0?e.monitors=e.masterMonitors.filter(function(e){return e.providerId===t}):e.monitors=e.masterMonitors,a()}),e.pagination={pageSizes:[5,10,25,50,100],pageSize:5,page:1,finalMonitors:[]};var r=function(t){if(t.length){var n={id:0,name:"All",role:"Provider"};e.users.unshift(n)}};"Admin"===i.role?(e.users=e.users.filter(function(e){return"Provider"===e.role}),r(e.users)):"Provider"===i.role&&(e.users=e.users.filter(function(e){return e.id===i.id})),e.loadComplianceReport=function(){e.$emit("wait:start"),n.getComplianceReport().then(function(t){e.masterMonitors=t,e.monitors=t,a(),e.showUser.id=0,e.$emit("wait:stop")})["catch"](function(t){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."}),console.log(t)})},e.showPrevious=!1,e.showNext=!0,e.pageTurn=function(t){1==e.pagination.page&&t<0||e.pagination.page==e.pageCount&&t>0||(e.pagination.page==e.pageCount-1&&t>0&&(e.showNext=!1,e.showPrevious=!0),2==e.pagination.page&&t<0&&(e.showPrevious=!1,e.showNext=!0),e.pagination.page=e.pagination.page+t)},e.pageTo=function(t){1==t&&(e.showNext=!0,e.showPrevious=!1),t==e.pageCount&&(e.showPrevious=!0,e.showNext=!1),1!=t&&t!=e.pageCount&&(e.showPrevious=!0,e.showNext=!0),e.pagination.page=t},e.$watch("pagination.page",function(){e.pagination.finalMonitors=s(e.filtered)}),e.$watch("pagination.pageSize",function(t,n){t!=n&&(e.pagination.page=1),a()}),e.$on("loadComplianceReport",function(t,n){e.loadComplianceReport()});var a=function(){var n=e.monitors;e.filtered=t("orderBy")(n,"-id"),e.pagination.finalMonitors=s(e.filtered),c();var i=angular.copy(e.keyOne);o(i.dataKey)},s=function(t){if(t.length<e.pagination.pageSize)return t;Math.ceil(t.length/e.pagination.pageSize)<e.pagination.page&&(e.pagination.page=e.pagination.page-1);var n=e.pagination.page*e.pagination.pageSize,i=(e.pagination.page-1)*e.pagination.pageSize;return n>=t.length&&(n=t.length),t.slice(i,n)},c=function(){e.pageCount=Math.ceil(e.filtered.length/e.pagination.pageSize),e.pages=[];for(var t=1;t<=e.pageCount;t++)e.pages.push(t)}}]).controller("PatientSummaryController",["$scope","result","$modalInstance","synsormed.services.ReportService",function(e,t,n,i){e.result=t,e.ok=function(){n.dismiss()},e.downloadPDF=function(){e.$emit("wait:start"),i.getPdfToken(e.result.monitorId).then(function(t){return e.$emit("wait:stop"),i.downLoadPdf(t,e.result.monitorId)})["catch"](function(t){e.$emit("notification",{type:"danger",message:"Unable to download pdf file."}),e.$emit("wait:stop")})}}]).controller("ReportSummaryController",["$scope","$modal","synsormed.services.ReportService",function(e,t,n){e.pagination={pageSize:5,page:1,finalPatients:[]},e.showSummary=function(i){i&&(e.$emit("wait:start"),n.getSummaryReport(i).then(function(n){t.open({templateUrl:"javascripts/app/features/reports/summary/summary.html",controller:"PatientSummaryController",windowClass:"custom-patient-summary",resolve:{result:function(){return n}}}),e.$emit("wait:stop")})["catch"](function(t){e.$emit("notification",{type:"danger",message:"Server error."}),e.$emit("wait:stop"),console.log(t)}))};var i=function(){e.pageCount=Math.ceil(e.patients.length/e.pagination.pageSize),e.pages=[];for(var t=1;t<=e.pageCount;t++)e.pages.push(t)},o=function(t){if(t.length<e.pagination.pageSize)return t;var n=e.pagination.page*e.pagination.pageSize,i=(e.pagination.page-1)*e.pagination.pageSize;return n>=t.length&&(n=t.length),t.slice(i,n)},r=function(){var t=e.patients;e.pagination.finalPatients=o(t),i()};e.pageTurn=function(t){1==e.pagination.page&&t<0||e.pagination.page==e.pageCount&&t>0||(e.pagination.page=e.pagination.page+t)},e.$watch("pagination.page",function(){e.patients&&(e.pagination.finalPatients=o(e.patients))}),e.pageTo=function(t){e.pagination.page=t},e.search=function(){if(e.keyword){var t=e.keyword.replace(/ /g,"");e.$emit("wait:start"),n.searchUser(t).then(function(t){e.patients=t,r(),e.searched=!0,e.$emit("wait:stop"),t&&1==t.length&&e.showSummary(t[0].id)})["catch"](function(t){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."}),console.log(t)})}}}]),angular.module("synsormed.features.settings.patient",["synsormed.services.practice","synsormed.services.user","synsormed.services.network_providers","synsormed.services.patient","synsormed.services.pageState"]).controller("SettingsPatientController",["$scope","$rootScope","$modal","$filter","synsormed.services.PatientService","synsormed.services.UserService","synsormed.services.PatientStateService","synsormed.services.PatientListService",function(e,t,n,i,o,r,a,s){e.patients=[],e.filtered=e.patients,e.users=[],e.messageAlert={noPatients:"There are no patients.",noUsers:"You must have at least one provider added to the system to see patient list",noSearchResults:"No patient in this filter"};var c=r.fetchCachedUser(),d=a.getPatientState(),l=!!d&&d.lastViewedUser;e.pagination={pageSizes:[5,10,25,50,100],pageSize:5,page:d?d.page||1:1,finalPatients:[]};var u=function(){e.pages=[],e.pageCount=Math.ceil(e.totalPatient/e.pagination.pageSize);for(var t=1;t<=e.pageCount;t++)e.pages.push(t)},m=function(t){if(t.length){var n={id:0,name:"All",role:"Provider"};e.users.unshift(n)}},p=function(e){var t=[];return e.forEach(function(e){e.id&&t.push(e)}),t},f=function(){e.$emit("wait:start"),r.fetchAllUsers().then(function(t){e.$emit("wait:stop"),"Admin"===c.role?(e.users=t.filter(function(e){return"Provider"===e.role}),m(e.users)):"Provider"==c.role&&(e.users=t.filter(function(e){return e.id===c.id})),e.showUser={id:l?l:!!e.users.length&&e.users[0].id},g(e.showUser.id)})["catch"](function(t){e.$emit("wait:stop"),console.log(t)})};f();var g=function(t,n,i){e.$emit("wait:start"),e.paranoid=n,s.getPatients(t,n,!0,!1,!1,e.pagination.searchBox).then(function(t){e.totalPatient=t.length,u()}),s.getPatients(t,n,null,i,e.pagination.pageSize,e.pagination.searchBox).then(function(t){e.$emit("wait:stop"),e.patients=t,e.pagination.finalPatients=t,u(),e.pageCount<e.pagination.page&&(e.pagination.page=e.pagination.page-1)})["catch"](function(t){e.$emit("wait:stop"),console.log(t)})};e.refreshPatientList=function(){g()},e.uploadFile=function(){n.open({templateUrl:"javascripts/app/features/settings/uploadPatient.html",controller:"UploadPatientController"})},e.deletedPatients=[{id:1,name:"All Patient"},{id:0,name:"Active Patients"},{id:2,name:"Deleted Patients"}],e.deletedPatient={id:0},e.$watch("deletedPatient.id",function(t){void 0!=t&&e.showUser&&g(e.showUser.id,t)}),e.resetPatient=function(t){var n=confirm("Are you sure you want to reset this patient");n&&(e.$emit("wait:start"),s.resetPatient(t).then(function(){e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"Reset Patient Successfully"}),g(e.showUser.id),e.deletedPatient={id:0}})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}))},e.permanentDeletePatient=function(t){var n=confirm("There is no way to undo this action. Are you sure you want to permanently delete this patient?");n&&(e.$emit("wait:start"),o.deletePatient(t,!0).then(function(){e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"Patient Deleted Permanently"}),g(e.showUser.id),e.deletedPatient={id:0}})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}))},e.pageTo=function(t){e.pagination.page=t,g(e.showUser.id,e.paranoid,t)},e.pageTurn=function(t){1==e.pagination.page&&t<0||e.pagination.page==e.pageCount&&t>0||(e.pagination.page=e.pagination.page+t,g(e.showUser.id,e.paranoid,e.pagination.page))},e.$watch("showUser.id",function(t,n){a.setPatientState({lastViewedUser:!!e.showUser&&e.showUser.id,pageSize:e.pagination.pageSize,page:e.pagination.page}),"undefined"!=typeof t&&g(t)},!0),e.$watch("pagination.pageSize",function(t,n){t!=n&&(e.pagination.page=1),e.pagination.pageSize=t,g()},!0),e.$watch("pagination.searchBox",function(){g(),u()},!0),e.editPatient=function(t){var i=n.open({templateUrl:"javascripts/app/features/settings/editPatient.html",controller:"SettingsPatientEditController",resolve:{patient:function(){return $.extend({},t)},users:function(){return p(e.users)}}});i.result.then(function(n){t.id?$.extend(t,n):e.patients.push(n),g(e.showUser.id)})},e.$on("loadPatientData",function(e,t){f()}),e.addPatient=function(){e.editPatient({})},e.deletePatient=function(t){confirm("Are you sure you want to archive this patient?")&&(e.$emit("wait:start"),o.deletePatient(t.id).then(function(){e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"Patient Deleted"}),g(e.showUser.id),e.deletedPatient={id:0}})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}))}}]).controller("SettingsPatientEditController",["$scope","$modalInstance","patient","users","$timeout","synsormed.services.PatientService",function(e,t,n,i,o,r){e.patient=n,e.users=i,e.patient.userId=e.patient.userId?e.patient.userId:e.users.length?e.users[0].id:null,e.patient.gender=e.patient.gender||null,e.notification=!1,e.genders=[{label:"--Select Gender--",value:null},{label:"Male",value:"male"},{label:"Female",value:"female"}],e.$on("setForm",function(t,n){e.form=n,o(function(){e.$broadcast("validate")},0)}),e.ok=function(){e.$broadcast("validate"),e.form.$valid&&(e.waiting=!0,e.patient.notify=!!e.patient.notify,e.patient.id?r.updatePatient(e.patient).then(function(n){e.waiting=!1,e.$emit("notification",{type:"success",message:"Patient Updated"}),t.close(n)})["catch"](function(t){e.notification=422==t.status?"Email already exists. Please try a different email":"Server error",e.waiting=!1}):r.createPatient(e.patient).then(function(n){e.waiting=!1,e.$emit("notification",{type:"success",message:"Patient Created"}),t.close(n)})["catch"](function(t){e.notification=422==t.status?"Email already exists. Please try a different email":"Server error",e.waiting=!1}))},e.cancel=function(){t.dismiss("cancel")}}]).controller("UploadPatientController",["$scope","$window","$interval","$modalInstance","synsormed.services.PatientService",function(e,t,n,i,o){var r;e.$on("fileupdate",function(e,t){r=t}),e.uploadFile=function(){e.myFile,o.uploadFileToUrl(r).then(function(t){i.dismiss(),e.$emit("notification",{type:"success",message:"File uploaded succesfully"})})["catch"](function(t){e.$emit("notification",{type:"danger",message:t.data})})},e.cancel=function(){i.dismiss("cancel")}}]).directive("fileModel",["$parse","$rootScope",function(e,t){return{restrict:"A",link:function(n,i,o){var r=e(o.fileModel),a=r.assign;i.bind("change",function(){n.$apply(function(){a(n,i[0].files[0]),t.$broadcast("fileupdate",i[0].files[0])})})}}}]),angular.module("synsormed.features.settings",["synsormed.services.practice","synsormed.services.user","synsormed.services.network_providers"]).controller("SettingsController",["$scope","practice","synsormed.services.UserService",function(e,t,n){e.practice=t,e.surveyQuestions=t.surveyQuestions,e.user=n.fetchCachedUser(),e.loadPatients=function(){e.$broadcast("loadPatientData",{})},e.$emit("pageLoaded",{title:"Practice Settings"})}]).controller("SettingsPracticeInformation",["$scope","synsormed.services.PracticeService","synsormed.services.UserService",function(e,t,n){e.editablePractice=$.extend({},e.practice);var i=n.fetchCachedUser();e.getOtp=function(){e.$emit("wait:start"),n.getOtpCode(i.id).then(function(t){e.$emit("wait:stop"),e.otpCode=t})["catch"](function(){e.$emit("wait:stop")})},e.removeOtp=function(){e.otpCode=null},e.save=function(){e.$broadcast("validate"),e.form.$valid&&t.savePractice(e.practice).then(function(t){$.extend(e.practice,t),e.$emit("notification",{type:"success",message:"Practice Information Saved"})})["catch"](function(){e.$emit("notification",{type:"danger",message:"Server error."})})}}]).controller("SettingsSurveyController",["$scope","$modal","synsormed.services.PracticeService",function(e,t,n){e.deletedQuestions=!1,e.addEmptyQuestion=function(){e.editQuestion({})},e.removeQuestion=function(t){e.deletedQuestions=!0,e.surveyQuestions.splice(t,1)},e.save=function(){e.deletedQuestions&&confirm("There is no way to undo this action. Are you sure you want to save this?");for(var t=e.surveyQuestions.length-1;t>0;t--)console.log(t,e.surveyQuestions[t]),""===$.trim(e.surveyQuestions[t].text)&&e.surveyQuestions.splice(t,1);n.savePractice(e.practice).then(function(){e.$emit("notification",{type:"success",message:"Survey Saved"})})["catch"](function(){e.$emit("notification",{type:"danger",message:"Server error."})}),e.deletedQuestions=!1},e.editQuestion=function(n,i){var o=t.open({templateUrl:"javascripts/app/features/settings/editQuestion.html",controller:"SettingsQuestionEditController",resolve:{question:function(){return $.extend({},n)},questionIndex:function(){return i||!1}}});o.result.then(function(t){n.id?$.extend(n,t):(console.log(t),e.surveyQuestions.push(t))})}}]).controller("SettingsQuestionEditController",["$scope","$modalInstance","question","questionIndex",function(e,t,n,i){e.questionIndex=i,e.question=n,e.$on("setForm",function(t,n){e.form=n}),e.ok=function(){e.$broadcast("validate"),e.form.$valid&&t.close(n)},e.cancel=function(){t.dismiss("cancel")}}]).controller("SettingsAccountController",["$scope","synsormed.services.UserService","synsormed.services.NetworkProviderService",function(e,t,n){n.getProviders().then(function(t){e.providers=t}),e.save=function(n){return e.user.password&&e.user.password!=e.user.confirmPassword?(e.$broadcast("setInvalid:password","Password and Confirm Password must match"),void e.$broadcast("setInvalid:confirmPassword","")):(e.$broadcast("setValid:password"),e.$broadcast("setValid:confirmPassword"),e.$emit("wait:start"),void t.updateUser(e.user).then(function(n){e.user=n,t.setCachedUser(n),e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"Account updated"})})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}))}}]).controller("SettingsUsersController",["$scope","$modal","synsormed.services.UserService",function(e,t,n){e.refreshUserList=function(){e.$emit("wait:start"),n.fetchAllUsersPaginate().then(function(t){e.$emit("wait:stop"),e.users=t.users,i(t.pagination)})},e.refreshUserList(),e.messageAlert={noUsers:"There are no deleted users."},e.deletedusers=[{id:1,name:"All users"},{id:0,name:"Active users"},{id:2,name:"Deleted users"}],e.deleteduser={id:0};var i=function(t){e.pages=[],e.pagination.paranoid=t.paranoid,e.pageCount=Math.ceil(t.total/5);for(var n=1;n<=e.pageCount;n++)e.pages.push(n)},o=function(){n.fetchAllUsersPaginate(e.pagination.paranoid,e.pagination.page).then(function(t){e.users=t.users,i(t.pagination)})};e.pagination={page:1,paranoid:1},e.pageTurn=function(t){1==e.pagination.page&&t<0||e.pagination.page==e.pageCount&&t>0||(e.pagination.page=e.pagination.page+t,o(e.pagination.page));
},e.pageTo=function(t){e.pagination.page=t,o(e.pagination.page)},e.$watch("deleteduser.id",function(t){void 0!=t&&(e.$emit("wait:start"),e.pagination.paranoid=t,n.fetchAllUsersPaginate(t).then(function(t){e.$emit("wait:stop"),e.users=t.users,e.pagination.page=1,i(t.pagination)}))}),e.$watch("deletedUsers",function(t,o){t?(e.$emit("wait:start"),e.pagination.paranoid=1,n.fetchAllUsersPaginate(1).then(function(t){e.$emit("wait:stop"),e.pagination.page=1,e.users=t.users,i(t.pagination)})):o&&(e.$emit("wait:start"),e.pagination.paranoid=0,n.fetchAllUsersPaginate(0).then(function(t){e.$emit("wait:stop"),e.pagination.page=1,e.users=t.users,i(t.pagination)}))}),e.resetUser=function(t){var o=confirm("Are you sure you want to reset this user");o&&(e.$emit("wait:start"),n.resetUser(t,!0).then(function(){e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"Reset User Successfully"}),e.pagination.paranoid=2,n.fetchAllUsersPaginate(2).then(function(t){e.users=t.users,i(t.pagination)}),e.deleteduser={id:2}})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}))},e.permanentDeleteUser=function(t){var o=confirm("There is no way to undo this action. Are you sure you want to permanently delete this user?");o&&(e.$emit("wait:start"),n.deleteUser(t,!0).then(function(){e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"User Deleted Permanently"}),e.pagination.paranoid=2,n.fetchAllUsersPaginate(2).then(function(t){e.users=t.users,i(t.pagination)})})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}))},e.addUser=function(){e.editUser({})},e.deleteUser=function(t){confirm("Are you sure you want to archive this user?")&&(e.$emit("wait:start"),n.deleteUser(t.id).then(function(){e.$emit("wait:stop"),n.fetchAllUsersPaginate().then(function(t){e.users=t.users,i(t.pagination)}),e.deleteduser={id:0},e.$emit("notification",{type:"success",message:"User Deleted"})})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}))},e.editUser=function(n){var i=t.open({templateUrl:"javascripts/app/features/settings/editUser.html",controller:"SettingsUserEditController",resolve:{currentUser:function(){return e.user},user:function(){return $.extend({},n)}}});i.result.then(function(t){e.refreshUserList(),n.id?$.extend(n,t):e.deleteduser={id:0}})}}]).controller("SettingsUserEditController",["$scope","$modalInstance","user","$timeout","currentUser","synsormed.services.UserService","synsormed.services.adminInsight.InsightService",function(e,t,n,i,o,r,a){e.user=n,e.currentUser=o,a.getAllOrganizations().then(function(t){e.orgs=t,e.$emit("wait:stop")})["catch"](function(t){e.orgs=[],e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}),"SuperAdmin"==e.currentUser.role&&(e.roles=[{name:"OrgCreator",value:"OrgCreator"}]),"Admin"==e.currentUser.role&&(e.roles=[{name:"Admin",value:"Admin"},{name:"Provider",value:"Provider"}]),e.$on("setForm",function(t,n){e.form=n,i(function(){e.$broadcast("validate")},0)}),e.notification="",e.ok=function(){e.$broadcast("validate"),e.form.$valid&&(e.waiting=!0,e.user.id?(e.user.password||delete e.user.password,r.updateUser(e.user).then(function(n){e.waiting=!1,e.$emit("notification",{type:"success",message:"User Updated"}),t.close(n)})["catch"](function(t){switch(t.status){case 409:e.notification="Email already exists. Please try a different email";break;default:e.notification="Server error"}e.waiting=!1})):r.createUser(e.user).then(function(n){e.waiting=!1,e.$emit("notification",{type:"success",message:"User Created"}),t.close(n)})["catch"](function(t){switch(t.status){case 409:e.notification="Email already exists. Please try a different email";break;default:e.notification="Server error"}e.waiting=!1}))},e.cancel=function(){t.dismiss("cancel")}}]),angular.module("synsormed.features.ehr.graph",[]).controller("EhrGraphController",["$scope","$rootScope",function(e,t){e.$emit("noMenu"),t.page={title:"Synsormed: EHR Graphs"},e.monitorMeasurements=[{id:256,measurementId:6,monitorId:225,upperbound:"250",lowerbound:"210",sensitivity:4,next_reading:"2015-11-17T13:27:15.000Z",repeatInterval:86400,oauthAvailable:!0,serviceName:"Fitbit",isOutOfBound:!1,isMissed:!1,name:"Blood Pressure( Fitbit ) ",unit:null},{id:257,measurementId:2,monitorId:225,upperbound:"250",lowerbound:"210",sensitivity:4,next_reading:"2015-11-17T13:27:15.000Z",repeatInterval:28800,oauthAvailable:!0,serviceName:"Fitbit",isOutOfBound:!1,isMissed:!1,name:"Steps ( Fitbit ) ",unit:null},{id:258,measurementId:3,monitorId:225,upperbound:"250",lowerbound:"210",sensitivity:3,next_reading:"2015-11-17T13:27:15.000Z",repeatInterval:28800,oauthAvailable:!0,serviceName:"Withings",isOutOfBound:!1,isMissed:!1,name:"Weight ( Withings ) ",unit:"lbs"},{id:259,measurementId:1,monitorId:225,upperbound:"250",lowerbound:"210",sensitivity:3,next_reading:"2015-11-17T13:27:15.000Z",repeatInterval:86400,oauthAvailable:!0,serviceName:"Ihealth",isOutOfBound:!1,isMissed:!1,name:"Glucose ( Ihealth ) ",unit:"mg/dL"}],e.selected={id:256},e.monitor=e.monitor={id:14,patientCode:"ZP4kSE"},e.notification="",e.chartSeries=[{showInLegend:!1,data:[],color:"#F05F3A",type:"line"},{showInLegend:!1,data:[],color:"#007872",type:"line"}],e.xAxis={gridLineWidth:0,labels:{enabled:!0,style:{fontWeight:"bold"}},title:{text:null},categories:["15 Nov 2015 10:00 AM","16 Nov 2015 5:05 PM","17 Nov 2015 10:04 AM","18 Nov 2015 5:01 PM"]},e.$watch("selected.id",function(){switch(e.selected.id){case 256:e.chartSeries[0].data=[],e.chartSeries[1].data=[],e.$emit("wait:start");var t={categories:["15 Nov 2015 10:00 AM","16 Nov 2015 5:05 PM","17 Nov 2015 10:04 AM","18 Nov 2015 5:01 PM"],series1:[{extra:{name:"Blood Pressure (SP)",reading:110.42,unit:null},y:110},{extra:{name:"Blood Pressure (SP)",reading:115.83,unit:null},y:115},{extra:{name:"Blood Pressure (SP)",reading:120.42,unit:null},y:120},{extra:{name:"Blood Pressure (SP)",reading:125.83,unit:null},y:125}],series2:[{extra:{name:"Blood Pressure (DP)",reading:75.42,unit:null},y:75},{extra:{name:"Blood Pressure (DP)",reading:80.83,unit:null},y:80},{extra:{name:"Blood Pressure (DP)",reading:85.42,unit:null},y:85},{extra:{name:"Blood Pressure (DP)",reading:90.83,unit:null},y:90}]};e.notification=!1,e.xAxis.categories=t.categories,e.chartSeries[0].data=t.series1,_.isEmpty(t.series2)||(e.chartSeries[1].data=t.series2),e.$emit("wait:stop");break;case 257:e.chartSeries[0].data=[],e.chartSeries[1].data=[],e.$emit("wait:start");var t={categories:["15 Nov 2015","16 Nov 2015","17 Nov 2015","18 Nov 2015"],series1:[{extra:{name:"Steps",reading:70000.42,unit:null},y:7e4},{extra:{name:"Steps",reading:65000.83,unit:null},y:65e3},{extra:{name:"Steps",reading:68000.42,unit:null},y:68e3},{extra:{name:"Steps",reading:70000.83,unit:null},y:7e4}]};e.notification=!1,e.xAxis.categories=t.categories,e.chartSeries[0].data=t.series1,_.isEmpty(t.series2)||(e.chartSeries[1].data=t.series2),e.$emit("wait:stop");break;case 258:e.chartSeries[0].data=[],e.chartSeries[1].data=[],e.$emit("wait:start");var t={categories:["15 Nov 2015 11:09 AM","16 Nov 2015 9:00 PM"],series1:[{extra:{name:"Weight",reading:198.42,unit:"lbs"},y:198},{extra:{name:"Weight",reading:202.83,unit:"lbs"},y:202}]};e.notification=!1,e.xAxis.categories=t.categories,e.chartSeries[0].data=t.series1,_.isEmpty(t.series2)||(e.chartSeries[1].data=t.series2),e.$emit("wait:stop");break;case 259:e.chartSeries[0].data=[],e.chartSeries[1].data=[],e.$emit("wait:start");var t={categories:["15 Nov 2015 10:04 AM","16 Nov 2015 11:12 AM","17 Nov 2015 1:09 PM","18 Nov 2015 5:12 PM"],series1:[{extra:{name:"Glucose",reading:140.42,unit:"mg/dL"},y:140},{extra:{name:"Glucose",reading:139.83,unit:"mg/dL"},y:139},{extra:{name:"Glucose",reading:135,unit:"mg/dL"},y:135},{extra:{name:"Glucose",reading:140,unit:"mg/dL"},y:140}]};e.notification=!1,e.xAxis.categories=t.categories,e.chartSeries[0].data=t.series1,_.isEmpty(t.series2)||(e.chartSeries[1].data=t.series2),e.$emit("wait:stop")}}),e.chartConfig={options:{chart:{type:"line",backgroundColor:"rgba(255, 255, 255, 0.1)"},plotOptions:{column:{states:{hover:{color:{linearGradient:{x1:0,y1:1,x2:0,y2:0},stops:[[0,"#F05F3A"],[1,"#EF3809"]]}}},color:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#00918a"],[1,"#00ABA2"]]}}},tooltip:{borderWidth:0,useHTML:!0,backgroundColor:"#FFFFFF",formatter:function(){var e=null!=this.point.extra.unit?"<tr><td><b>Unit</b></td><td>"+this.point.extra.unit+"</td></tr>":"";return'<table class="text-left table-condensed"><tr><td><b>Indicator</b></td><td>'+_.capitalize(this.point.extra.name)+"</td></tr>"+e+"<tr><td><b>Reading</b></td><td>"+this.point.extra.reading+"</td></tr></table>"}},yAxis:{title:{text:null}},xAxis:e.xAxis,series:e.chartSeries},series:e.chartSeries,title:{text:null},credits:{enabled:!1},loading:!1,xAxis:e.xAxis},e.$on("$destroy",function(){e.$emit("showMenu")})}]),angular.module("synsormed.features.admin.insights",["synsormed.services.user","synsormed.services.adminInsight","synsormed.features.admin.insights.license"]).controller("AdminInsightsController",["$scope","synsormed.services.UserService","$modal",function(e,t,n){e.user=t.fetchCachedUser(),t.fetchCachedUser(),e.$emit("pageLoaded",{title:"Insights"}),e.loadAdminUsers=function(){e.$broadcast("loadAdminUsers")},e.loadOrgCreatorUsers=function(){e.$broadcast("loadOrgCreatorUsers")},e.loadOrganizations=function(){e.$broadcast("loadOrganizations")},e.EditorgCreator=function(t){var i=t||{},o=n.open({templateUrl:"javascripts/app/features/settings/editUser.html",controller:"SettingsUserEditController",resolve:{currentUser:function(){return e.user},user:function(){return $.extend({},i)}}});o.result.then(function(){setTimeout(function(){e.loadOrgCreatorUsers()},10)})},e.deleteUser=function(n){confirm("Are you sure you want to delete this user?")&&(e.$emit("wait:start"),t.deleteUser(n.id).then(function(){e.$emit("wait:stop"),setTimeout(function(){e.loadOrgCreatorUsers()},10),e.$emit("notification",{type:"success",message:"User Deleted"})})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}))},setTimeout(function(){"OrgCreator"==e.user.role&&e.loadOrganizations()},0)}]).controller("AdminInsightsDashboardController",["$scope","synsormed.services.adminInsight.InsightService",function(e,t){e.insights=null,e.getGlobalStatistics=function(){e.$emit("wait:start"),t.getGlobalInsights().then(function(t){e.insights=t,e.$emit("wait:stop")})["catch"](function(t){e.insights=null,e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})})},e.getGlobalStatistics()}]).controller("AdminInsightsAdminlistController",["$scope","synsormed.services.adminInsight.InsightService","synsormed.services.UserService","$location",function(e,t,n,i){e.OrgCreators=[],e.admins=[],e.getAdminUsers=function(){e.$emit("wait:start"),t.getAllOrganizations().then(function(t){e.orgs=t,e.$emit("wait:stop")})["catch"](function(t){e.orgs=[],e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}),t.getAdminUsers().then(function(t){e.admins=t,e.$emit("wait:stop")})["catch"](function(t){e.admins=[],e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})})},e.getOrgCreatorUsers=function(){e.$emit("wait:start"),t.getAllOrganizations().then(function(t){e.orgs=t,e.$emit("wait:stop")})["catch"](function(t){e.orgs=[],e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}),t.getOrgCreatorUsers().then(function(t){e.OrgCreators=t,e.$emit("wait:stop")})["catch"](function(t){e.OrgCreators=[],e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})})},e.getOrganizationById=function(t){if(t&&e.orgs.length){var n="";return e.orgs.forEach(function(e){if(e.id==t)return n=e,!1}),n}},e.loginAsAdmin=function(t){var o=e.getOrganizationById(t.org_id),r=confirm("Do you want to login in "+o.name+" as "+t.name);r&&n.superUserLogin(t.id,o.id).then(function(e){n.setCachedUser(e),i.path("/settings")})["catch"](function(){e.$emit("notification",{type:"danger",message:"Server error."})})},e.$on("loadAdminUsers",function(){0===e.admins.length&&e.getAdminUsers()}),e.$on("loadOrgCreatorUsers",function(){e.getOrgCreatorUsers()})}]).controller("AdminInsightsOrganizationController",["$scope","$location","$modal","synsormed.services.adminInsight.InsightService",function(e,t,n,i){e.orgs=[],e.getAllOrganizations=function(){e.$emit("wait:start"),i.getAllOrganizations().then(function(t){e.orgs=t,e.$emit("wait:stop")})["catch"](function(t){e.orgs=[],e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})})},e.getDetails=function(e){t.path("/organization/"+e.id)},e.license=function(e){n.open({templateUrl:"javascripts/app/features/admin/insights/license.html",controller:"InsightsLicenseController",resolve:{organization:function(){return e}}})},e.$on("loadOrganizations",function(){0===e.orgs.length&&e.getAllOrganizations()})}]),angular.module("synsormed.features.admin.insights.license",[]).controller("InsightsLicenseController",["$scope","$modalInstance","synsormed.services.adminInsight.InsightService","organization",function(e,t,n,i){n.getOrganization(i.id).then(function(t){e.licenseCount=t.license_count}),e.send=function(){e.$broadcast("validate"),e.waiting=!0,n.saveLicense(i.id,e.licenseCount).then(function(n){e.waiting=!1,e.$emit("notification",{type:"success",message:"Notification successfully sent"}),t.dismiss()})["catch"](function(t){var n="Notification sending failed";t&&t.data&&t.data.code&&404==t.data.code&&(n="This user does not have messaging enabled"),e.waiting=!1,e.$emit("notification",{type:"danger",message:n})})},e.cancel=function(){t.dismiss()}}]),angular.module("synsormed.features.ehr.monitor",[]).controller("EhrMonitorController",["$scope","$rootScope",function(e,t){t.page={title:"Synsormed: EHR Monitor"},e.$emit("noMenu"),e.monitor={id:14,patientCode:"ZP4kSE"},e.measurements=[{id:1,name:"Glucose",unit:"mg/dL"},{id:2,name:"Blood Pressure",unit:""},{id:3,name:"Steps",unit:""},{id:4,name:"Weight",unit:"lbs"}],e.useUser={id:1},e.data={description:"Monitoring Glucose",notify:!0,sensitivity:2},e.monitorMeasurements=[],e.addIndicator=function(){return e.monitorMeasurements.length>=5?void e.$emit("notification",{type:"danger",message:"Only 5 health indicator's are allowed"}):void e.monitorMeasurements.push({})},e.users=[{id:1,name:"Dr. Elizabeth Oliver"},{id:2,name:"Dr. Anderson Abbott"},{id:3,name:"Dr. Phil Banks"},{id:4,name:"Dr. Sandra Lee"}],e.$on("$destroy",function(){e.$emit("showMenu")})}]),angular.module("synsormed.features.patient.call",["synsormed.services.user","synsormed.services.worklist","synsormed.services.encounter","synsormed.services.quickBlox","synsormed.services.timer"]).controller("PatientCallController",["$scope","$modal","$timeout","$interval","$rootScope","isBrowserSupported","synsormed.services.QuickBlox","synsormed.services.UserService","synsormed.services.WorklistService","synsormed.services.EncounterService",function(e,t,n,i,o,r,a,s,c,d){var l=s.fetchCachedUser();e.patientCode=l.code;var u,m=null,p=null,f=null,g=null;r||e.$emit("notification",{type:"warning",message:"We recommend Chrome for video consults"});var h=function(){n(function(){e.$apply()},0)},v=function(){(m||e.currentSession)&&(m=e.currentSession,m.reject(f,{}),m.stop(f,{}),m=null,p=null),e.videoModelOpened&&u.dismiss()},w=function(){o.showBackground=!1,o.callStarted&&e.$emit("notification",{type:"danger",message:"Call is disconnected"}),m=null,p=null,v()},y=function(){o.showBackground=!0};e.$emit("wait:start"),c.getEncounterQuickBoxDetails(l.id).then(function(e){return g=e,c.getQuickBloxDetails(l.providerId)}).then(function(e){return f=e.id,a.initialize(g.token),a.connectUser(g.id,g.password)}).then(function(t){QB.webrtc.onCallListener=function(t,n){e.currentSession=m=t,p=n,C(),h()},QB.webrtc.onRemoteStreamListener=function(e,t,n){e.attachMediaStream("remoteVideo",n),h()},QB.webrtc.onUserNotAnswerListener=function(t,n){e.$emit("notification",{type:"danger",message:"No response from user"}),h()},QB.webrtc.onRejectCallListener=function(t,n,i){e.$emit("notification",{type:"danger",message:"Call is rejected"}),h()},QB.webrtc.onStopCallListener=function(e,t,n){w(),h()},QB.webrtc.onUpdateCallListener=function(t,n,i){var o=i.disconnected;o&&(e.$emit("notification",{type:"danger",message:"Call is disconnected"}),w(),h())},QB.webrtc.onSessionConnectionStateChangedListener=function(e,t,n){switch(n){case 0:console.log("Undefined Error");break;case 1:console.log("Connecting Please wait");break;case 2:y(),console.log("Call is connected");break;case 3:case 4:case 5:o.callStarted=!1,w(),console.log("Call is closed");break;case 6:console.log("Call is completed")}h()},e.$emit("wait:stop")})["catch"](function(t){e.$emit("wait:stop"),console.log("err",t)});var $=function(){return d.pingServer(l.code),d.getProviderStatus(l.providerId).then(function(e){o.isProviderOnline=e.online})["catch"](function(e){o.isProviderOnline=!1})};$();var S=i(function(){$()},3e4),M=function(){m&&m.reject(p),w()},C=function(){e.videoModelOpened||(u=t.open({backdrop:!1,templateUrl:"javascripts/app/features/patient/encounter/video.html",controller:"VideoPatientController",windowClass:"custom-video-modal",resolve:{patient:function(){return l},currentSession:function(){return m},currentExtention:function(){return p},calleeId:function(){return f},closePopUp:function(){return v},onStopCall:function(){return w},rejectCall:function(){return M}}}),u.opened.then(function(){e.videoModelOpened=!0}),u.result.then(function(t){e.videoModelOpened=!1},function(){e.videoModelOpened=!1}))};e.$on("$destroy",function(){w(),i.cancel(S)})}]).controller("VideoPatientController",["$scope","$rootScope","$interval","patient","calleeId","rejectCall","onStopCall","closePopUp","$modalInstance","currentSession","currentExtention","synsormed.services.QuickBlox","synsormed.services.EncounterService","synsormed.services.TimerService",function(e,t,n,i,o,r,a,s,c,d,l,u,m,p){var f;t.callStarted=!1,e.acceptCall=function(){d&&l?(e.$emit("wait:start"),u.getUserMedia(d).then(function(n){e.$emit("wait:stop"),d.attachMediaStream("localVideo",n),f=moment(),t.callStarted=!0,console.log("startDate",f.format()),d.accept({startDate:f})})["catch"](function(n){if(t.callStarted=!1,e.$emit("wait:stop"),d=null,l=null,404==n.code){var i=n.device;e.$emit("notification",{type:"danger",message:i+" device not found."})}else e.$emit("notification",{type:"danger",message:"Server error"});e.close()})):e.$emit("notification",{type:"danger",message:"Sesion is expired"})},e.controls={audio:!0,video:!0},e.toggleType=function(t){d&&(e.controls[t]?(d.mute(t),e.controls[t]=!1):(d.unmute(t),e.controls[t]=!0))},e.rejectCall=function(){r()},e.endCall=function(){t.callStarted=!1,a()},e.close=function(){s()},e.$watch("callStarted",function(t){t?(e.$emit("web:chat:started"),p.startTimer(function(t){e.duration=t},f)):(e.$emit("web:chat:stopped"),p.cancelTimer(function(t){m.logEncounterCallDuration(i.id,parseInt(t)),e.duration=null}))}),e.$on("$destroy",function(){t.callStarted=!1})}]),angular.module("synsormed.features.provider.monitor.edit",["synsormed.services.worklist","synsormed.services.user","synsormed.services.measurement","synsormed.services.monitor","synsormed.services.pageState","ui.bootstrap.datetimepicker","synsormed.services.patient","multipleSelect"]).controller("MonitorEditController",["$scope","$rootScope","$modalInstance","$q","monitor","users","measurements","monitorMeasurements","isNew","synsormed.services.MonitorService","synsormed.services.UserService","synsormed.services.MonitorListService","synsormed.services.MonitorMeasurementService","synsormed.services.MonitorStateService","synsormed.services.PatientListService","$modal","diseases","statusSurvey","localStorageService",function(e,t,n,i,o,r,a,s,c,d,l,u,m,p,f,g,h,v,w){e.profileType=w.get("profileType"),e.users=r,e.monitor=o,e.measurements=a,e.monitorMeasurements=s,e.patients=[],e.$emit("wait:stop"),e.diseases=h||[],e.statusSurvey=v,e.providers=[],e.users.forEach(function(t){e.providers.push({id:t.id,name:t.name})}),e.measurements=_.filter(e.measurements,function(e){return!0}),e.repeatIntervalInHours=e.repeatInterval/3600,e.$watch("repeatIntervalInHours",function(){e.repeatInterval=3600*e.repeatIntervalInHours},!0),e.monitoringIntervals=[{id:3,name:"3 per day"},{id:2,name:"2 per day"},{id:1,name:"1 per day"}],e.datePicker={opened:!1,minDate:new Date},e.open=function(t){t.preventDefault(),t.stopPropagation(),e.datePicker.opened=!0};var y=p.getMonitorState();y=y?y.lastViewedUser:0;var $=l.fetchCachedUser(),S=$;"Provider"!=$.role&&e.users.length>0?S=e.users[0]:"Provider"!=$.role&&(S={}),e.isNew=!o,e.useUser={id:!e.isNew&&e.monitor.providerId?e.monitor.providerId:e.users[0].id},e.stageNext=!e.isNew,e.data={description:null,notify:!1,educationChecked:!1,sensitivity:2,startDate:moment().toDate()},e.data.selectedList=[{id:e.users[0].id,name:e.users[0].name}],e.isNew||(e.data={description:e.monitor.description,notify:e.monitor.notify,sensitivity:e.monitor.sensitivity,reportingEmails:e.monitor.reportingEmails,medicationReminder:e.monitor.medicationReminder,medication:e.monitor.medication,startDate:e.monitor.startDate?moment(e.monitor.startDate).toDate():moment().toDate(),providerId:e.monitor.providerId,educationChecked:e.monitor.educationChecked}),e.selectedProvider=[],e.monitor&&e.monitor.providersId&&(_.forEach(e.users,function(t){_.forEach(e.monitor.providersId,function(n){t&&n&&t.id==n&&e.selectedProvider.push({id:n,name:t.name})})}),e.data.selectedList=e.selectedProvider),e.$on("setForm",function(t,n){e.form=n}),e.ok=function(){if(e.$broadcast("validate"),e.form.$valid){var t=null;if(e.isNew?t={description:e.data.description,notify:e.data.notify,sensitivity:e.data.sensitivity,reportingEmails:e.data.reportingEmails,medicationReminder:e.data.medicationReminder,medication:e.data.medication,educationChecked:e.data.educationChecked,patientId:e.data.patientId}:(o.description=e.data.description,o.notify=e.data.notify,o.sensitivity=e.data.sensitivity,o.reportingEmails=e.data.reportingEmails,o.medicationReminder=e.data.medicationReminder,o.medication=e.data.medication,o.patientId=e.data.patientId,o.educationChecked=e.data.educationChecked,t=o),t.startDate=e.data.startDate?moment(e.data.startDate).startOf("day").add(moment().diff(moment().startOf("day"),"seconds"),"seconds").toDate():null,e.providersId=[],"Admin"===$.role&&(e.profileType?(t.providersId=[e.useUser.id],t.providerId=e.useUser.id):(e.data.selectedList.forEach(function(t){e.providersId.push(t.id)}),t.providersId=e.providersId?e.providersId:[],t.providerId=e.useUser.id)),e.monitorMeasurements.length<1)return void e.$emit("notification",{type:"danger",message:"Please add at least one indicator to monitor"});var i=_.every(e.monitorMeasurements,function(t){return!(12===t.measurementId&&!t.statusSurveyId&&(e.$emit("notification",{type:"danger",message:"Please select a survey type"}),1))});if(i){_.map(e.monitorMeasurements,function(t){t.sensitivity=e.data.sensitivity}),e.$emit("wait:start");var r=null;(function(){return e.isNew?d.createMonitor(t):d.updateMonitor(t)})().then(function(t){return r=t,m.updateMonitorMeasurements(t.id,e.monitorMeasurements)}).then(function(){e.stageNext?(e.$emit("wait:stop"),n.close(c?r:null)):D(r.id).then(function(){e.$emit("wait:stop"),e.stageNext=!0})})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})})}}};var M=function(t){var n={id:0,name:"--No Patient--"};e.patients.unshift(n)},C=function(t,n){var i=!(e.isNew||!n.patientId)&&n.patientId,o=t[0].id;if(i){var r=_.find(t,function(e){return e.id==i});o=r?i:t[0].id}return o},x=function(t){t&&(e.$emit("wait:start"),f.getPatients(t,!1,!0).then(function(t){e.$emit("wait:stop"),e.patients=t,M(t),e.data.patientId=C(e.patients,e.monitor)})["catch"](function(t){e.$emit("wait:stop"),console.log(t)}))};e.occurences=[{id:1},{id:2},{id:3},{id:4}];var D=function(t){var n=i.defer();return d.getMonitor(t).then(function(n){return e.monitor=n,o=n,e.isNew=!1,m.getMonitorMeasurements(t)}).then(function(t){e.monitorMeasurements=t,n.resolve()})["catch"](n.reject),n.promise};e.cancel=function(){c&&o?(e.$emit("wait:start"),d.deleteMonitor(o.id).then(function(){e.$emit("wait:stop"),n.dismiss()})["catch"](function(){e.$emit("wait:stop"),n.dismiss()})):n.dismiss()},e.getStateText=function(){return c?"Next":e.stageNext?"OK":"Next"},e.addIndicator=function(){e.monitorMeasurements.length>=5?e.$emit("notification",{type:"danger",message:"Only 5 health indicator's are allowed"}):(e.monitorMeasurements.push({}),e.stageNext=!1)},e.$on("delete:monitor:measurement",function(t,n){1===e.monitorMeasurements.length?e.$emit("notification",{type:"danger",message:"Cannot delete all the health indicator's for a monitor"}):m.deleteMonitorMeasurements(e.monitor.id,n.id).then(function(){e.$emit("notification",{type:"success",message:"Health indicator deleted successfully"}),e.monitorMeasurements.splice(n.index,1)})["catch"](function(t){console.log(t),e.$emit("notification",{type:"danger",message:"Server error."})})}),e.$on("monitor:edit:popup:refresh",function(){e.stageNext=!1,e.ok()}),e.$watch("useUser.id",function(e,t){x(e)}),e.createPatient=function(){var t=g.open({templateUrl:"javascripts/app/features/settings/editPatient.html",controller:"SettingsPatientEditController",resolve:{patient:function(){return{}},users:function(){return e.users}}});t.result.then(function(t){x(e.useUser.id)})}}]),angular.module("synsormed.features.provider.monitor",["synsormed.services.worklist","synsormed.services.user","synsormed.services.measurement","synsormed.services.monitor","synsormed.services.pageState","ui.bootstrap.datetimepicker","synsormed.features.provider.monitor.edit","synsormed.features.provider.monitor.insights","synsormed.services.diseases","synsormed.features.provider.monitor.map","synsormed.features.provider.monitor.summary","synsormed.services.notify","btford.socket-io"]).controller("MonitorController",["$scope","$rootScope","users","$location","$modal","synsormed.services.MonitorListService","synsormed.services.UserService","synsormed.services.MeasurementService","synsormed.services.MonitorService","synsormed.services.MonitorMeasurementService","synsormed.services.MonitorStateService","debounce","$filter","$window","$timeout","synsormed.services.diseases.DiseasesService","$interval","synsormed.services.Socket","localStorageService",function(e,t,n,i,o,r,a,s,c,d,l,u,m,p,f,g,h,v,w){function y(){console.log("filtered monitor called"),_.forEach(e.monitors,function(e){e.showNote=!0,e&&e.lastSync&&e.lastSync.length&&e.lastSync.forEach(function(t){"c5"!=t.service&&"eclipse"!=t.service||void 0==t.alertLastDate||t.quantity.Cleared||(e.isAlarMed=!0)})});var t=e.pagination.searchBox?e.monitors:m("filter")(e.monitors,e.monitorFilter),n=m("filter")(t,e.pagination.searchBox);e.filtered=m("orderBy")(n,"-id"),e.pagination.finalMonitors=I(e.filtered),_.forEach(e.pagination.finalMonitors,function(t){t.showNote=!0,t.notificationRead&&t.notificationRead.indexOf(e.user.id)!=-1&&(t.showNote=!1)})}function $(){e.pageCount=Math.ceil(e.totalMonitorListCount/e.pagination.pageSize),e.pages=[];for(var t=1;t<=e.pageCount;t++)e.pages.push(t)}t.$emit("checkMonitors:license"),_.forEach(n,function(t){e.org_id=t.org_id}),e.profileType=w.get("profileType");var S={},M=function(t,n){S[t]=S[t]||{count:0,expire:null},0==S[t].count?(S[t].count=1,S[t].expire=moment().add(20,"seconds").format("YYYY-MM-DD HH:mm:ss")):S[t].count<=5&&moment().format("YYYY-MM-DD HH:mm:ss")<moment().add(20,"seconds").format("YYYY-MM-DD HH:mm:ss")&&(S[t].count+=1),S[t].count<=6&&e.org_id==n.orgId&&e.refreshMonitorList()};v.on("dataRecievedFromApp",function(e){M("dataRecievedFromApp",e)}),v.on("deletedServiceFromApp",function(e){M("deletedServiceFromApp",e)}),e.user=a.fetchCachedUser(),e.filterData=[],e.initialLoaded=!1,e.$watch("monitors",function(t){if(t.length){var n=0,i=0,o=0,r=0,a=0;_.forEach(t,function(e){var t=1,s=1;e.isMissed&&(i+=t,s=t,t/=2),e.isOutofBound&&(1!==t&&(i=i-s+t),o+=t,s=t,t/=3),e.isEduMissed&&(1!==t&&(o=e.isOutofBound?o-s+t:o,i=e.isMissed?i-s+t:i),r+=t),e.isMissed||e.isOutofBound||(n+=t),e.isAlarMed&&(1!==t&&(i=i-s+t),a+=t,s=t,t/=3)}),e.filterData=[{title:"Normal",count:n,color:"#5cb85c"},{title:"Out of Range",count:o,color:"#d9534f"}]}else e.filterData=[]}),e.selectUserById=function(t){return _.find(e.users,{id:t})},e.$emit("wait:start"),g.getDiseases().then(function(t){e.$emit("wait:stop"),e.diseases=t})["catch"](function(t){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."}),console.log(t)});var C=e.user;e.displayLocation=function(e,t){o.open({templateUrl:"javascripts/app/features/provider/monitor/map.html",controller:"MonitorMapController",windowClass:"custom-map-modal",resolve:{location:function(){return t},patientCode:function(){return e}}})},e.displaySummary=function(e){o.open({templateUrl:"javascripts/app/features/provider/monitor/patientSummary.html",controller:"PatientSummaryControllerModal",resolve:{monitor:function(){return e}}})},e.connectedStyle=function(e){var t="#fff";switch(e){case 1:t="#F05F3A";break;case 2:t="#06ABA4";break;default:t="#fff"}return{"border-left":"10px solid "+t}},e.showLastSyncDates=function(e){var t=!1;return"#00ABA2"==e.surveyColor?t="Low Score":"#FF9F33"==e.surveyColor?t="Medium Score":"#F05F3A"==e.surveyColor?t="High Score":"#808080"==e.surveyColor?t="No Scores":"#fff"==e.surveyColor&&(t="Missed Survey"),'<div style="width:100px"> '+t+"</div>"},e.checkAlertDate=function(e){var t=!1;if(e.lastSync&&e.lastSync.length&&e.lastSync.forEach(function(n){"c5"!=n.service&&"eclipse"!=n.service||void 0==n.alertLastDate||n.quantity.Cleared||(t="status-red",e.isAlarMed=!0)}),t)return t;switch(t="status-white",e.isConnected){case 1:t="status-orange",e.isAlarMed=!1;break;case 2:t="status-green";break;default:t="status-white"}return t},e.showPatientInfo=function(e){function t(e){var t=(""+e).replace(/\D/g,""),n=t.match(/^(\d{3})(\d{3})(\d{4})$/);return n?"("+n[1]+") "+n[2]+"-"+n[3]:null}var n,i="No patient is linked with this code";if(e.patientName){var o="Not available",r="<span>Email : "+(e.patientEmail||o)+"</span><br/>",a="<span>Mobile : "+(t(e.patientPhone)||o)+"</span>";n=r+a}return"<div>"+(n||i)+"</div>"};var x=l.getMonitorState(),D=(x?x.lastViewedUser:0)||e.user.id,b=function(t){if(t.length){var n={id:0,name:"All",role:"Provider"};e.users.unshift(n)}},P=function(e){var t=[];return e.forEach(function(e){e.id&&t.push(e)}),t};if("Admin"===C.role?(e.users=n.filter(function(e){return"Provider"===e.role}),b(e.users)):"Provider"===C.role&&(e.users=n.filter(function(e){return e.id===C.id})),"Provider"!=C.role&&e.users.length>0){var Y=x?x.lastViewedUser:0,U=e.users.filter(function(e){return e.id===Y});D=Y>0&&U.length?Y:e.users[0].id}e.alert={type:"danger"},e.monitors=[],e.pagination={pageSizes:[5,10,25,50,100],pageSize:10,page:x?x.page:1,finalMonitors:[]},e.pageCount=0,0==e.users.length&&(e.alert.msg="You must have at least one provider added to the system to see monitor list"),e.showUser={id:x?x.lastViewedUser:!!e.users.length&&e.users[0].id},e.filtered=[],e.$emit("pageLoaded",{title:"Monitors"}),e.filters=[{id:0,name:"All"},{id:1,name:"Low Score"},{id:2,name:"Medium Score"},{id:3,name:"High Score"},{id:4,name:"Missed Score"},{id:5,name:"None"}],e.filter={id:x?x.filter:0},e.deletedmonitors=[{id:0,name:"All"},{id:1,name:"Deleted"},{id:2,name:"Non Deleted"}],e.deletedmonitor={id:2},e.$watch("deletedmonitor.id",function(t,n){switch(t!=n&&(e.pagination.page=1),l.setMonitorState({lastViewedUser:e.showUser.id,pageSize:e.pagination.pageSize,page:e.pagination.page,filter:e.filter.id,deletedMonitor:e.deletedmonitor.id}),e.deletedmonitor.id){case 0:e.$emit("wait:start"),
e.showPrevious=!1,e.showNext=!0,r.fetchMonitorList(D,0).then(function(t){e.$emit("wait:stop"),e.monitors=t});break;case 1:e.$emit("wait:start"),e.showPrevious=!1,e.showNext=!0,r.fetchMonitorList(D,0).then(function(t){e.$emit("wait:stop"),e.monitors=[],_.forEach(t,function(t){t&&t.deleted_at&&e.monitors.push(t)})});break;case 2:e.$emit("wait:start"),e.showPrevious=!1,e.showNext=!0,r.fetchMonitorCount(D,1,e.profileType,!0,e.monitorFilter.surveyColor).then(function(t){e.totalMonitorListCount=t.length}),r.fetchMonitorList(D,1,null,e.pagination.page,e.pagination.pageSize,e.monitorFilter.surveyColor).then(function(t){e.$emit("wait:stop"),e.monitors=[],_.forEach(t,function(t){t&&!t.deleted_at&&e.monitors.push(t)})});break;default:e.monitorDeletedFilter={}}y(),$()}),e.monitorFilter={},f(function(){e.$watch("showUser.id",function(t,n){t!=n&&(e.pagination.page=1),D=e.showUser.id,l.setMonitorState({lastViewedUser:e.showUser.id,pageSize:e.pagination.pageSize,page:e.pagination.page,filter:e.filter.id,deletedMonitor:e.deletedmonitor.id}),e.pagination.searchBox="",A()},!0),e.$watch("pagination.searchBox",function(t,n){t!=n&&(e.pagination.page=1,A(!1,t),$())},!0),e.$watch("pagination.filter",function(){y(),$()},!0),e.$watch("pagination.finalMonitors",function(){$()},!0),e.$watch("monitors.length",function(){$(),y()},!0),e.$watch("pagination.pageSize",function(t,n){t&&(t!=n&&(e.pagination.page=1),l.setMonitorState({lastViewedUser:e.showUser.id,pageSize:e.pagination.pageSize,page:e.pagination.page,filter:e.filter.id,deletedMonitor:e.deletedmonitor.id}),e.pagination.searchBox="",$(),A())}),e.$watch("pagination.page",function(){l.setMonitorState({lastViewedUser:e.showUser.id,pageSize:e.pagination.pageSize,page:e.pagination.page,filter:e.filter.id,deletedMonitor:e.deletedmonitor.id}),e.pagination.finalMonitors=I(e.filtered)})},0),e.showPrevious=!1,e.showNext=!0,e.pageTurn=function(t){return 1==e.pagination.page&&t<0?void console.log("$scope.pagination.page == 1 && value < 0",1==e.pagination.page&&t<0):e.pagination.page==e.pageCount&&t>0?void console.log("$scope.pagination.page == $scope.pageCount && value > 0",e.pagination.page==e.pageCount&&t>0):(e.pagination.page=e.pagination.page+t,void A(e.monitorFilter.surveyColor,e.pagination.searchBox))},e.pageTo=function(t){1==t&&(e.showNext=!0,e.showPrevious=!1),t==e.pageCount&&(e.showPrevious=!0,e.showNext=!1),1!=t&&t!=e.pageCount&&(e.showPrevious=!0,e.showNext=!0),e.pagination.page=t,A(e.monitorFilter.surveyColor,e.pagination.searchBox)},e.$watch("filter.id",function(t,n){switch(t!=n&&(e.pagination.page=1),l.setMonitorState({lastViewedUser:e.showUser.id,pageSize:e.pagination.pageSize,page:e.pagination.page,filter:e.filter.id,deletedMonitor:e.deletedmonitor.id}),e.filter.id){case 0:e.monitorFilter={};break;case 1:e.monitorFilter={surveyColor:"#00ABA2"};break;case 2:e.monitorFilter={surveyColor:"#FF9F33"};break;case 3:e.monitorFilter={surveyColor:"#F05F3A"};break;case 4:e.monitorFilter={surveyColor:"#fff"};break;case 5:e.monitorFilter={surveyColor:"#808080"};break;default:e.monitorFilter={}}e.pagination.searchBox="",A(e.monitorFilter.surveyColor),$()});var A=function(t,n){e.$emit("wait:start"),r.fetchMonitorCount(D,1,e.profileType,!0,e.monitorFilter.surveyColor,n).then(function(t){e.totalMonitorListCount=t.length}),r.fetchMonitorList(D,1,e.profileType,e.pagination.page,e.pagination.pageSize,e.monitorFilter.surveyColor,n).then(function(t){console.log("-->",t),e.monitors=t,_.forEach(e.monitors,function(t){t&&t.practiceId&&(e.orgId=t.practiceId)}),y(),$(),e.initialLoaded=!0,e.$emit("wait:stop")})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})})},I=function(t){return t.length<e.pagination.pageSize?t:t};e.editMonitor=function(t){if(!e.users.length)return e.$emit("notification",{type:"info",message:"Please add provider first."}),!1;e.$emit("wait:start");var n=o.open({templateUrl:"javascripts/app/features/provider/monitor/editMonitor.html",controller:"MonitorEditController",resolve:{monitor:function(){return t},users:function(){return P(e.users)},measurements:function(){return s.getCachedMeasurements()},monitorMeasurements:function(){return t?d.getMonitorMeasurements(t.id):[]},isNew:function(){return!t},diseases:function(){return e.diseases},statusSurvey:function(){return a.getStatusSurvey(e.user.id).then(function(e){return e.unshift({id:0,surveyName:"--No survey--",displayName:"--No survey--"}),e})}}});n.result.then(function(e){e?i.path("/showMonitor").search({id:e.id}):A()})},e.hideNotify=function(t){t.notifyRequested=!1,e.$emit("wait:start"),c.updateMonitor(t).then(function(){e.$emit("wait:stop")})["catch"](function(t){e.$emit("wait:stop")})},e.uploadFile=function(){o.open({templateUrl:"javascripts/app/features/provider/monitor/uploadFile.html",controller:"UploadFileController"})},e.refreshMonitorList=function(){e.monitorlistLoading=!0,A()},e.setAppointment=function(e){var t=o.open({templateUrl:"javascripts/app/features/provider/monitor/appointment.html",controller:"MonitorAppointmentController",resolve:{monitor:function(){return e}}});t.result.then(function(){A()})},e.deleteMonitor=function(n){var i=confirm("Are you sure you want to delete this monitor?");i&&(e.$emit("wait:start"),c.deleteMonitor(n,e.user).then(function(){t.$emit("checkMonitors:license"),e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"Monitor Deleted"}),A()})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}))},e.resetMonitor=function(n){var i=confirm("Are you sure you want to reset this monitor");i&&(e.$emit("wait:start"),c.resetMonitor(n).then(function(){t.$emit("checkMonitors:license"),e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"Reset Monitor Successfully"}),A()})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}))},e.permanentDeleteMonitor=function(n){var i=confirm("There is no way to undo this action. Are you sure you want to permanently delete this monitor?");i&&(e.$emit("wait:start"),c.deleteMonitor(n,C,!0).then(function(){t.$emit("checkMonitors:license"),e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"Monitor Deleted Permanently"}),A()})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}))},e.monitorInsightChart=function(t){var n=o.open({templateUrl:"javascripts/app/features/provider/monitor/monitorInsights.html",controller:"MonitorInsightsController",windowClass:"monitor-insight-modal",resolve:{monitor:function(){return t},monitorMeasurements:function(){return t?d.getMonitorMeasurements(t.id):[]},measurements:function(){return s.getCachedMeasurements()},statusSurvey:function(){return a.getStatusSurvey(e.user.id)}}});n.result.then(function(){},function(){e.refreshMonitorList(),e.$emit("wait:stop")})},e.monitorOauthLink=function(t){var n=o.open({templateUrl:"javascripts/app/features/provider/monitor/serviceList.html",controller:"MonitorOauthController",windowClass:"monitor-service-modal",resolve:{monitor:function(){return t}}});n.result.then(function(n){return n?void d.setOauthDataForMeasurement(t.id,t.measurementId,n,!0).then(function(t){e.$emit("notification",{type:"success",message:"Synsormed Connected"})}):void e.$emit("notification",{type:"danger",message:"Synsormed Connected Failed"})}),n.result["finally"](function(){e.refreshMonitorList(),e.$emit("wait:stop")})},e.notifyMonitor=function(e){e&&o.open({templateUrl:"javascripts/app/features/provider/monitor/notification.html",controller:"MonitorNotificationController",windowClass:"monitor-service-modal",resolve:{monitor:function(){return e}}})}}]).controller("MonitorNotificationController",["$scope","monitor","$modalInstance","synsormed.services.NotifyService",function(e,t,n,i){e.patientCode=!!t&&t.patientCode,e.title="Send message "+e.patientCode,e.$on("setForm",function(t,n){e.form=n}),e.send=function(){e.$broadcast("validate"),e.form.$valid&&(e.waiting=!0,i.sendPushNotificationToMonitor(t.id,e.form.message.$modelValue).then(function(t){e.waiting=!1,e.$emit("notification",{type:"success",message:"Notification successfully sent"}),n.dismiss()})["catch"](function(t){var n="Notification sending failed";t&&t.data&&t.data.code&&404==t.data.code&&(n="This user does not have messaging enabled"),e.waiting=!1,e.$emit("notification",{type:"danger",message:n})}))},e.cancel=function(){n.dismiss()}}]).controller("MonitorAppointmentController",["$scope","$location","$modalInstance","monitor","synsormed.services.MonitorService","synsormed.services.MonitorMeasurementService",function(e,t,n,i,o,r){e.monitor=i,i.appointmentMeta=i.appointmentMeta?i.appointmentMeta:{},e.date={0:i.appointmentMeta[0]?new Date(i.appointmentMeta[0]):null,1:i.appointmentMeta[1]?new Date(i.appointmentMeta[1]):null,2:i.appointmentMeta[2]?new Date(i.appointmentMeta[2]):null},e.$on("setForm",function(t,n){e.form=n}),e.goToEncounter=function(e){n.dismiss(),t.path("/showCode").search({id:e})},e.resetAppointment=function(){var t=confirm("New appointment date will be approved by patient first.");t&&(e.monitor.encounterId=!1)},e.ok=function(){e.notification="",e.$broadcast("validate"),e.form.$valid&&o.createAppointment(i.id,e.date).then(function(){n.close()})["catch"](function(){e.$emit("notification",{type:"danger",message:"Server error."})})},e.cancel=function(){n.dismiss()}}]).controller("MonitorOauthController",["$scope","$window","$interval","$modalInstance","monitor","synsormed.services.MonitorServicesService","synsormed.services.MonitorService",function(e,t,n,i,o,r,a){e.services=null,e.connectedServices=null,e.$emit("wait:start"),r.getConnectedService(o.id).then(function(t){e.connectedServices=_.map(t,function(e){return e.service_name=_.capitalize(e.service_name),e}),e.$emit("wait:stop")})["catch"](function(t){console.log(t),e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server Error"})}),e.ok=function(){i.dismiss("close")},e.unlinkMonitor=function(t){var n=confirm("This will disconnect service from Synsormed. Are you sure ?");n&&(e.$emit("wait:start"),a.unlinkOauthToken(o.id,t).then(function(){e.connectedServices=null,i.dismiss("close"),e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"Monitor Unlinked"})})["catch"](function(t){console.log(t),e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server Error"})}))};var s=null;e.startOauth=function(e){alert("Old code method called")};var c=window.addEventListener?"addEventListener":"attachEvent",d="attachEvent"==c?"onmessage":"message";$(window).unbind(d),$(window).bind(d,function(e){return!!s&&(e=e.originalEvent,void(e.data&&e.data.success?i.close({oauth_data:e.data.data,service_name:s}):i.close(!1)))})}]).controller("UploadFileController",["$scope","$window","$interval","$modalInstance","synsormed.services.MonitorMeasurementService",function(e,t,n,i,o){var r;e.$on("fileupdate",function(e,t){r=t}),e.uploadFile=function(){e.myFile,o.uploadFileToUrl(r).then(function(t){i.dismiss(),e.$emit("notification",{type:"success",message:"File uploaded succesfully"})})["catch"](function(t){e.$emit("notification",{type:"danger",message:t.data})})}}]).directive("fileModel",["$parse","synsormed.services.MonitorMeasurementService","$rootScope",function(e,t,n){return{restrict:"A",link:function(t,i,o){var r=e(o.fileModel),a=r.assign;i.bind("change",function(){t.$apply(function(){a(t,i[0].files[0]),n.$broadcast("fileupdate",i[0].files[0])})})}}}]),angular.module("synsormed.features.provider.monitor.insights",[]).controller("MonitorInsightsController",["$scope","$location","$modal","$modalInstance","monitor","monitorMeasurements","synsormed.services.MonitorService","measurements","$timeout","statusSurvey",function(e,t,n,i,o,r,a,s,c,d){e.selected={id:r[0].id,date:null},e.monitor=o,e.lastSyncTime="not available",e.extraSeries=[],e.extraGraphs=!1,e.selected.graph="status",e.selected.alertDate="Default";var l=function(e,t){var n=!1,i=!1;return _.forEach(r,function(t){if(t.id==e)return void(i=t.measurementId)}),_.forEach(s,function(e){var o=e.name.toLowerCase();t.indexOf(o)!=-1&&e.id==i&&(n=!0)}),n};e.checkMeasurementForDropDown=function(t){return e.isHeartBeatMeasurement=l(t,["heartrate","breath","oxygen flow"]),e.isHeartBeatMeasurement},e.checkOxygenFlowMeasurement=function(t){return e.isOxygenMeasurement=l(t,["oxygen flow"]),e.isOxygenMeasurement},e.monitorMeasurements=_.map(r,function(e){return e.name=e.display_name?e.display_name:e.name,e.serviceName&&(e.name="c5"==e.serviceName.toLowerCase()?"Companion 5":e.serviceName),e}),e.monitorMeasurements=_.uniq(e.monitorMeasurements,function(e){return e.measurementId+e.serviceName}),e.notification="",e.chartSeries=[{showInLegend:!1,data:[],color:"#F05F3A",type:"line"},{showInLegend:!1,data:[],color:"#007872",type:"line"}],e.xAxis={gridLineWidth:0,labels:{enabled:!0,style:{fontWeight:"bold"}},title:{text:null},categories:[]},e.yAxis=[{allowDecimals:!1,labels:{format:"{value}"},title:{text:null},stackLabels:{enabled:!0}},{allowDecimals:!1,labels:{format:"{value}"},title:{text:null},opposite:!0}],e.$watch("selected.date",function(t){t&&_.forEach(e.dateCategories,function(n){n.text==t&&(e.xAxis.categories=n.date,e.chartSeries[0].data=n.data)})}),e.$watch("selected.alertDate",function(t){t&&"Default"!==t?_.forEach(e.alertDateCategories,function(n){n.text==t&&(C(),e.xAxis.categories=n.catgories,e.chartSeries[0].data=n.data,e.chartSeries[0].color=n.config&&n.config.color?n.config.color:e.chartSeries[0].color,n.type?e.chartSeries[0].type=n.type:e.chartSeries[0].type="line")}):b()}),e.$watch("selected.graph",function(t){"default"==t?(u(),y(e.selectedDays)):(u(),y(e.selectedDays))});var u=function(){e.chartConfig.xAxis.labels.enabled=!0,e.chartConfig.options.xAxis.labels.enabled=!0},m=function(e){var t=[],n=/^\d{1,2}\s.{3}\s\d{4}$/;return n.test(e[0])?e.forEach(function(e){t.push(e)}):e.forEach(function(e){t.push(moment(e,"YYYY-MM-DDTHH:mm:ss.sssZ").format("D MMM YYYY h:mm A"))}),t},p=function(t){if(e.allSeries){var n=[{text:"Default"}],i=function(e){var t=n.length;return _.forEach(n,function(n,i){return n.text!=e||(t=i)}),t};_.forEach(t,function(e,t){var o=moment(e,"D MMM YYYY HH:mm:ss"),r=o.format("D")+" "+moment.monthsShort()[o.format("M")-1]+" "+o.format("YYYY"),a=i(r);n[a]=n[a]||{},n[a].text=r}),e.flowCategories=n,f("Default"),e.selected.flowDate=n[0].text}},f=function(t){if(t){if("Default"==t)return b();C();var n=e.allSeries,i=e.allLocalDates;e.notification=!1,_.forEach(n,function(n,o){var r=[],a=[];_.forEach(i,function(e,i){var o=moment(e,"D MMM YYYY HH:mm:ss"),s=o.format("D")+" "+moment.monthsShort()[o.format("M")-1]+" "+o.format("YYYY");s==t&&(r.push(n.data[i]),a.push(e))}),e.xAxis.categories=a,e.chartSeries[o].data=r,e.chartSeries[o].color=n.config&&n.config.color?n.config.color:e.chartSeries[o].color,n.yAxis?e.chartSeries[o].yAxis=n.yAxis:delete e.chartSeries[o].yAxis,n.type?e.chartSeries[o].type=n.type:e.chartSeries[o].type="line"})}},g=function(){var t=!1,n=e.selected.id;return _.forEach(r,function(e){e.id==n&&(t=d.find(function(t){return t.id==e.statusSurveyId}))}),t?t.displayName:t},h=function(e){var t=null;return _.forEach(r,function(n){if(n.id==e)return void(t=n.measurementId)}),t},v=function(e,t){var n=!1,i=h(e);return t=t?t:[],_.forEach(s,function(e){var o=e.name.toLowerCase();t.indexOf(o)!=-1&&e.id==i&&(n=!0)}),n};e.$watch("selected.flowDate",function(e){e&&f(e)});var w,y=function(t,n,i){("custom"!=t||i)&&(e.$emit("wait:start"),a.getMonitorInsights(o.id,e.selected.id,t,n,i).then(function(n){if(w=n.lastSyncTime,e.lastSyncTime=n.lastSyncTime?moment(new Date(n.lastSyncTime)).format("MMM-DD-YYYY hh:mm A"):"not available",e.extraGraphs=!!n.extraSeries&&n.extraSeries,e.extraCategories=!!n.extraCategories&&n.extraCategories,e.flowCategoriesDate=!!n.categories&&n.categories,e.extraGraphs&&(_.isEmpty(e.extraSeries)&&_.forEach(e.extraGraphs,function(t,n){t&&t[0].data&&t[0].data.length&&e.extraSeries.push({key:n,name:"hours"==n?"Usage":n.charAt(0).toUpperCase()+n.slice(1)})}),e.extraGraphs.orignalSeries=n.series,e.extraGraphs.categories=n.categories),n.categories){var i=m(n.categories);if(e.notification=e.dateCategories=e.selected.date=!1,n.series=_.filter(n.series,function(e){return e.data.length}),e.isOxygenMeasurement)return e.allLocalDates=i,e.allSeries=n.series,e.$emit("wait:stop"),e.xAxis.categories=i,p(i);if(v(e.selected.id,["status"])){if("steps"==e.selected.graph){var o=[];e.chartConfig.series=e.extraGraphs.steps,_.forEach(e.extraGraphs.steps[0].data,function(e){o.push(moment(e.extra.date,"YYYY-MM-DDTHH:mm:ss.sssZ").format("D MMM YYYY h:mm A"))}),e.xAxis.categories=o,e.chartSeries[0].showInLegend=!0,e.chartSeries[0].name="steps"}else"status"==e.selected.graph&&n.series.forEach(function(t,n){var i=[],o=!0;if(e.series=t.data,_.forEach(e.series,function(e,t){var n=moment(e.extra.date,"YYYY-MM-DDTHH:mm:ss.sssZ").format("D MMM YYYY h:mm:ss A");e.extra.options.forEach(function(e){isNaN(e)&&(o=!1)});var r=_.find(i,function(t){return t.questionId==e.extra.id});r?(r.data.push(e),r.categories.push(n)):i.push({questionId:e.extra.id,data:[e],categories:[n],options:e.extra.options,text:"Q#"+(Object.keys(i).length+1)})}),o){var r=g(),a={text:r,categories:[],data:[],options:[r]},s=_.cloneDeep(i),c={},d=[];s.forEach(function(e){e.data.forEach(function(e,t){var n=moment(e.extra.date,"YYYY-MM-DDTHH:mm:ss.sssZ").format("D MMM YYYY hh:mm:ss A");if(c[t]=c[t]||[],c[t]=n,a.data[t]){var i=a.data[t].y+parseInt(e.y);a.data[t].y=i,a.data[t].extra.answer=i,a.data[t].extra.question=r,a.data[t].extra.date=e.extra.date}else e.y=parseInt(e.y),a.data[t]=e})}),_.forEach(c,function(e){d.push(e)}),a.categories=d,i=[a]}e.chartSeries[0].data=i[0].data,e.xAxis.categories=i[0].categories,e.chartConfig.series=i,e.questionCategories=i,e.selected.question=i[0].text,e.chartSeries[n].color=t.config&&t.config.color?t.config.color:e.chartSeries[n].color});e.chartConfig.options.legend={enabled:!1},e.chartConfig.options.plotOptions.series.color="rgb(0, 120, 114)",e.chartConfig.options.plotOptions.series.marker={symbol:"circle"}}n.series.forEach(function(t,n){e.isHeartBeatMeasurement?D(i,t):v(e.selected.id,["oxygen saturation","weight","temperature"])&&(e.xAxis.categories=i,e.chartSeries[n].data=t.data,e.chartSeries[n].color=t.config&&t.config.color?t.config.color:e.chartSeries[n].color,t.yAxis?e.chartSeries[n].yAxis=t.yAxis:delete e.chartSeries[n].yAxis,t.type?e.chartSeries[n].type=t.type:e.chartSeries[n].type="line")}),e.$emit("wait:stop")}if(365===t&&"status"==e.selected.graph){e.xAxis.categories=_.map(_.range(0,12),function(e,t){return moment().subtract(11-t,"month").format("MMM YYYY")});var r=_.map(_.range(0,12),function(t,n){var i=moment().subtract(11-n,"month").format("MMM YYYY"),o=_.filter(e.chartSeries[0].data,function(e){return moment(e.extra.date).format("MMM YYYY")===i}),r=Math.round(_.reduce(o,function(e,t){return e+t.y},0)/o.length);return{y:isNaN(r)?0:r,extra:{clickable:!1,name:"Status",month:i}}});e.chartConfig.series[0].categories=e.xAxis.categories,e.chartConfig.series[0].data=r}$()})["catch"](function(t){var n=t.headers("X-SynsorMed-Last-Sync-Time");e.lastSyncTime=n&&"false"!=n?moment(new Date(n)).format("MMM-DD-YYYY"):"not available",e.chartSeries.forEach(function(t,n){e.chartSeries[n].data=[]}),e.dateCategories=!1,e.selected.date=!1,409===t.status?e.notification=t.data||"Service has no readings submitted in these last 30 days for the current measurement":404===t.status?e.notification="No service linked":e.notification="No readings available",e.$emit("wait:stop")}))};e.$watch("selected.id",function(t){e.showDates=!1,_.forEach(e.monitorMeasurements,function(n){t==n.id&&n.serviceName&&(e.showDates=!0,e.selectedDays=e.selectedDays||7,P(),S()),t==n.id&&n.serviceName&&(e.selectedServiceName=n.serviceName)}),C(),u(),e.extraSeries=[],e.selected.graph="status",e.extraGraphs=!1,y(e.selectedDays)}),e.ok=function(){i.dismiss("cancel")};var $=function(){e.chartConfig&&(e.chartConfig.title.text=x(),e.chartConfig.subtitle.text=null)},S=function(){e.chartConfig.title.text="Loading..."},M=function(t){var n=null;switch(t){case 30:n="Month";break;case 1:n="Day";break;case 7:n="Week";break;case 365:n="Year";break;default:n="Custom"}e.monitorMeasurements&&e.monitorMeasurements.length&&e.monitorMeasurements.forEach(function(t){t.id==e.selected.id&&(e.chartConfig.title.text="Type: "+e.title+" | Device: "+e.selectedServiceName+" | Name: "+(e.monitor.patientName?e.monitor.patientName:"None"),e.chartConfig.subtitle.text="Range: "+n+" | Code: "+e.monitor.patientCode)})},C=function(){e.chartConfig.options.chart.type="line",e.chartConfig.series=e.chartSeries,e.chartSeries[0].data=[],e.chartSeries[1].data=[]},x=function(){var t="patient-chart";return e.monitorMeasurements&&e.monitorMeasurements.length&&e.monitorMeasurements.forEach(function(n){n.id==e.selected.id&&(t=n.name+"-"+e.monitor.patientCode,t.replace(/ /g,"")),n.id!=e.selected.id||"companion 5"!=n.name.toLowerCase()&&"eclipse"!=n.name.toLowerCase()||(t=e.title)}),t},D=function(t,n){var i=[],o=function(e){var t=i.length;return _.forEach(i,function(n,i){return n.text!=e||(t=i)}),t};_.forEach(t,function(e,t){var r=moment(e,"D MMM YYYY HH:mm:ss"),a=r.format("D")+" "+moment.monthsShort()[r.format("M")-1]+" "+r.format("YYYY"),s=o(a);i[s]=i[s]||{date:[],data:[]},i[s].date.push(e),i[s].data.push(n.data[t]),i[s].text=a}),e.dateCategories=i,e.selected.date=i[0].text},b=function(){if(e.extraGraphs){C(),"default"==e.selected.graph?e.title="Flow Rate":"hours"==e.selected.graph?e.title="Usage Hours":"alarms"==e.selected.graph&&(e.title="Alarms");var t="default"==e.selected.graph?e.extraGraphs.orignalSeries:e.extraGraphs[e.selected.graph],n=e.extraGraphs.categories?e.extraGraphs.categories:[],i=m(n),o=function(e){var t=[];return _.forEach(e,function(e,n){t[n]=e.extra.date}),e};if(e.getStatusClass=function(t,n){if(!n)return"status-green";var i=new Date(n),o=new Date(w),r=!1;return e.latestDates.Cleared&&n<e.latestDates.Cleared&&(r=new Date(e.latestDates.Cleared)),i.getDate()!=o.getDate()||i.getMonth()!=o.getMonth()||i.getFullYear()!=o.getFullYear()||r?"status-green":"status-red"},e.showAlertDates=function(t){var n=!1;if(_.forEach(e.alertNames,function(e){e==t&&(n=!0)}),n)return'<div style="width:80px"> '+e.lastSyncTime+"</div>"},e.notification=e.dateCategories=e.selected.date=!1,_.forEach(t,function(e){_.forEach(e.data,function(t,n){t&&"Cleared"==t.name&&(t=e.data.splice(n,1))})}),t=_.filter(t,function(e){return e.data.length}),"alarms"==e.selected.graph){e.chartConfig.options.legend={enabled:!1};var r=e.extraCategories?m(e.extraCategories.alarms):i;e.notification=(!r||!r.length)&&"No alarms found",e.chartConfig.options.chart.type="column",e.xAxis.categories=[],e.chartConfig.series=t;var a=[],s=[{text:"Default"}],c=function(e){var t=a.length;return _.forEach(a,function(n,i){return n.text!=e||(t=i)}),t},d=[];_.forEach(t,function(e){d.push(e.name)}),_.forEach(r,function(e,n){var i=moment(e,"D MMM YYYY HH:mm:ss"),o=i.format("D")+" "+moment.monthsShort()[i.format("M")-1]+" "+i.format("YYYY"),r=c(o),l=[];_.forEach(t,function(e){e.data[n]&&l.push(e.data[n])}),a[r]=a[r]||{date:[],data:[]},a[r].catgories=d,l.length&&(a[r].data=l),a[r].type="column",a[r].config={},a[r].text=o,_.find(s,{text:o})||s.push({text:o})}),e.alertDateCategories=a,e.alertDateCategoriesDropdown=s}else t.forEach(function(t,n){if(e.chartSeries[n].showInLegend=!1,"hours"==e.selected.graph){e.chartConfig.options.legend={enabled:!0};var r=[],a=e.extraCategories?m(e.extraCategories.hours):i;_.forEach(a,function(e){var t=moment(e).format("MM/DD/YYYY");r.push(t)}),e.xAxis.categories=r,t.data=o(t.data),e.chartSeries[n].showInLegend=!0,e.chartSeries[n].name=t.data[0].name}else if("default"==e.selected.graph){var s=[];e.flowCategoriesDate&&(_.forEach(e.flowCategoriesDate,function(e){var t=moment(e).format("DD MMM YYYY");s.push(t)}),e.xAxis.categories=s)}else e.xAxis.categories=i;e.chartSeries[n].data=t.data,e.chartSeries[n].color=t.config&&t.config.color?t.config.color:e.chartSeries[n].color,t.yAxis&&e.yAxis.length>1?e.chartSeries[n].yAxis=t.yAxis:delete e.chartSeries[n].yAxis,t.type?e.chartSeries[n].type=t.type:e.chartSeries[n].type="line"});e.chartConfig.yAxis[0].title.text=e.chartConfig.series[0]?e.chartConfig.series[0].data[0].extra.unit:null,e.$emit("wait:stop"),$()}};e.dayActive=!0,e.weekActive=!1,e.monthActive=!1,e.yearActive=!1,e.customActive=!1;var P=function(){e.dayActive=!1,e.weekActive=!0,e.monthActive=!1,e.yearActive=!1,e.customActive=!1,e.showDatePickers=!1};e.getDataAccTime=function(t){e.selectedDays=t,1==t?(e.dayActive=!0,e.weekActive=!1,e.monthActive=!1,e.yearActive=!1,e.customActive=!1,e.showDatePickers=!1):7==t?P():30==t?(e.dayActive=!1,e.weekActive=!1,e.monthActive=!0,e.yearActive=!1,e.customActive=!1,e.showDatePickers=!1):365==t?(e.dayActive=!1,e.weekActive=!1,e.monthActive=!1,e.yearActive=!0,e.customActive=!1,e.showDatePickers=!1):"custom"==t&&(e.dayActive=!1,e.weekActive=!1,e.monthActive=!1,e.yearActive=!1,e.customActive=!0,e.showDatePickers=!0),e.format="dd-MMMM-yyyy",e.maxDate=new Date,e.openCalender1=function(t){t.preventDefault(),t.stopPropagation(),e.open.opened1=!0},e.openCalender2=function(t){t.preventDefault(),t.stopPropagation(),e.open.opened2=!0},e.dateOptions={formatYear:"yy",startingDay:1},y(t)};var Y=function(){e.minDate=new Date(moment(e.firstDate).format("DD MMMM,YYYY")),e.weekActive?y(7):e.firstDate&&e.secondDate&&y(0,e.firstDate,e.secondDate)};e.open={},e.$watch("open.opened1",function(t){e.opened1=!0}),e.$watch("open.opened2",function(t){e.opened2=!0}),e.date={};var U=new Date;e.date.dt1=U,e.date.dt2=U,e.$watch("date.dt1",function(t){e.firstDate=moment(new Date(t)).format("YYYY-MM-DD"),Y()}),e.$watch("date.dt2",function(t){e.secondDate=moment(new Date(t)).format("YYYY-MM-DD"),Y()}),e.displaySummary=function(e){n.open({templateUrl:"javascripts/app/features/provider/monitor/patientSummary.html",controller:"PatientSummaryControllerModal",resolve:{monitor:function(){return e}}})},e.printChart=function(){var t=this;M(e.selectedDays),c(function(){var e=t.chartConfig.getHighcharts();e.exportChart({type:"application/pdf",filename:x()}),$()},10)},e.chartConfig={options:{navigation:{buttonOptions:{enabled:!1}},chart:{type:"line",backgroundColor:"rgba(255, 255, 255, 0.1)"},plotOptions:{column:{stacking:"normal",states:{hover:{color:{linearGradient:{x1:0,y1:1,x2:0,y2:0},stops:[[0,"#F05F3A"],[1,"#EF3809"]]}}},color:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#00918a"],[1,"#00ABA2"]]}},series:{point:{events:{click:function(t){var i=this.index;t&&t.point.extra.clickable&&n.open({templateUrl:"javascripts/app/features/provider/monitor/details/details.html",controller:"details",resolve:{series:function(){return e.series},id:function(){return i},date:function(){var n=e.series.length/_.get(e.questionCategories,t.point.index+".data.length");return(isNaN(n)||n!==Math.round(n))&&(n=5),e.series[(t.point.index?t.point.index+1:1)*n-1].extra.date}}})}}}}},tooltip:{borderWidth:0,useHTML:!0,backgroundColor:"#FFFFFF",formatter:function(){var e="<tr><td><b>Indicator</b></td><td>"+_.capitalize(this.point.extra.name)+"</td></tr>",t=null!=this.point.extra.unit?"<tr><td><b>Unit</b></td><td>"+this.point.extra.unit+"</td></tr>":"",n=this.point.extra.reading?this.point.extra.reading:this.point.extra.answer?this.point.extra.answer:0,i="<tr><td><b>Reading</b></td><td>"+n+"</td></tr>",o=this.point.extra.dayOnly?"D MMM YYYY":"D MMM YYYY h:mm A",r="hour"==this.point.extra.name.toLowerCase()?"MM/DD/YYYY":o,a=this.point.extra.date?"<tr><td><b>Date</b></td><td>"+moment(this.point.extra.date).format(r)+"</td></tr>":"";this.point.extra.month&&(a="<tr><td><b>Month</b></td><td>"+this.point.extra.month+"</td></tr>",i="<tr><td><b>Avg Reading</b></td><td>"+this.y+"</td></tr>");var s=this.point.extra.serialNumber?"<tr><td><b>Serial Number</b></td><td>"+this.point.extra.serialNumber+"</td></tr>":"";return'<table class="text-left table-condensed">'+e+t+i+a+s+"</table>"}},yAxis:e.yAxis,xAxis:e.xAxis,series:e.chartSeries},series:e.chartSeries,title:{text:null},subtitle:{text:null},credits:{enabled:!1},loading:!1,xAxis:e.xAxis,yAxis:e.yAxis}}]),angular.module("synsormed.features.provider.monitor.map",[]).controller("MonitorMapController",["$scope","$modalInstance","location","patientCode","$q",function(e,t,n,i,o){e.patientCode=i,e.location=n;var r=n?n.coords.latitude:null,a=n?n.coords.longitude:null;e.userPosition=[r,a],e.ok=function(){t.close()}}]).directive("reverseGeocode",["$q",function(e){return{restrict:"A",link:function(t,n,i){function o(){var t=e.defer(),n=new google.maps.Geocoder;return n.geocode({latLng:r},function(e,n){n==google.maps.GeocoderStatus.OK?e.length&&e[0]&&t.resolve(e[0].formatted_address):t.reject("Geocoder failed due to: "+n)}),t.promise}var r=new google.maps.LatLng(i.lat,i.lng),a=o();a.then(function(e){var i={zoom:13,center:r};t.map=new google.maps.Map(n[0],i),t.markers=[];var o=new google.maps.InfoWindow,a=new google.maps.Marker({map:t.map,position:r,title:e});a.content='<div class="infoWindowContent">'+a.title+"</div>",google.maps.event.addListener(a,"click",function(){o.setContent("<h4>"+a.title+"</h4>"+a.content),o.open(t.map,a)}),t.markers.push(a),t.map.setCenter(r)})["catch"](function(e){console.log("error",e)})}}}]),angular.module("synsormed.features.provider.monitor.summary",[]).controller("PatientSummaryControllerModal",["$scope","$rootScope","$modalInstance","monitor","$modal","$window","synsormed.services.UserService","synsormed.services.PatientService","synsormed.services.MonitorService","synsormed.services.ReportService",function(e,t,n,i,o,r,a,s,c,d){e.monitor=i,e.monitor.seenNotes=!0,e.patient="",e.providersName="",e.providersEmail=" ",e.providersList=[],e.newNote=null,e.durations=[{value:"",text:"Select Minutes"},{value:0,text:"0 minute"},{value:2,text:"2 minutes"},{value:5,text:"5 minutes"},{value:10,text:"10 minutes"},{value:15,text:"15 minutes"},{value:20,text:"20 minutes"},{value:30,text:"30 minutes"}],e.dropdownStatus={},e.editingNoteIndex=null,e.noteBeforeEditing="",e.updateDuration=function(t,n,i){""!==i&&(n.duration=i,e.dropdownStatus[t]=!1,e.saveMonitor())},e.saveMonitor=function(t,n){var i=angular.copy(e.monitor);_.forEach(i.notes,function(e,t){e.duration=60*e.duration}),e.$emit("wait:start"),c.updateMonitor(i).then(function(){n||e.$emit("notification",{type:"success",message:t||"Note successfully updated"}),e.$emit("wait:stop")})["catch"](function(t){e.$emit("wait:stop")})},e.saveMonitor("",!0),e.patientDetails=function(){e.$emit("wait:start"),s.getPatient(e.monitor.patientId).then(function(t){e.$emit("wait:stop"),e.patient=t,e.patient.age=moment().diff(moment(new Date(t.dob)),"years")})["catch"](function(t){e.$emit("wait:stop"),console.log(t)})},null!=e.monitor.patientId&&e.patientDetails(),e.showNotes=function(){null!=e.monitor.note&&0!=e.monitor.note.length&&(e.monitor.note.sort(function(e,t){return moment(e.date).diff(moment(t.date))}),e.monitor.note.reverse(),_.forEach(e.monitor.note,function(t,n){e.monitor.note[n].duration>30&&(e.monitor.note[n].duration=t.duration/60)}))},e.showNotes(),e.formatDate=function(e){return moment(e).format("LLLL")},e.editNote=function(t,n){e.editingNoteIndex=t,e.noteBeforeEditing=n.text},e.cancelEdit=function(){e.monitor.note[e.editingNoteIndex].text=e.noteBeforeEditing,e.editingNoteIndex=null},e.confirmEdit=function(){e.editingNoteIndex=null,e.saveMonitor()},e.updateNewNoteDuration=function(t){e.newNote.duration=t,e.dropdownStatus["new"]=!1},e.cancelAdd=function(){e.newNote=null},e.confirmAdd=function(){return e.newNote.duration||0===e.newNote.duration?(e.newNote.date=moment().utc().format(),e.monitor.note=e.monitor.note||[],e.monitor.note.unshift(e.newNote),e.monitor.addNote=!0,e.monitor.seenNotes=!1,e.saveMonitor("New note successfully added"),void(e.newNote=null)):e.$emit("notification",{type:"danger",message:"select the time first"})},e.addNote=function(t,n){
e.newNote={}},e.printNote=function(){if(void 0!=e.monitor.note){var t=450,n=450,i=screen.width/2-t/2,o=screen.height/2-n/2,a="";_.forEach(e.monitor.note,function(e){a=a+'<div style="float:left">'+e.date+'</div> <br /> <br /><div style="word-wrap:break-word"> '+e.text+' </div><br/><p style=" border-bottom: 2px solid #92ccc5;width: 92%; margin: auto; margin-top: 12px; margin-bottom: 12px;"> </p>'});var s='<div><div style="text-align:center"><h1>Note for '+e.monitor.patientCode+"</h1></div>"+a+"</div>",c=r.open("","PRINT","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+t+", height="+n+", top="+o+", left="+i);c.document.write("<html><head><title>"+document.title+"</title>"),c.document.write("</head><body >"),c.document.write(s),c.document.write("</body></html>"),c.document.close(),c.focus(),c.print(),c.close()}},e.deleteNote=function(t){if(e.monitor.note&&0!=e.monitor.note.length){var n=confirm("Are you sure you want to delete this note?");n&&(e.$emit("wait:start"),e.notes=angular.copy(e.monitor.note?e.monitor.note:[]),e.notes.splice(e.monitor.note.indexOf(t),1),e.monitor.note=e.notes,c.updateMonitor(e.monitor).then(function(){e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"Note Deleted"}),e.monitor.note&&e.showNotes()})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}))}},a.fetchAllUsers().then(function(t){_.forEach(t,function(t){"Provider"==t.role&&(e.providersList.push(t),_.forEach(e.monitor.providersId,function(n){t.id==n&&(e.providersName=e.providersName+t.name+", ",e.providersEmail=e.providersEmail+t.email+", ")}))}),e.providersName=e.providersName.slice(0,-2),e.providersEmail=e.providersEmail.slice(0,-2)})["catch"](function(e){console.log(e)}),e.editPatientDetail=function(){var t=o.open({templateUrl:"javascripts/app/features/settings/editPatient.html",controller:"SettingsPatientEditController",resolve:{patient:function(){return $.extend({},e.patient)},users:function(){return e.providersList}}});t.result.then(function(){e.patientDetails()})},e.downloadPDF=function(){e.$emit("wait:start"),d.getPdfToken(e.monitor.id).then(function(t){return e.$emit("wait:stop"),d.downLoadPdf(t,e.monitor.id)})["catch"](function(t){e.$emit("notification",{type:"danger",message:"Unable to download pdf file."}),e.$emit("wait:stop")})},e.ok=function(){n.close()}}]),angular.module("synsormed.features.provider.showMonitor",["synsormed.services.email"]).controller("ShowMonitorController",["$scope","$location","monitor","$modal",function(e,t,n,i){e.monitor=n,e.printInfo=function(){window.print()},e.SendEmail=function(){var t=i.open({templateUrl:"javascripts/app/features/provider/showMonitor/emailMonitor.html",controller:"EmailMonitorController",resolve:{monitor:function(){return n},users:function(){return e.users}}});t.result.then(function(t){t?e.$emit("notification",{type:"success",message:"Success"}):e.$emit("notification",{type:"danger",message:"Server Error."})})},e.$emit("pageLoaded",{title:"Print Monitor Code"})}]).controller("EmailMonitorController",["$scope","$modalInstance","monitor","synsormed.services.EmailService",function(e,t,n,i){e.monitor=n,e.email={data:null},e.$on("setForm",function(t,n){e.form=n}),e.ok=function(){e.$broadcast("validate"),e.form.$valid&&(e.$emit("wait:start"),i.sendCodeEmail(e.email.data,e.monitor.id,"monitor").then(function(){e.$emit("wait:stop"),t.close(!0)})["catch"](function(n){console.error(n),e.$emit("wait:stop"),t.close(!1)}))},e.cancel=function(){t.dismiss()}}]),angular.module("synsormed.features.provider.visits.video",["synsormed.services.worklist","synsormed.services.quickBlox","synsormed.services.timer"]).controller("VideoController",["$scope","$rootScope","synsormed.services.WorklistService","synsormed.services.QuickBlox","encounterId","providerId","$modalInstance","isBrowserSupported","$timeout","synsormed.services.TimerService",function(e,t,n,i,o,r,a,s,c,d){var l;s||e.$emit("notification",{type:"warning",message:"We recommend Chrome for video consults"});var u=null,m=null,p=null;e.encounterId=o;var f=function(){e.controls.start=!1,e.controls.dial=!0},g=function(){c(function(){e.$apply()},0)},h=function(){t.isCallStarted=!0,e.controls.start=!1,e.controls.dial=!1,e.showBackground=!0},v=function(){t.isCallStarted=!1,e.controls.start=!0,e.showBackground=!1,u=null,e.$emit("notification",{type:"danger",message:"Call is disconnected"}),e.close()};e.controls={start:!0,audio:!0,video:!0,dial:!1},e.$emit("wait:start"),n.getQuickBloxDetails(r).then(function(e){return p=e,n.getEncounterQuickBoxDetails(o)}).then(function(n){return m=n.id,i.initialize(p.token),QB.webrtc.onCallListener=function(t,n){u=t,i.getUserMedia(t).then(function(e){t.attachMediaStream("localVideo",e),t.accept(n)})["catch"](function(t){if(u=null,404==t.code){var n=t.device;e.$emit("notification",{type:"danger",message:n+" device not found."})}console.log(t)})},QB.webrtc.onRemoteStreamListener=function(e,t,n){e.attachMediaStream("remoteVideo",n)},QB.webrtc.onAcceptCallListener=function(e,n,i){l=i.startDate?moment(i.startDate):moment(),t.isCallStarted=!0},QB.webrtc.onUserNotAnswerListener=function(t,n){e.$emit("notification",{type:"danger",message:"No response from user"}),g()},QB.webrtc.onRejectCallListener=function(t,n,i){e.$emit("notification",{type:"danger",message:"Call is rejected"}),g()},QB.webrtc.onStopCallListener=function(e,t,n){v(),g()},QB.webrtc.onSessionConnectionStateChangedListener=function(e,t,n){switch(n){case 0:console.log("Undefined Error");break;case 1:console.log("Connecting Please wait");break;case 2:h(),console.log("Call is connected");break;case 3:case 4:case 5:v(),console.log("Call is closed");break;case 6:console.log("Call is completed")}g()},i.connectUser(p.id,p.password)}).then(function(t){e.$emit("wait:stop"),e.startCall2()})["catch"](function(t){console.log(t),e.$emit("wait:stop"),404==t.status&&(console.log("callee Not found"),e.disableBtn=!0),e.$emit("notification",{type:"danger",message:"Server Error"})}),e.startCall=function(){var t=[m];u=i.createSession(t),i.getUserMedia(u).then(function(e){f(),u.attachMediaStream("localVideo",e),i.startCall(u)})["catch"](function(t){u.stop(m,{}),404==t.code&&(t.device,e.$emit("notification",{type:"danger",message:t.message})),console.log(t)})},e.startCall2=function(){var t=[m],n=QB.webrtc.CallType.VIDEO;u=QB.webrtc.createNewSession(t,n);var o={audio:!0,video:!0};u.getUserMedia(o,function(t,n){t?(u.stop(m,{}),404==t.code&&(t.device,e.$emit("notification",{type:"danger",message:t.message})),console.log("*** Video issue getting userMedia: "+t)):(f(),u.attachMediaStream("localVideo",n),i.startCall(u))})},e.endCall=function(){u&&(u.stop(m,{}),t.isCallStarted||u.update({disconnected:!0}),v())},e.toggleType=function(t){u&&(e.controls[t]?(u.mute(t),e.controls[t]=!1):(u.unmute(t),e.controls[t]=!0))},e.close=function(){u&&(u.stop(m,{}),u=null),t.videoModelOpened&&a.dismiss()},e.$watch("isCallStarted",function(t){t?(e.$emit("web:chat:started"),d.startTimer(function(t){e.duration=t},l)):(e.$emit("web:chat:stopped"),d.cancelTimer())}),e.$on("$destroy",function(){e.endCall()})}]),angular.module("synsormed.features.provider.visits",["synsormed.services.worklist","synsormed.services.encounter","synsormed.services.user","synsormed.services.pageState","synsormed.services.patient","synsormed.features.provider.visits.video","synsormed.services.notify"]).controller("VisitsController",["$scope","$rootScope","users","$location","$modal","synsormed.services.WorklistService","synsormed.services.EncounterService","synsormed.services.UserService","debounce","synsormed.services.WorkListStateService","$filter","$interval",function(e,t,n,i,o,r,a,s,c,d,l,u){function m(t){t=t||e.worklist,e.pageCount=Math.ceil(t.length/e.pagination.pageSize),e.pages=[];for(var n=1;n<=e.pageCount;n++)e.pages.push(n)}function p(){e.$emit("wait:start"),r.fetchWorklist(h,e.worklistDate).then(function(t){return e.worklistLoading=!1,e.worklist=t,e.filteredWorklist=M(t),"provider"==e.user.role.toLowerCase()?C().then(function(){e.$emit("wait:stop")}):e.$emit("wait:stop")})["catch"](function(){e.$emit("notification",{type:"danger",message:"Server error."})})}var f=s.fetchCachedUser();e.user=f,t.onlineEncounters={};var g=d.getWorkListState(),h=(g?g.lastViewedUser:0)||e.user.id,v=function(t){if(t.length){var n={id:0,name:"All",role:"Provider"};e.users.unshift(n)}},w=function(e){var t=[];return e.forEach(function(e){e.id&&t.push(e)}),t},y=function(){d.setWorkListState({worklist_date:e.worklistDate,lastViewedUser:e.showUser.id,pageSize:e.pagination.pageSize,page:e.pagination.page,callStatusId:e.callStatusId})};if("Admin"===f.role?(e.users=n.filter(function(e){return"Provider"===e.role}),v(e.users)):"Provider"==f.role&&(e.users=n.filter(function(e){return e.id===f.id})),"Provider"!=f.role&&e.users.length>0){var $=h,S=e.users.filter(function(e){return e.id===$});h=$>0&&S.length?$:e.users[0].id}e.alert={type:"danger"},0==e.users.length&&(e.alert.msg="You must have at least one provider added to the system to see worklists"),e.worklistLoading=!0,e.pagination={pageSizes:[5,10,25,50,100],pageSize:g?g.pageSize:5,page:g?g.page:1},e.worklist=[],e.pageCount=0,e.showUser={id:g?g.lastViewedUser:!!e.users.length&&e.users[0].id},e.datepicker={opened:!1},e.worklistDate=g&&g.worklist_date?moment(g.worklist_date).toDate():new Date,e.callStatus=[{name:"All",id:1},{name:"Call completed",id:2},{name:"Call pending",id:3}],e.callStatusId=g?g.callStatusId||e.callStatus[0].id:e.callStatus[0].id,e.$watch("worklistDate",function(t,n){moment(t).toString()!=moment(n).toString()&&(moment(t).toString()!=moment(n).toString()&&(e.pagination.page=1),y(),p())}),e.$watch("showUser.id",function(t,n){t!=n&&(e.pagination.page=1),h=e.showUser.id,y(),p()},!0),e.$watch("worklist",function(){m()}),e.$watch("pagination.pageSize",function(t,n){t!=n&&(e.pagination.page=1),y(),m(),e.filteredWorklist=M(e.worklist)},!0),e.$watch("pagination.page",function(){y(),e.filteredWorklist=M(e.worklist)},!0),e.$watch("callStatusId",function(t){y(),e.filteredWorklist=M(e.worklist)}),e.$emit("pageLoaded",{title:"Visits"}),e.displayLocation=function(e,t){o.open({templateUrl:"javascripts/app/features/provider/visits/map.html",controller:"EncounterMapController",windowClass:"custom-map-modal",resolve:{location:function(){return t},patientCode:function(){return e}}})},e.showPatientInfo=function(e){var t,n="No patient is linked with this code";if(e.patientName){var i="Not available",o="<span>Email : "+(e.patientEmail||i)+"</span><br/>",r="<span>Mobile : "+(e.patientPhone||i)+"</span>";t=o+r}return"<div>"+(t||n)+"</div>"},e.pageTurn=function(t){1==e.pagination.page&&t<0||e.pagination.page==e.pageCount&&t>0||(e.pagination.page=e.pagination.page+t)},e.pageTo=function(t){e.pagination.page=t},e.open=function(t){t.preventDefault(),t.stopPropagation(),e.datepicker.opened=!e.datepicker.opened},e.refreshWorkList=function(){e.worklistLoading=!0,p()},e.deleteEncounter=function(t){confirm("There is no way to undo this action. Are you sure you want to delete this code?")&&(e.$emit("wait:start"),a.deleteEncounter(t).then(function(){e.$emit("wait:stop"),e.$emit("notification",{type:"success",message:"Code deleted"}),p()})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}))},e.getCallCompletionDate=function(e,t){if(e){var n=moment(e).add(t,"seconds").toDate();return n=l("date")(n,"short"),"On "+n}return"N/A"},e.openVideoPopUp=function(n){if(t.videoModelOpened)return e.$emit("notification",{type:"danger",message:"Video Popup is already called"});var i=o.open({backdrop:!1,templateUrl:"javascripts/app/features/provider/visits/video.html",controller:"VideoController",windowClass:"custom-video-modal",resolve:{encounterId:function(){return n},providerId:function(){return h}}});i.opened.then(function(){t.videoModelOpened=!0}),i.result.then(function(e){t.videoModelOpened=!1,p()},function(){t.videoModelOpened=!1,p()})},e.notifyEncounter=function(e){e&&o.open({templateUrl:"javascripts/app/features/provider/monitor/notification.html",controller:"EncounterNotificationController",windowClass:"monitor-service-modal",resolve:{encounter:function(){return e}}})},e.callDuration=function(e){if(e=e||0,e<=0)return"N/A";var t,n;if(t=n="00",e>=3600){var t=Math.floor(e/3600);t=t<10?"0"+t:t,e%=3600}if(e>=60){var n=Math.floor(e/60);n=n<10?"0"+n:n,e%=60}return e=e<10?"0"+e:e,t+":"+n+":"+e},e.editEncounter=function(t){if(!e.users.length)return e.$emit("notification",{type:"info",message:"Please add provider first."}),!1;var n=o.open({templateUrl:"javascripts/app/features/provider/visits/editEncounter.html",controller:"EncounterEditController",resolve:{encounter:function(){return t},users:function(){return w(e.users)},showUser:function(){return e.showUser}}});n.result.then(function(e){e?i.path("/showCode").search({id:e.id}):p()})},e.showNotes=function(e){o.open({templateUrl:"javascripts/app/features/provider/visits/editNote.html",controller:"NoteEditController",resolve:{encounter:function(){return e}}})};var M=function(t){switch(e.callStatusId){case 2:t=l("filter")(t,{callCompleted:!0});break;case 3:t=l("filter")(t,{callCompleted:!1})}if(m(t),Math.ceil(e.worklist.length/e.pagination.pageSize)<e.pagination.page&&(e.pagination.page=e.pagination.page-1),t.length<e.pagination.pageSize)return t;e.pagination.page=e.pagination.page<=0?1:e.pagination.page;var n=e.pagination.page*e.pagination.pageSize,i=(e.pagination.page-1)*e.pagination.pageSize;return n>=t.length&&(n=t.length),t.slice(i,n)};e.$watch("currentDate",c(function(){e.worklistDate=e.currentDate},500),!0);var C=function(){return r.fetchOnlinePatients(h,e.worklistDate).then(function(e){var n={};_.forEach(e,function(e){n[e.id]=!0}),t.onlineEncounters=n})["catch"](function(e){console.log(e)})};if("provider"==e.user.role.toLowerCase()){var x=function(){r.pingServer()};x();var D=u(function(){C(),x()},3e4);e.$on("$destroy",function(){u.cancel(D)})}}]).controller("EncounterNotificationController",["$scope","encounter","$modalInstance","synsormed.services.NotifyService",function(e,t,n,i){e.patientCode=!!t&&t.patientCode,e.title="Send message "+e.patientCode,e.$on("setForm",function(t,n){e.form=n}),e.send=function(){e.$broadcast("validate"),e.form.$valid&&(e.waiting=!0,i.sendPushNotificationToEncounter(t.id,e.form.message.$modelValue).then(function(t){e.waiting=!1,e.$emit("notification",{type:"success",message:"Notification successfully sent"}),n.dismiss()})["catch"](function(t){e.waiting=!1;var n="Notification sending failed";t&&t.data&&t.data.code&&404==t.data.code&&(n="This user does not have messaging enabled"),e.$emit("notification",{type:"danger",message:n})}))},e.cancel=function(){n.dismiss()}}]).controller("NoteEditController",["$scope","$modalInstance","encounter","synsormed.services.EncounterService",function(e,t,n,i){e.encounter=n,e.notification="",e.ok=function(){e.notification="",i.updateEncounter(n).then(function(){t.close()})["catch"](function(t){e.notification="Server error"})},e.cancel=function(){t.dismiss()}}]).controller("EncounterEditController",["$scope","$modalInstance","encounter","users","showUser","synsormed.services.EncounterService","synsormed.services.UserService","synsormed.services.WorklistService","synsormed.services.WorkListStateService","synsormed.services.PatientListService","$modal",function(e,t,n,i,o,r,a,s,c,d,l){e.users=i,e.encounter=n,e.notification="",e.showUser=o,e.patients=[];var u=c.getWorkListState(),m=(u?u.lastViewedUser:0,a.fetchCachedUser()),p=m;"Provider"!=m.role&&e.users.length>0?p=e.users[0]:"Provider"!=m.role&&(p={}),e.isNew=!n,e.useUser={id:!e.isNew&&e.encounter.providerId?e.encounter.providerId:e.users[0].id},e.minDate=e.isNew?new Date:new Date(n.scheduledStartTime),e.maxDate=new Date,e.maxDate.setFullYear(e.maxDate.getFullYear()+5),e.data={followupDate:new Date,followupTime:new Date,reasonForVisit:null,isCCM:!1},e.isNew||(e.data={followupDate:new Date(e.encounter.scheduledStartTime),followupTime:new Date(e.encounter.scheduledStartTime),reasonForVisit:e.encounter.reasonForVisit,isCCM:e.encounter.isCCM}),e.$on("setForm",function(t,n){e.form=n}),e.open=function(t){t.preventDefault(),t.stopPropagation(),e.opened=!e.opened},e.ok=function(){if(e.notification="",e.$broadcast("validate"),e.form.$valid)if(e.isNew){var t={reasonForVisit:e.data.reasonForVisit,isCCM:e.data.isCCM};"Admin"===m.role&&(t.providerId=e.useUser.id),t=f(t,e.data.followupDate,e.data.followupTime),h(t)}else"Admin"===m.role&&(n.providerId=e.useUser.id),n=f(n,e.data.followupDate,e.data.followupTime),g(n,e.data.reasonForVisit,e.data.isCCM)};var f=function(e,t,n){return e.scheduledStartTime=t,e.scheduledStartTime.setHours(n.getHours(),n.getMinutes(),0,0),e},g=function(n,i,o){n.reasonForVisit=i,n.isCCM=!!o,n.patientId=e.data.patientId,e.$emit("wait:start"),r.updateEncounter(n).then(function(){e.$emit("wait:stop"),t.close()})["catch"](function(t){e.$emit("wait:stop"),e.notification="Server error"})},h=function(n){e.$emit("wait:start"),n.patientId=e.data.patientId,r.createEncounter(n).then(function(n){e.$emit("wait:stop"),t.close(n)})["catch"](function(){e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})})},v=function(t){var n={id:0,name:"--No Patient--"};e.patients.unshift(n)},w=function(t,n){var i=!(e.isNew||!n.patientId)&&n.patientId,o=t[0].id;if(i){var r=t.find(function(e){return e.id==i});o=r?i:t[0].id}return o},y=function(t){t&&(e.$emit("wait:start"),d.getPatients(t).then(function(t){e.$emit("wait:stop"),e.patients=t||[],v(t),e.data.patientId=w(e.patients,e.encounter)})["catch"](function(t){e.$emit("wait:stop"),console.log(t)}))};e.cancel=function(){t.dismiss()},e.$watch("useUser.id",function(e,t){y(e)}),e.createPatient=function(){var t=l.open({templateUrl:"javascripts/app/features/settings/editPatient.html",controller:"SettingsPatientEditController",resolve:{patient:function(){return{}},users:function(){return e.users}}});t.result.then(function(t){y(e.useUser.id)})}}]).controller("EncounterMapController",["$scope","$modalInstance","location","patientCode",function(e,t,n,i){e.patientCode=i,e.location=n;var o=n?n.coords.latitude:null,r=n?n.coords.longitude:null;e.userPosition=[o,r],e.ok=function(){t.dismiss()}}]),angular.module("synsormed.features.provider.showCode",["synsormed.services.email"]).controller("ShowCodeController",["$scope","$location","encounter","$modal",function(e,t,n,i){e.encounter=n,e.printInfo=function(){window.print()},e.sendEmail=function(){var t=i.open({templateUrl:"javascripts/app/features/provider/showCode/emailCode.html",controller:"EmailCodeController",resolve:{encounter:function(){return n}}});t.result.then(function(t){t?e.$emit("notification",{type:"success",message:"Success"}):e.$emit("notification",{type:"danger",message:"Server Error."})})},e.$emit("pageLoaded",{title:"Print Code"})}]).controller("EmailCodeController",["$scope","$modalInstance","encounter","synsormed.services.EmailService",function(e,t,n,i){e.encounter=n,e.email={data:null},e.$on("setForm",function(t,n){e.form=n}),e.ok=function(){e.$broadcast("validate"),e.form.$valid&&(e.$emit("wait:start"),i.sendCodeEmail(e.email.data,e.encounter.id,"encounter").then(function(){e.$emit("wait:stop"),t.close(!0)})["catch"](function(n){console.error(n),e.$emit("wait:stop"),t.close(!1)}))},e.cancel=function(){t.dismiss()}}]),angular.module("synsormed.features.reports.billing",[]).controller("BillingReportController",["$scope","$rootScope","$modal","$modalInstance","synsormed.services.UserService","synsormed.services.PatientService","synsormed.services.adminInsight.InsightService",function(e,t,n,i,o,r,a){e.days=[{id:1,name:moment().format("MMMM YYYY")},{id:2,name:moment().subtract(1,"month").endOf("month").format("MMMM YYYY")},{id:3,name:moment().subtract(2,"month").endOf("month").format("MMMM YYYY")},{id:4,name:moment().subtract(3,"month").endOf("month").format("MMMM YYYY")},{id:5,name:moment().subtract(4,"month").endOf("month").format("MMMM YYYY")},{id:6,name:moment().subtract(5,"month").endOf("month").format("MMMM YYYY")},{id:7,name:moment().subtract(6,"month").endOf("month").format("MMMM YYYY")},{id:99,name:"Custom"}],e.day={selectedDay:1},e.customDates=!1,e.$watch("day.selectedDay",function(t,n){e.customDates=!1,t<99?(e.firstDate=moment().subtract(t-1,"month").startOf("month").format("YYYY-MM-DD"),e.secondDate=moment().subtract(t-1,"month").endOf("month").format("YYYY-MM-DD HH:mm:ss"),0==t&&(e.secondDate=moment().add(1,"days").format("YYYY-MM-DD"))):99==t&&(e.customDates=!0,e.date.dt1=new Date,e.date.dt2=new Date)},!0),e.open={},e.$watch("open.opened1",function(t){e.opened1=!0}),e.$watch("open.opened2",function(t){e.opened2=!0}),e.format="dd-MMMM-yyyy",e.maxDate=new Date,e.openCalender1=function(t){t.preventDefault(),t.stopPropagation(),e.open.opened1=!0},e.openCalender2=function(t){t.preventDefault(),t.stopPropagation(),e.open.opened2=!0},e.dateOptions={formatYear:"yy",startingDay:1},e.date={},e.$watch("date.dt1",function(t){e.firstDate=moment(new Date(t)).format("YYYY-MM-DD"),console.log("custom date start",moment.utc(e.firstDate).format())}),e.$watch("date.dt2",function(t){e.secondDate=moment(new Date(t)).format("YYYY-MM-DD"),console.log("custom date end",moment.utc(e.secondDate).format())}),e.requestReport=function(){"Invalid date"==e.firstDate&&(e.firstDate=moment().startOf("month").format(),e.secondDate=moment().format("YYYY-MM-DD")),e.$emit("wait:start");var t=n.open({templateUrl:"javascripts/app/features/reports/billing/gatheringdata.html",windowClass:"rpm-report-modal"});r.getBillingReport(moment.utc(e.firstDate).format(),moment.utc(e.secondDate).format()).then(function(i){t.dismiss(),e.$emit("wait:stop"),n.open({templateUrl:"javascripts/app/features/reports/billing/download.html",controller:"BillingReportResultController",windowClass:"rpm-report-modal",resolve:{hasResult:function(){return"true"===i}}})})["catch"](function(t){e.$emit("wait:stop"),console.log(t)})},e.ok=function(){i.dismiss()}}]).controller("BillingReportResultController",["$scope","$modal","$modalInstance","synsormed.services.PatientService","hasResult",function(e,t,n,i,o){e.hasResult=o,e.getBillingReportURL=function(){return i.getBillingReportURL()},e.ok=function(){n.dismiss()}}]),angular.module("synsormed.features.reports.rpm",[]).controller("RpmReportController",["$scope","$rootScope","$modal","$modalInstance","synsormed.services.UserService","synsormed.services.PatientService","synsormed.services.adminInsight.InsightService",function(e,t,n,i,o,r,a){e.user=o.fetchCachedUser(),new Date,e.days=[{id:1,name:"This Week"},{id:2,name:"This Month"},{id:3,name:"This Quarter"},{id:4,name:"This Year"},{id:5,name:"Last Week"},{id:6,name:"Last Month"},{id:7,name:"Last Quarter"},{id:8,name:"Last Year"},{id:99,name:"Custom"}],e.day={selectedDay:1},e.customDates=!1,e.globalAdmin=!1,e.user&&"GlobalAdmin"==e.user.role&&(e.globalAdmin=!0),e.globalAdmin&&a.getAllOrganizations(e.globalAdmin).then(function(t){e.orgs=t,e.org=t[0],e.$emit("wait:stop")})["catch"](function(t){e.orgs=[],e.$emit("wait:stop"),e.$emit("notification",{type:"danger",message:"Server error."})}),e.$watch("day.selectedDay",function(t,n){e.customDates=!1,1==t?(e.firstDate=moment().startOf("week").format("YYYY-MM-DD"),e.secondDate=moment().add(1,"days").add(8,"hours").format("YYYY-MM-DD")):2==t?(e.firstDate=moment().startOf("month").format("YYYY-MM-DD"),e.secondDate=moment().add(1,"days").add(8,"hours").format("YYYY-MM-DD")):3==t?(e.firstDate=moment().startOf("quarter").format("YYYY-MM-DD"),e.secondDate=moment().add(1,"days").add(8,"hours").format("YYYY-MM-DD")):4==t?(e.firstDate=moment().startOf("year").format("YYYY-MM-DD"),e.secondDate=moment().add(1,"days").add(8,"hours").format("YYYY-MM-DD")):5==t?(e.firstDate=moment().subtract(1,"week").startOf("week").format("YYYY-MM-DD"),e.secondDate=moment().subtract(1,"week").endOf("week").add(1,"days").format("YYYY-MM-DD")):6==t?(e.firstDate=moment().subtract(1,"month").startOf("month").format("YYYY-MM-DD"),e.secondDate=moment().subtract(1,"month").endOf("month").add(1,"days").format("YYYY-MM-DD")):7==t?(e.firstDate=moment().subtract(1,"quarter").startOf("quarter").format("YYYY-MM-DD"),e.secondDate=moment().subtract(1,"quarter").endOf("quarter").add(1,"days").format("YYYY-MM-DD")):8==t?(e.firstDate=moment().subtract(1,"year").startOf("year").format("YYYY-MM-DD"),e.secondDate=moment().subtract(1,"year").endOf("year").add(1,"days").format("YYYY-MM-DD")):99==t&&(e.customDates=!0,e.date.dt1=new Date,e.date.dt2=new Date)},!0),e.open={},e.$watch("open.opened1",function(t){e.opened1=!0}),e.$watch("open.opened2",function(t){e.opened2=!0}),e.format="dd-MMMM-yyyy",e.maxDate=new Date,e.openCalender1=function(t){t.preventDefault(),t.stopPropagation(),e.open.opened1=!0},e.openCalender2=function(t){t.preventDefault(),t.stopPropagation(),e.open.opened2=!0},e.dateOptions={formatYear:"yy",startingDay:1},e.date={},e.$watch("date.dt1",function(t){e.firstDate=moment(new Date(t)).format("YYYY-MM-DD"),e.customDates}),e.$watch("date.dt2",function(t){e.secondDate=moment(new Date(t)).add(1,"days").add(8,"hours").format("YYYY-MM-DD"),e.customDates}),e.requestReport=function(){"Invalid date"==e.firstDate&&(e.firstDate=moment().startOf("week").format("YYYY-MM-DD"),e.secondDate=moment().add(1,"days").add(8,"hours").format("YYYY-MM-DD")),e.$emit("wait:start");var t=n.open({templateUrl:"javascripts/app/features/reports/rpm/gatheringReport.html",windowClass:"rpm-report-modal"});r.getRPMReport(e.firstDate,e.secondDate).then(function(i){t.dismiss(),e.$emit("wait:stop"),n.open({templateUrl:"javascripts/app/features/reports/rpm/rpmReport.html",controller:"RPMReportResultController",windowClass:"rpm-report-modal",resolve:{hasResult:function(){return"true"===i}}})})["catch"](function(t){e.$emit("wait:stop"),console.log(t)})},e.ok=function(){i.dismiss()}}]).controller("RPMReportResultController",["$scope","$modal","$modalInstance","synsormed.services.PatientService","hasResult",function(e,t,n,i,o){e.hasResult=o,e.getURL=function(){return i.getURL()},e.ok=function(){n.dismiss()}}]),angular.module("synsormed.features.provider.monitor.details",[]).controller("details",["$scope","$modal","$modalInstance","series","id","date",function(e,t,n,i,o,r){var a=[],s=[],c=!1;_.forEach(i,function(e){s.indexOf(e.extra.id)==-1&&s.push(e.extra.id)});for(var d=i.length-1;d>=0;d--){var l=i[d];c&&a.push(l),l.extra.date==r&&(a.push(l),c=!0),a.length==s.length&&(c=!1)}e.results=a.reverse(),e.close=function(){n.dismiss("cancel")}}]);
angular.module("synsormed.portal",["templates","ngRoute","ngAnimate","ngSanitize","ui.bootstrap","uiSwitch","highcharts-ng","ui.select","LocalStorageModule","AuraDropdownModule","synsormed.directives.datepicker","synsormed.directives.toggleList","synsormed.directives.safereading","synsormed.directives.indicatorList","synsormed.directives.healthindicator","synsormed.directives.stackedToggleProgressBar","ui-rangeSlider","synsormed.features.login","synsormed.features.ehr","synsormed.features.provider","synsormed.features.settings","synsormed.features.settings.patient","synsormed.features.register","synsormed.features.insights","synsormed.features.forgot","synsormed.features.emergency","synsormed.features.admin","synsormed.features.organization","synsormed.features.patient.auth","synsormed.features.patient.call","synsormed.components.wait","synsormed.services.user","synsormed.services.encounter","synsormed.services.practice","synsormed.services.pageState","synsormed.services.insight","synsormed.services.monitor","ui.mask","ngComboDatePicker","synsormed.directives.education","synsormed.features.reports","synsormed.features.reports.rpm","synsormed.features.reports.billing","synsormed.directives.exportCSV","synsormed.directives.exportPDF","synsormed.directives.dragdrop","ngMap","synsormed.features.provider.monitor.details","btford.socket-io"]).constant("env",{apiBaseUrl:"/proxy/v1/",appID:41633}).constant("superAdminUrls",[]).constant("orgCreatorUrls",["/register"]).constant("patientUrls",["/patient/call"]).constant("publicUrls",["/","/login","/forgot","/forgot/reset","/forgot/success","/ehr/graph","/ehr/monitor","/emergency","/patient"]).config(["$routeProvider","$httpProvider","uiSelectConfig",function(e,t,r){r.theme="bootstrap",t.defaults.headers.get||(t.defaults.headers.get={}),t.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",t.defaults.headers.get["Cache-Control"]="no-cache",t.defaults.headers.get.Pragma="no-cache",t.defaults.withCredentials=!0,t.defaults.headers.common["x-csrf"]='"'+sessionStorage.getItem("x-csrf")+'"',t.defaults.headers.common["X-Session-Token"]=sessionStorage.getItem("X-Session-Token"),t.interceptors.push(["$rootScope","$q",function(e,t){return{responseError:function(r){return 403==r.status&&e.$broadcast("session:loggedOut"),t.reject(r)}}}]),e.when("/",{controller:["$scope","synsormed.services.UserService","$location",function(e,t,r){e.foo="",t.fetchCachedUser()?r.path("/monitor"):r.path("/login")}],template:"<div class='container'><h1>Welcome</h1><p>Please select one of the links on the top to use the application.</p></div>"}),e.when("/showCode",{resolve:{encounter:["synsormed.services.EncounterService","$route",function(e,t){return e.getEncounter(t.current.params.id)}]},controller:"ShowCodeController",templateUrl:"javascripts/app/features/provider/showCode/showCode.html"}),e.when("/showMonitor",{resolve:{monitor:["synsormed.services.MonitorService","$route",function(e,t){return e.getMonitor(t.current.params.id)}]},controller:"ShowMonitorController",templateUrl:"javascripts/app/features/provider/showMonitor/showMonitor.html"}),e.when("/login",{controller:"LoginController",templateUrl:"javascripts/app/features/login/login.html",resolve:{removeCurrentUser:["synsormed.services.UserService","synsormed.services.WorkListStateService","synsormed.services.MonitorStateService","synsormed.services.PatientStateService","$modalStack",function(e,t,r,n,o){e.clearCachedUser(),t.clearState(),r.clearState(),n.clearState(),o.getTop()&&o.dismissAll()}]}}),e.when("/register",{controller:"RegisterController",templateUrl:"javascripts/app/features/register/register.html"}),e.when("/visits",{controller:"VisitsController",templateUrl:"javascripts/app/features/provider/visits/visits.html",resolve:{users:["synsormed.services.UserService",function(e){return e.fetchAllUsers()}]}}),e.when("/ehr/monitor",{controller:"EhrMonitorController",templateUrl:"javascripts/app/features/ehr/monitor/monitor.html"}),e.when("/ehr/graph",{controller:"EhrGraphController",templateUrl:"javascripts/app/features/ehr/graph/graph.html"}),e.when("/monitor",{controller:"MonitorController",templateUrl:"javascripts/app/features/provider/monitor/monitor.html",resolve:{users:["synsormed.services.UserService",function(e){return e.fetchAllUsers()}]}}),e.when("/settings",{controller:"SettingsController",resolve:{practice:["synsormed.services.PracticeService","synsormed.services.UserService",function(e,t){var r=t.fetchCachedUser();return e.getPractice(r.practiceId)}]},templateUrl:"javascripts/app/features/settings/settings.html"}),e.when("/insights",{controller:"InsightsController",templateUrl:"javascripts/app/features/insights/insights.html"}),e.when("/reports",{controller:"ReportsController",templateUrl:"javascripts/app/features/reports/reports.html",resolve:{users:["synsormed.services.UserService",function(e){return e.fetchAllUsers()}]}}),e.when("/forgot",{controller:"ForgotPasswordController",templateUrl:"javascripts/app/features/forgot/forgotLink.html"}),e.when("/forgot/reset",{controller:"ResetPasswordController",templateUrl:"javascripts/app/features/forgot/resetForm.html"}),e.when("/forgot/success",{controller:"ForgotSuccessController",templateUrl:"javascripts/app/features/forgot/forgotSuccess.html"}),e.when("/emergency",{controller:"EmergencyAccessController",templateUrl:"javascripts/app/features/emergency/emergencyAccess.html"}),e.when("/admin/insights",{controller:"AdminInsightsController",templateUrl:"javascripts/app/features/admin/insights/insights.html"}),e.when("/organization/:id",{controller:"OrganizationController",templateUrl:"javascripts/app/features/organization/organization.html"}),e.when("/patient",{controller:"PatientAuthController",templateUrl:"javascripts/app/features/patient/auth.html"}),e.when("/patient/call",{controller:"PatientCallController",templateUrl:"javascripts/app/features/patient/encounter/call.html"})}]).controller("AppContainerController",["$scope","$window","$rootScope","$location","synsormed.services.UserService","$timeout","$interval","isOnPublicUrl","synsormed.services.UserService.SuperAdminState","synsormed.services.adminInsight.InsightService",function(e,t,r,n,o,s,i,a,c,l){var u=window.location.href.split("/");u="/"+u[u.length-1],"/"==u&&"/login"==u||o.directRequestUrl(u),r.$on("checkMonitors:license",function(){l.checkLicenseExpiration().then(function(e){JSON.parse(e)?r.licenseMsg="Your license has been exceeded":r.licenseMsg=""})}),e.$on("$routeChangeSuccess",function(){e.currentuser=o.fetchCachedUser(),e.superAdmin=c.getState()}),e.showBackBtnToAdmin=function(){return e.superAdmin&&e.currentuser&&"SuperAdmin"!==e.currentuser.role},e.goToSuperUserAccount=function(){o.goToSuperUserAccount().then(function(e){o.setCachedUser(e),n.path("/admin/insights")})["catch"](function(e){console.log(e)})},e.isActive=function(e){return e===n.path()},e.$on("session:loggedOut",function(){n.path("/login")}),i(function(){o.fetchCachedUser()||a(n.path())&&n.path("/login")},15e3),e.today=new Date,r.notification=null;var d=null;r.showNotification=!1,r.showMenu=!0,e.$on("noMenu",function(e,t){r.showMenu=!1}),e.$on("showMenu",function(e,t){r.showMenu=!0}),r.$on("notification",function(e,t){s.cancel(d),r.notification=t,r.showNotification=!0,d=s(function(){r.showNotification=!1,s(function(){r.showNotification||(r.notification=null)},2e3)},5e3)})}]).run(["$location","$interval","$rootScope","synsormed.components.wait.WaitService","synsormed.services.UserService","$route","isOnPublicUrl","isSuperAdminUrl","isOrgCreatorUrl","isPatientUrl",function(e,t,r,n,o,s,i,a,c,l){r.currentuser=window.currentuser,r.page={title:"SynsorMed"},r.$on("wait:start",function(){n.start()}),r.$on("wait:stop",function(){n.stop()}),r.$on("wait:forceStop",function(){n.forceStop()}),r.$on("$routeChangeStart",function(){n.start(),r.page.title="SynsorMed"}),r.$on("$routeChangeSuccess",function(){n.forceStop()}),r.$on("$routeChangeError",function(){n.forceStop(),e.path("/login")}),r.$on("pageLoaded",function(e,t){r.page.title="SynsorMed: "+t.title});var u=!1;r.$on("web:chat:started",function(e,t){u=!0}),r.$on("web:chat:stopped",function(e,t){u=!1}),r.$on("$routeChangeStart",function(t){var r=a(e.path()),n=c(e.path()),s=i(e.path()),u=l(e.path()),d=o.fetchCachedUser(),p=!d&&s;if(d)var f=d&&"SuperAdmin"!=d.role&&r,m=d&&"SuperAdmin"!=d.role&&"OrgCreator"!=d.role&&n,h=d&&!d.isEncounter&&u,g=d&&d.isEncounter&&s&&!u;(m||p||f||h||g)&&(t.preventDefault(),e.path("/login"))}),o.fetchCachedUser()||i(e.path())&&e.path("/login");var d=new Date;$("body").mousemove(function(e){d=new Date}),t(function(){var t=new Date;if(t.getTime()-d.getTime()>9e5){if(u)return;i(e.path())&&e.path("/login"),o.clearCachedUser()}},3e4)}]).directive("form",[function(){return{restrict:"E",link:{post:function(e,t){e.$emit("setForm",e.form)}}}}]).directive("help",[function(){return{restrict:"E",replace:!0,template:"<span class='help'><i class='fa fa-question-circle' popover-placement='right' popover='{{helpText}}' popover-trigger='mouseenter'></span>",scope:{helpText:"@"}}}]).directive("validate",["$timeout",function(e){return{restrict:"A",link:{post:function(t,r,n){function o(){var e=t.form[l].$error;for(var r in e)if(e[r]){switch(r){case"required":return"This field is required";case"characters":return"This field contains invalid characters";case"email":return"Invalid email format";case"max":return"Value must be less than "+c.attr("max");case"min":return"Value must be greater than "+c.attr("min");case"maxlength":return"Value must be less than "+c.attr("ng-maxlength")+" characters long ";case"minlength":return"Value must be greater than "+c.attr("ng-minlength")+" characters long";case"pattern":return"Invalid "+c.attr("name")+" format";case"mask":return"Invalid "+c.attr("name")+" format"}return r}}function s(){i.dirty?r.addClass("dirty"):r.removeClass("dirty"),i.invalid&&i.dirty?(r.addClass("has-error"),a.text(o()),a.removeClass("ng-hide")):(a.text(""),a.addClass("ng-hide"),r.removeClass("has-error"))}var i={dirty:!1,invalid:!1},a=$("<small>").addClass("error-container").addClass("ng-hide"),c=r.find("input");c.length||(c=r.find("select"));var l=c.attr("name");r.append(a),c.on("keyup",function(){s()}),c.on("blur",function(){s()}),t.$on("$destroy",function(){a.remove()}),t.form&&l&&(t.$on("validate",function(){c.is("select")?i.dirty=!0:e(function(){c.triggerHandler("change")},1),s()}),t.$watch("form."+l+".$dirty",function(e){i.dirty=e,s()},!0),t.$watch("form."+l+".$invalid",function(e){i.invalid=e,s()},!0),t.$on("setInvalid:"+l,function(e,r){i.dirty=!0,i.invalid=!0,t.form[l].$setValidity(r,!1),s()}),t.$on("setValid:"+l,function(e,r){i.dirty=!0,i.invalid=!1,t.form[l].$setValidity(r,!0),s()}))}}}}]).filter("defaultText",[function(){return function(e,t){return e?e:t}}]).filter("formatDob",[function(){return function(e){return e?moment(e).format("MMM-DD-YYYY"):"N/A"}}]).filter("secondsToDateTime",[function(){return function(e){return new Date(1970,0,1).setSeconds(e)}}]).filter("secondsToHoursString",[function(){return function(e){var r=60,n=["hrs","min","sec"],o=n.map(function(o,s){return a=parseInt(Math.pow(r,2-s*s)),t=a>0?parseInt(e/a,10):e,e-=t*a,t>0?t+" "+n[s]:null});return o=o.join(" ").trim(),0==o.length?"0 sec":o}}]).filter("timerFormat",[function(){return function(e){if(!e)return"Invalid";var t=e.hours().toString();t=t.length<2?"0"+t:t;var r=e.minutes().toString();r=r.length<2?"0"+r:r;var n=e.seconds().toString();return n=n.length<2?"0"+n:n,t+" : "+r+" : "+n}}]).filter("propsFilter",function(){return function(e,t){var r=[];if(angular.isArray(e)){var n=Object.keys(t);e.forEach(function(e){for(var o=!1,s=0;s<n.length;s++){var i=n[s],a=t[i].toLowerCase();if(e[i].toString().toLowerCase().indexOf(a)!==-1){o=!0;break}}o&&r.push(e)})}else r=e;return r}}).directive("tagsInput",[function(){return{restrict:"EA",transclude:!0,scope:{tags:"=ngModel"},link:function(e,t){var r=e.tags?e.tags.split(","):[];$(t).tagsinput({mintags:3,maxTags:5,confirmKeys:[13,44]}),$(t).siblings("div").children("input").css("width","150px"),r.forEach(function(e){$(t).tagsinput("add",e)}),$(t).on("beforeItemAdd",function(t){var n=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;n.test(t.item)?(t.cancel=!1,r.push(t.item),e.tags=r.toString(),e.$apply()):t.cancel=!0}),$(t).on("beforeItemRemove",function(t){_.pull(r,t.item),e.tags=r.toString(),e.$apply()}),e.$on("$destroy",function(){$(t).tagsinput("destroy")})}}}]).directive("threshold",[function(){return{restrict:"A",scope:{safeLevel:"=",currentLevel:"="},link:{post:function(e,t,r){e.safeLevel>e.currentLevel?(t.removeClass("alert-success"),t.addClass("alert-warning")):(t.removeClass("alert-warning"),t.addClass("alert-success"))}}}}]).directive("showPassword",function(){return function(e,t,r){e.$watch(r.showPassword,function(e){e?t.attr("type","text"):t.attr("type","password")})}}).factory("debounce",["$timeout",function(e){return function(t,r){var n=null;return function(){e.cancel(n),n=e(t,r)}}}]).factory("isOnPublicUrl",["publicUrls",function(e){return function(t){return e.indexOf(t)==-1}}]).factory("isSuperAdminUrl",["superAdminUrls",function(e){return function(t){return e.indexOf(t)!=-1}}]).factory("isOrgCreatorUrl",["orgCreatorUrls",function(e){return function(t){return e.indexOf(t)!=-1}}]).factory("isPatientUrl",["patientUrls",function(e){return function(t){return e.indexOf(t)!=-1}}]).factory("isBrowserSupported",["$window",function(e){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}]);